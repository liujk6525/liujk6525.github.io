{
    "version": "https://jsonfeed.org/version/1",
    "title": "ä½ ä¸æ˜¯å•æ‰“ç‹¬æ–— â€¢ All posts by \"jupyter notebook\" tag",
    "description": "",
    "home_page_url": "https://liujk6525.github.io",
    "items": [
        {
            "id": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/",
            "url": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/",
            "title": "æ”¯æŒå‘é‡æœº",
            "date_published": "2023-06-07T13:39:07.000Z",
            "content_html": "<h1 id=\"æ”¯æŒå‘é‡æœºsupport-vector-machinessvm\"><a href=\"https://baike.baidu.com/link?url=4o8vmNTvVy9pd-Dpxirhv80tv92zBfxvv6uPHb4Wm3yyPV94e21R3itRTww9yHzkoXyesQZ8fAlpV-DZ579U5p1DUeS6T2O_hv_5Iwz7LHbAGg2cNexGPAxywQhxIzyKReLlwFlWv2iCdo1HE-_tKK\">æ”¯æŒå‘é‡æœºï¼ˆSupport Vector Machinesï¼ŒSVMï¼‰</a></h1>\r\n<h2 id=\"svm\">SVM</h2>\r\n<p>SVMå¯»æ‰¾åŒºåˆ†ä¸¤ç±»çš„è¶…å¹³é¢ï¼ˆhyper plane), ä½¿è¾¹é™…ï¼ˆmarginï¼‰æœ€å¤§</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607214309677.png\" style=\"zoom:67%;\" /></p>\r\n<h2 id=\"å‘é‡å†…ç§¯\">å‘é‡å†…ç§¯</h2>\r\n<p><span class=\"math display\">\\[\r\nx=(x_1,x_2,\\cdots,x_n)^T,y=(y_1,y_2,\\cdots,y_n)^T\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nx\\cdot y=x_1y_1+x_2y_2+\\cdots+x_ny_n=||x||\\cdot||y||\\cos(\\theta)\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n||x||=\\sqrt{x\\cdot x}=\\sqrt{x_1^2+x_2^2+\\cdots+x_n^2}\r\n\\]</span></p>\r\n<p>å½“<span class=\"math inline\">\\(||x||\\neq0,||y||\\neq0\\)</span>æ—¶ï¼Œæ±‚è§£ä½™å¼¦ç›¸ä¼¼åº¦ <span class=\"math display\">\\[\r\n\\cos(\\theta)=\\frac{x\\cdot y}{||x||\\cdot||y||}\r\n\\]</span></p>\r\n<h2 id=\"æ¨å¯¼\">æ¨å¯¼</h2>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230608085359722.png\"  style=\"zoom: 67%;\" /> <span class=\"math display\">\\[\r\nw\\cdot x_1+b=1\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nw\\cdot x_2+b=-1\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nw(x_1-x_2)=2\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n||w||\\cdot||(x_1-x_2)||\\cdot||\\cos(\\theta)||=2\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n||w||\\cdot||d||=2\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nd=\\frac{2}{||w||}\r\n\\]</span></p>\r\n<p>è½¬åŒ–ä¸ºå‡¸ä¼˜åŒ–é—®é¢˜ <span class=\"math display\">\\[\r\ny(w\\cdot x+b)\\geq1\\begin{cases}w\\cdot x+b\\geq1\\quad y=1\\\\w\\cdot x+b\\leq1\\quad y=-1\\end{cases}\r\n\\]</span> æ±‚<span class=\"math inline\">\\(d=\\frac{2}{||w||}\\)</span>æœ€å¤§å€¼ï¼Œä¹Ÿå°±æ˜¯æ±‚<span class=\"math inline\">\\(min\\frac{||w||^2}{2}\\)</span></p>\r\n<h2 id=\"å‡¸ä¼˜åŒ–é—®é¢˜\">å‡¸ä¼˜åŒ–é—®é¢˜</h2>\r\n<ol type=\"1\">\r\n<li><p>æ— çº¦æŸä¼˜åŒ–é—®é¢˜ï¼š<span class=\"math inline\">\\(minf(x)\\)</span>â€”â€”è´¹é©¬å®šç†</p></li>\r\n<li><p>å¸¦ç­‰å¼çº¦æŸçš„ä¼˜åŒ–é—®é¢˜ï¼š<span class=\"math inline\">\\(minf(x)\\)</span>â€“æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³• <span class=\"math display\">\\[\r\ns.t.h_i(x)=0,\\quad i=1,2,\\cdots,n\\\\\r\nL(x,\\lambda)=f(x)+\\sum_{i=1}^{n}{\\lambda_ih_i(x)}\r\n\\]</span></p></li>\r\n<li><p>å¸¦ä¸ç­‰å¼çº¦æŸçš„ä¼˜åŒ–é—®é¢˜ï¼š<span class=\"math inline\">\\(minf(x)\\)</span>â€”â€”<a href=\"https://baike.baidu.com/item/%E5%8D%A1%E7%BD%97%E9%9C%80-%E5%BA%93%E6%81%A9-%E5%A1%94%E5%85%8B%E6%9D%A1%E4%BB%B6/23121032?fr=aladdin\">KKTï¼ˆKarush-Kuhn-Tuckerï¼‰æ¡ä»¶</a> <span class=\"math display\">\\[\r\ns.t.h_i(x)=0,\\quad i=1,2,\\cdots,n\\\\\r\ng_i(x)\\leq0,\\quad i=1,2,\\cdots,k\\\\\r\nL(x,\\lambda,v)=f(x)+\\sum_{i=1}^{k}{\\lambda_ig_i(x)}+\\sum_{i=1}^{n}{v_ih_i(x)}\r\n\\]</span></p></li>\r\n</ol>\r\n<p>è¿™é‡Œæˆ‘ä»¬å¤„ç†çš„æ˜¯<strong>å¸¦ä¸ç­‰å¼çº¦æŸ</strong>çš„ä¼˜åŒ–é—®é¢˜ï¼š <span class=\"math display\">\\[\r\nL(\\alpha,w,b)=\\frac{1}{2}||w||^2-\\sum_{i=1}^{k}{\\alpha(1-y_i(w^Tx_i+b))}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\ns.t.\\quad 1-y_i(w^Tx_i+b)\\leq0\r\n\\]</span></p>\r\n<p>ç®€åŒ–ä¸ºå¯¹å¶é—®é¢˜ï¼š<span class=\"math inline\">\\(\\underset {w,b}{min}\\quad\\underset{\\alpha\\geq0}{max}\\quad L(\\alpha,w,b)\\)</span></p>\r\n<p>å¯ä»¥ç­‰ä»·ä¸ºï¼š<span class=\"math inline\">\\(\\underset {\\alpha\\geq0}{max}\\quad\\underset {w,b}{min}\\quad L(\\alpha,w,b)\\)</span></p>\r\n<p>æ‰€ä»¥ï¼Œå…ˆå¯¹<span class=\"math inline\">\\(w,b\\)</span>è¿›è¡Œæ±‚å¯¼ï¼Œ <span class=\"math display\">\\[\r\n\\frac{\\partial L}{\\partial w}=0\\rightarrow w=\\sum_{i=1}^{n}{\\alpha_iy_ix_i}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n\\frac{\\partial L}{\\partial b}=0\\rightarrow \\sum_{i=1}^{n}{\\alpha_iy_i}=0\r\n\\]</span></p>\r\n<p>ç„¶åï¼Œå°†ä¸Šå¼ä»£å…¥<span class=\"math inline\">\\(L(\\alpha,w,b)\\)</span>å¾—åˆ°ä¸€ä¸ªåªä¸<span class=\"math inline\">\\(\\alpha\\)</span>ç›¸å…³çš„å‡½æ•°ã€‚ <span class=\"math display\">\\[\r\nL(\\alpha,w,b)=\\sum_{i=1}^{n}{\\alpha_i}-\\frac{1}{2}\\sum_{i,j=1}^{n}{\\alpha_i\\alpha_jy_iy_jx_i^Tx_j}\r\n\\]</span> æœ€åä¼˜åŒ–é—®é¢˜å¯è¡¨ç¤ºä¸ºï¼š <span class=\"math display\">\\[\r\n\\underset {\\alpha\\geq0}{max}\\quad\\underset {w,b}{min}\\quad L(\\alpha,w,b)=\\underset {\\alpha\\geq0}{max}\\quad\\sum_{i=1}^{n}{\\alpha_i}-\\frac{1}{2}\\sum_{i,j=1}^{n}{\\alpha_i\\alpha_jy_iy_jx_i^Tx_j}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=\\underset {\\alpha\\geq0}{min}\\quad\r\n\\frac{1}{2}\\sum_{i,j=1}^{n}{\\alpha_i\\alpha_jy_iy_jx_i^Tx_j}-\\sum_{i=1}^{n}{\\alpha_i}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\ns.t.\\quad \\sum_{i=1}^{n}{a_iy_i=0}\\quad a_i\\geq0,i=1,2,\\cdots,n\r\n\\]</span></p>\r\n<p>ç”±æ­¤ï¼Œå¯æ±‚å‡ºæœ€ä¼˜è§£<span class=\"math inline\">\\(\\alpha^{*}\\)</span>ï¼Œç„¶åå†åä»£å›å»æ±‚<span class=\"math inline\">\\(w,b\\)</span>ã€‚ <span class=\"math display\">\\[\r\nw^{*}=\\sum_{i=1}^{n}{\\alpha^{*}_iy_ix_i}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nb^{*}=y_i-(w^{*})^Tx_i\r\n\\]</span></p>\r\n<h2 id=\"çº¿æ€§åˆ†ç±»ç¤ºä¾‹ä»£ç \">çº¿æ€§åˆ†ç±»ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> svm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»º40ä¸ªç‚¹</span></span><br><span class=\"line\">x_data = np.r_[np.random.randn(<span class=\"number\">20</span>, <span class=\"number\">2</span>) - [<span class=\"number\">2</span>, <span class=\"number\">2</span>], np.random.randn(<span class=\"number\">20</span>, <span class=\"number\">2</span>) + [<span class=\"number\">2</span>, <span class=\"number\">2</span>]]</span><br><span class=\"line\">y_data = [<span class=\"number\">0</span>]*<span class=\"number\">20</span> +[<span class=\"number\">1</span>]*<span class=\"number\">20</span></span><br><span class=\"line\"></span><br><span class=\"line\">plt.scatter(x_data[:,<span class=\"number\">0</span>],x_data[:,<span class=\"number\">1</span>],c=y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è®­ç»ƒå’Œæ‹Ÿåˆæ¨¡å‹</span></span><br><span class=\"line\"><span class=\"comment\"># (SVCï¼ŒCæ˜¯Classification(åˆ†ç±»);SVRï¼ŒRæ˜¯Regression(å›å½’))ã€‚</span></span><br><span class=\"line\">model = svm.SVC(kernel=<span class=\"string\">&#x27;linear&#x27;</span>)  <span class=\"comment\"># linearæ˜¯çº¿æ€§æ ¸</span></span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è·å–åˆ†ç¦»å¹³é¢ </span></span><br><span class=\"line\">plt.scatter(x_data[:,<span class=\"number\">0</span>],x_data[:,<span class=\"number\">1</span>],c=y_data)</span><br><span class=\"line\">x_test = np.array([[-<span class=\"number\">5</span>],[<span class=\"number\">5</span>]])</span><br><span class=\"line\">d = -model.intercept_/model.coef_[<span class=\"number\">0</span>][<span class=\"number\">1</span>]</span><br><span class=\"line\">k = -model.coef_[<span class=\"number\">0</span>][<span class=\"number\">0</span>]/model.coef_[<span class=\"number\">0</span>][<span class=\"number\">1</span>]</span><br><span class=\"line\">y_test = d + k*x_test</span><br><span class=\"line\">plt.plot(x_test, y_test, <span class=\"string\">&#x27;k&#x27;</span>)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºé€šè¿‡æ”¯æŒå‘é‡çš„åˆ†ç•Œçº¿</span></span><br><span class=\"line\">b1 = model.support_vectors_[<span class=\"number\">0</span>]</span><br><span class=\"line\">y_down = k*x_test + (b1[<span class=\"number\">1</span>] - k*b1[<span class=\"number\">0</span>])</span><br><span class=\"line\">b2 = model.support_vectors_[-<span class=\"number\">1</span>]</span><br><span class=\"line\">y_up = k*x_test + (b2[<span class=\"number\">1</span>] - k*b2[<span class=\"number\">0</span>])</span><br><span class=\"line\">plt.scatter(x_data[:,<span class=\"number\">0</span>],x_data[:,<span class=\"number\">1</span>],c=y_data)</span><br><span class=\"line\">x_test = np.array([[-<span class=\"number\">5</span>],[<span class=\"number\">5</span>]])</span><br><span class=\"line\">d = -model.intercept_/model.coef_[<span class=\"number\">0</span>][<span class=\"number\">1</span>]</span><br><span class=\"line\">k = -model.coef_[<span class=\"number\">0</span>][<span class=\"number\">0</span>]/model.coef_[<span class=\"number\">0</span>][<span class=\"number\">1</span>]</span><br><span class=\"line\">y_test = d + k*x_test</span><br><span class=\"line\">plt.plot(x_test, y_test, <span class=\"string\">&#x27;k&#x27;</span>)</span><br><span class=\"line\">plt.plot(x_test, y_down, <span class=\"string\">&#x27;r--&#x27;</span>)</span><br><span class=\"line\">plt.plot(x_test, y_up, <span class=\"string\">&#x27;b--&#x27;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230608111858386.png\"  style=\"zoom: 50%;\" /></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230608112059982.png\"  style=\"zoom:50%;\" /></p>\r\n<h2 id=\"éçº¿æ€§åˆ†ç±»ç¤ºä¾‹ä»£ç \">éçº¿æ€§åˆ†ç±»ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> svm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;LR-testSet2.txt&quot;</span>, delimiter=<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">x_data = data[:,:-<span class=\"number\">1</span>]</span><br><span class=\"line\">y_data = data[:,-<span class=\"number\">1</span>]</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">plot</span>():</span><br><span class=\"line\">    x0 = []</span><br><span class=\"line\">    x1 = []</span><br><span class=\"line\">    y0 = []</span><br><span class=\"line\">    y1 = []</span><br><span class=\"line\">    <span class=\"comment\"># åˆ‡åˆ†ä¸åŒç±»åˆ«çš„æ•°æ®</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(x_data)):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> y_data[i]==<span class=\"number\">0</span>:</span><br><span class=\"line\">            x0.append(x_data[i,<span class=\"number\">0</span>])</span><br><span class=\"line\">            y0.append(x_data[i,<span class=\"number\">1</span>])</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            x1.append(x_data[i,<span class=\"number\">0</span>])</span><br><span class=\"line\">            y1.append(x_data[i,<span class=\"number\">1</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ç”»å›¾</span></span><br><span class=\"line\">    scatter0 = plt.scatter(x0, y0, c=<span class=\"string\">&#x27;b&#x27;</span>, marker=<span class=\"string\">&#x27;o&#x27;</span>)</span><br><span class=\"line\">    scatter1 = plt.scatter(x1, y1, c=<span class=\"string\">&#x27;r&#x27;</span>, marker=<span class=\"string\">&#x27;x&#x27;</span>)</span><br><span class=\"line\">    <span class=\"comment\">#ç”»å›¾ä¾‹</span></span><br><span class=\"line\">    plt.legend(handles=[scatter0,scatter1],labels=[<span class=\"string\">&#x27;label0&#x27;</span>,<span class=\"string\">&#x27;label1&#x27;</span>],loc=<span class=\"string\">&#x27;best&#x27;</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">plot()</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå’Œè®­ç»ƒæ¨¡å‹</span></span><br><span class=\"line\"><span class=\"comment\"># Cå’Œgamma</span></span><br><span class=\"line\">model = svm.SVC(kernel=<span class=\"string\">&#x27;rbf&#x27;</span>) <span class=\"comment\"># rbfæ˜¯gai&#x27;siå¾„å‘åŸºå‡½æ•°</span></span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è·å–æ•°æ®å€¼æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class=\"line\">x_min, x_max = x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\">y_min, y_max = x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">xx, yy = np.meshgrid(np.arange(x_min, x_max, <span class=\"number\">0.02</span>),</span><br><span class=\"line\">                     np.arange(y_min, y_max, <span class=\"number\">0.02</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">z = model.predict(np.c_[xx.ravel(), yy.ravel()])<span class=\"comment\"># ravelä¸flattenç±»ä¼¼ï¼Œå¤šç»´æ•°æ®è½¬ä¸€ç»´ã€‚flattenä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®ï¼Œravelä¼šæ”¹å˜åŸå§‹æ•°æ®</span></span><br><span class=\"line\">z = z.reshape(xx.shape)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç­‰é«˜çº¿å›¾</span></span><br><span class=\"line\">cs = plt.contourf(xx, yy, z)</span><br><span class=\"line\">plot() </span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230608112344298.png\"  style=\"zoom:50%;\" /></p>\r\n<h2 id=\"smosequential-minimal-optimizationç®—æ³•\"><a href=\"https://baike.baidu.com/item/%E5%BA%8F%E5%88%97%E6%9C%80%E5%B0%8F%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/22742660?fromtitle=SMO%E7%AE%97%E6%B3%95&amp;fromid=24087607&amp;fr=aladdin\">SMOï¼ˆSequential minimal optimizationï¼‰ç®—æ³•</a></h2>\r\n<h2 id=\"æ ¸å‡½æ•°\">æ ¸å‡½æ•°</h2>\r\n<p>æ„é€ æ ¸å‡½æ•°ä½¿å¾—è¿ç®—ç»“æœç­‰åŒäºéçº¿æ€§æ˜ å°„ï¼Œ åŒæ—¶è¿ç®—é‡è¦è¿œè¿œå°äºéçº¿æ€§æ˜ å°„ã€‚</p>\r\n<p>hæ¬¡å¤šé¡¹å¼æ ¸å‡½æ•°ï¼š<span class=\"math inline\">\\(K(X_i,X_j)=(X_i,X_j)^h\\)</span></p>\r\n<p>é«˜æ–¯å¾„å‘åŸºå‡½æ•°æ ¸å‡½æ•°ï¼š<span class=\"math inline\">\\(K(X_i,X_j)=e^{-\\frac{||X_i-X_j||^2}{2\\sigma^2}}\\)</span></p>\r\n<p>Så‹æ ¸å‡½æ•°ï¼š<span class=\"math inline\">\\(K(X_i,X_j)=\\tanh(kX_iY_i-\\delta)\\)</span></p>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Rt411q7WJ/?p=81&amp;spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=fe8e916be2bd597efffd8dfd95249141\">æ”¯æŒå‘é‡æœº</a></p>\r\n",
            "tags": [
                "Python",
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E4%B8%BB%E6%88%90%E5%88%86%E5%88%86%E6%9E%90/",
            "url": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E4%B8%BB%E6%88%90%E5%88%86%E5%88%86%E6%9E%90/",
            "title": "ä¸»æˆåˆ†åˆ†æ",
            "date_published": "2023-06-07T13:06:14.000Z",
            "content_html": "<h1 id=\"ä¸»æˆåˆ†åˆ†æprincipal-component-analysispca\"><a href=\"https://baike.baidu.com/link?url=L2dvUGuaHxY-G-i8guCGRunHB4x6TIUECJUk3yG1d8pelX_sXVAtH2UXpHPA1Yn35TfalSGJ7jNxatvg-0ZCBVxNnyYX5pRSTbU-9EFsGKEW6C2NcydL1FZPhrMhWlPkUQRQW4jzsPpL_o3XRbQCnq\">ä¸»æˆåˆ†åˆ†æ(Principal Component Analysisï¼ŒPCA)</a></h1>\r\n<h2 id=\"ç®—æ³•æµç¨‹\">ç®—æ³•æµç¨‹ï¼š</h2>\r\n<ol type=\"1\">\r\n<li>æ•°æ®é¢„å¤„ç†ï¼šä¸­å¿ƒåŒ–<span class=\"math inline\">\\(ğ‘‹âˆ’\\overlineğ‘‹\\)</span>ã€‚</li>\r\n<li>æ±‚æ ·æœ¬çš„åæ–¹å·®çŸ©é˜µ<span class=\"math inline\">\\(\\frac{1}{m}XX^T\\)</span> ã€‚</li>\r\n<li>å¯¹åæ–¹å·®çŸ©é˜µ<span class=\"math inline\">\\(\\frac{1}{m}XX^T\\)</span>åšç‰¹å¾å€¼åˆ†è§£ã€‚</li>\r\n<li>é€‰å‡ºæœ€å¤§çš„<span class=\"math inline\">\\(k\\)</span>ä¸ªç‰¹å¾å€¼å¯¹åº”çš„<span class=\"math inline\">\\(k\\)</span>ä¸ªç‰¹å¾å‘é‡ã€‚</li>\r\n<li>å°†åŸå§‹æ•°æ®æŠ•å½±åˆ°é€‰å–çš„ç‰¹å¾å‘é‡ä¸Šã€‚</li>\r\n<li>è¾“å‡ºæŠ•å½±åçš„æ•°æ®é›†ã€‚</li>\r\n</ol>\r\n<!--- more -->\r\n<h2 id=\"åæ–¹å·®\">åæ–¹å·®</h2>\r\n<p>æ–¹å·®å°±æ˜¯æè¿°<strong>ä¸€ä¸ªæ•°æ®</strong>çš„ç¦»æ•£ç¨‹åº¦ï¼š <span class=\"math display\">\\[\r\nvar(X)=\\frac{\\sum_{i=1}^{n}{(X_i-\\overline X)(X_i-\\overline X)}}{n-1}\r\n\\]</span> åæ–¹å·®æ˜¯æè¿°<strong>ä¸¤ä¸ªæ•°æ®</strong>çš„ç›¸å…³æ€§ï¼Œæ¥è¿‘1å°±æ˜¯æ­£ç›¸å…³ï¼Œ æ¥è¿‘-1å°±æ˜¯è´Ÿç›¸å…³ï¼Œæ¥è¿‘0å°±æ˜¯ä¸ç›¸å…³ã€‚ <span class=\"math display\">\\[\r\ncov(X,Y)=\\frac{\\sum_{i=1}^{n}{(X_i-\\overline X)(Y_i-\\overline Y)}}{n-1}\r\n\\]</span></p>\r\n<h2 id=\"åæ–¹å·®çŸ©é˜µ\">åæ–¹å·®çŸ©é˜µ</h2>\r\n<p>åæ–¹å·®çŸ©é˜µæ˜¯ä¸€ä¸ªå¯¹ç§°çš„çŸ©é˜µï¼Œå¯¹è§’çº¿æ˜¯å„ä¸ªç»´åº¦çš„æ–¹å·®ã€‚</p>\r\n<p>äºŒç»´ï¼š <span class=\"math display\">\\[\r\nC=\\left[\\begin{matrix}\r\ncov(x,x)&amp;cov(x,y)\\\\\r\ncov(y,x)&amp;cov(y,y))\r\n\\end{matrix})\\right]=\\left[\\begin{matrix}\r\n\\frac{\\sum_{i=1}^{m}{(x_i^2)}}{m}&amp;\\frac{\\sum_{i=1}^{m}{(x_iy_i)}}{m}\\\\\r\n\\frac{\\sum_{i=1}^{m}{(y_ix_i)}}{m}&amp;\\frac{\\sum_{i=1}^{m}{(y_i^2)}}{m}\r\n\\end{matrix})\\right]\r\n\\]</span> ä¸‰ç»´ï¼š <span class=\"math display\">\\[\r\nC=\\left[\\begin{matrix}\r\ncov(x,x)&amp;cov(x,y)&amp;cov(x,z)\\\\\r\ncov(y,x)&amp;cov(y,y))&amp;cov(y,z)\\\\\r\ncov(z,x)&amp;cov(z,y)&amp;cov(z,z)\r\n\\end{matrix})\\right]\r\n\\]</span></p>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sklearn.neural_network <span class=\"keyword\">import</span> MLPClassifier</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.datasets <span class=\"keyword\">import</span> load_digits</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.model_selection <span class=\"keyword\">import</span> train_test_split</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report,confusion_matrix</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\">digits = load_digits()<span class=\"comment\">#è½½å…¥æ•°æ®</span></span><br><span class=\"line\">x_data = digits.data <span class=\"comment\">#æ•°æ®</span></span><br><span class=\"line\">y_data = digits.target <span class=\"comment\">#æ ‡ç­¾</span></span><br><span class=\"line\"></span><br><span class=\"line\">x_train,x_test,y_train,y_test = train_test_split(x_data,y_data) <span class=\"comment\">#åˆ†å‰²æ•°æ®1/4ä¸ºæµ‹è¯•æ•°æ®ï¼Œ3/4ä¸ºè®­ç»ƒæ•°æ®</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶æ‹Ÿåˆå¤šå±‚æ„ŸçŸ¥æœºåˆ†ç±»å™¨æ¨¡å‹</span></span><br><span class=\"line\">mlp = MLPClassifier(hidden_layer_sizes=(<span class=\"number\">100</span>,<span class=\"number\">50</span>) ,max_iter=<span class=\"number\">500</span>)</span><br><span class=\"line\">mlp.fit(x_train,y_train)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ•°æ®ä¸­å¿ƒåŒ–</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">zeroMean</span>(<span class=\"params\">dataMat</span>):</span><br><span class=\"line\">    <span class=\"comment\"># æŒ‰åˆ—æ±‚å¹³å‡ï¼Œå³å„ä¸ªç‰¹å¾çš„å¹³å‡</span></span><br><span class=\"line\">    meanVal = np.mean(dataMat, axis=<span class=\"number\">0</span>) </span><br><span class=\"line\">    newData = dataMat - meanVal</span><br><span class=\"line\">    <span class=\"keyword\">return</span> newData, meanVal</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">pca</span>(<span class=\"params\">dataMat,top</span>):</span><br><span class=\"line\">    <span class=\"comment\"># æ•°æ®ä¸­å¿ƒåŒ–</span></span><br><span class=\"line\">    newData,meanVal=zeroMean(dataMat) </span><br><span class=\"line\">    <span class=\"comment\"># np.covç”¨äºæ±‚åæ–¹å·®çŸ©é˜µï¼Œå‚æ•°rowvar=0è¯´æ˜æ•°æ®ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæ ·æœ¬</span></span><br><span class=\"line\">    covMat = np.cov(newData, rowvar=<span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"comment\"># np.linalg.eigæ±‚çŸ©é˜µçš„ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡</span></span><br><span class=\"line\">    eigVals, eigVects = np.linalg.eig(np.mat(covMat))</span><br><span class=\"line\">    <span class=\"comment\"># å¯¹ç‰¹å¾å€¼ä»å°åˆ°å¤§æ’åº</span></span><br><span class=\"line\">    eigValIndice = np.argsort(eigVals)</span><br><span class=\"line\">    <span class=\"comment\"># æœ€å¤§çš„nä¸ªç‰¹å¾å€¼çš„ä¸‹æ ‡</span></span><br><span class=\"line\">    n_eigValIndice = eigValIndice[-<span class=\"number\">1</span>:-(top+<span class=\"number\">1</span>):-<span class=\"number\">1</span>]</span><br><span class=\"line\">    <span class=\"comment\"># æœ€å¤§çš„nä¸ªç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡</span></span><br><span class=\"line\">    n_eigVect = eigVects[:,n_eigValIndice]</span><br><span class=\"line\">    <span class=\"comment\"># ä½ç»´ç‰¹å¾ç©ºé—´çš„æ•°æ®</span></span><br><span class=\"line\">    lowDDataMat = newData*n_eigVect</span><br><span class=\"line\">    <span class=\"comment\"># åˆ©ç”¨ä½çº¬åº¦æ•°æ®æ¥é‡æ„æ•°æ®</span></span><br><span class=\"line\">    reconMat = (lowDDataMat*n_eigVect.T) + meanVal</span><br><span class=\"line\">    <span class=\"comment\"># è¿”å›ä½ç»´ç‰¹å¾ç©ºé—´çš„æ•°æ®å’Œé‡æ„çš„çŸ©é˜µ</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> lowDDataMat,reconMat </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># PCAé™äºŒç»´</span></span><br><span class=\"line\">lowDDataMat,reconMat = pca(x_data,<span class=\"number\">2</span>) </span><br><span class=\"line\"><span class=\"comment\"># é‡æ„çš„æ•°æ®</span></span><br><span class=\"line\">x = np.array(lowDDataMat)[:,<span class=\"number\">0</span>]</span><br><span class=\"line\">y = np.array(lowDDataMat)[:,<span class=\"number\">1</span>]</span><br><span class=\"line\">plt.scatter(x,y,c=y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># PCAé™ä¸‰ç»´</span></span><br><span class=\"line\">lowDDataMat,reconMat = pca(x_data,<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"keyword\">from</span> mpl_toolkits.mplot3d <span class=\"keyword\">import</span> Axes3D  </span><br><span class=\"line\">x = np.array(lowDDataMat)[:,<span class=\"number\">0</span>]</span><br><span class=\"line\">y = np.array(lowDDataMat)[:,<span class=\"number\">1</span>]</span><br><span class=\"line\">z = np.array(lowDDataMat)[:,<span class=\"number\">2</span>]</span><br><span class=\"line\">ax = plt.figure().add_subplot(<span class=\"number\">111</span>, projection = <span class=\"string\">&#x27;3d&#x27;</span>) </span><br><span class=\"line\">ax.scatter(x, y, z, c = y_data, s = <span class=\"number\">10</span>) <span class=\"comment\">#ç‚¹ä¸ºçº¢è‰²ä¸‰è§’å½¢ </span></span><br><span class=\"line\"></span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607213629220.png\"  style=\"zoom:50%;\" /></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607213644726.png\"  style=\"zoom:67%;\" /></p>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Rt411q7WJ?p=74\">ä¸»æˆåˆ†åˆ†æ</a></p>\r\n",
            "tags": [
                "Python",
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/",
            "url": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/",
            "title": "èšç±»ç®—æ³•",
            "date_published": "2023-06-07T11:53:51.000Z",
            "content_html": "<h1 id=\"èšç±»clusterç®—æ³•\"><a href=\"https://baike.baidu.com/item/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/1252197?fr=aladdin\">èšç±»ï¼ˆClusterï¼‰ç®—æ³•</a></h1>\r\n<h2 id=\"k-means\"><a href=\"https://baike.baidu.com/item/K%E5%9D%87%E5%80%BC%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/15779627?fromtitle=K-MEANS%E7%AE%97%E6%B3%95&amp;fromid=594631&amp;fr=aladdin\">K-Means</a></h2>\r\n<p>ä»¥ç©ºé—´ä¸­kä¸ªç‚¹ä¸ºä¸­å¿ƒè¿›è¡Œèšç±»ï¼Œå¯¹æœ€é è¿‘ä»–ä»¬çš„å¯¹è±¡å½’ç±»ã€‚é€šè¿‡è¿­ä»£çš„æ–¹æ³•ï¼Œé€æ¬¡æ›´æ–°å„èšç±»ä¸­å¿ƒçš„å€¼ï¼Œç›´è‡³å¾—åˆ°æœ€å¥½çš„èšç±»ç»“æœã€‚</p>\r\n<p>åŒä¸€èšç±»ä¸­çš„å¯¹è±¡ç›¸ä¼¼åº¦è¾ƒé«˜ï¼›è€Œä¸åŒèšç±»ä¸­çš„å¯¹è±¡ç›¸ä¼¼åº¦è¾ƒå°ã€‚</p>\r\n<p>ç®—æ³•æµç¨‹ï¼š</p>\r\n<ol type=\"1\">\r\n<li><p>å…ˆä»æ²¡æœ‰æ ‡ç­¾çš„å…ƒç´ é›†åˆAä¸­éšæœºå–kä¸ªå…ƒç´ ï¼Œä½œä¸º kä¸ªå­é›†å„è‡ªçš„é‡å¿ƒã€‚</p></li>\r\n<li><p>åˆ†åˆ«è®¡ç®—å‰©ä¸‹çš„å…ƒç´ åˆ°kä¸ªå­é›†é‡å¿ƒçš„è·ç¦»ï¼ˆè¿™é‡Œçš„è·ç¦»ä¹Ÿå¯ä»¥ä½¿ç”¨æ¬§æ°è·ç¦»ï¼‰ï¼Œæ ¹æ®è·ç¦»å°†è¿™äº›å…ƒç´ åˆ†åˆ«åˆ’å½’åˆ°æœ€è¿‘çš„å­é›†ã€‚</p></li>\r\n<li><p>æ ¹æ®èšç±»ç»“æœï¼Œé‡æ–°è®¡ç®—é‡å¿ƒï¼ˆé‡å¿ƒçš„è®¡ç®—æ–¹æ³•æ˜¯ è®¡ç®—å­é›†ä¸­æ‰€æœ‰å…ƒç´ å„ä¸ªç»´åº¦çš„ç®—æ•°å¹³å‡æ•°ï¼‰ã€‚</p></li>\r\n<li><p>å°†é›†åˆAä¸­å…¨éƒ¨å…ƒç´ æŒ‰ç…§æ–°çš„é‡å¿ƒç„¶åå†é‡æ–°èšç±»ã€‚</p></li>\r\n<li><p>é‡å¤ç¬¬4æ­¥ï¼Œç›´åˆ°èšç±»ç»“æœä¸å†å‘ç”Ÿå˜åŒ–ã€‚</p></li>\r\n</ol>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sklearn.cluster <span class=\"keyword\">import</span> KMeans</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å¿½è§†è­¦å‘Š</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> warnings</span><br><span class=\"line\">warnings.filterwarnings(<span class=\"string\">&quot;ignore&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;kmeans.txt&quot;</span>, delimiter=<span class=\"string\">&quot; &quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># è®¾ç½®kå€¼ï¼Œè¿™é‡Œéœ€è¦æ‰‹åŠ¨è®¾ç½®Kå€¼</span></span><br><span class=\"line\">k=<span class=\"number\">4</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶è®­ç»ƒæ¨¡å‹</span></span><br><span class=\"line\">model = KMeans(n_clusters=k,n_init=<span class=\"string\">&#x27;auto&#x27;</span>)</span><br><span class=\"line\">model.fit(data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ†ç±»ä¸­å¿ƒç‚¹åæ ‡</span></span><br><span class=\"line\">centers = model.cluster_centers_</span><br><span class=\"line\"><span class=\"built_in\">print</span>(centers)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># é¢„æµ‹ç»“æœ</span></span><br><span class=\"line\">result = model.predict(data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(result)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºå„ä¸ªæ•°æ®ç‚¹ï¼Œç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºåˆ†ç±»</span></span><br><span class=\"line\">mark = [<span class=\"string\">&#x27;^r&#x27;</span>, <span class=\"string\">&#x27;vb&#x27;</span>, <span class=\"string\">&#x27;pg&#x27;</span>, <span class=\"string\">&#x27;+c&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i,d <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(data):</span><br><span class=\"line\">    plt.plot(d[<span class=\"number\">0</span>], d[<span class=\"number\">1</span>], mark[result[i]])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºå„ä¸ªåˆ†ç±»çš„ä¸­å¿ƒç‚¹</span></span><br><span class=\"line\">mark = [<span class=\"string\">&#x27;*r&#x27;</span>, <span class=\"string\">&#x27;*b&#x27;</span>, <span class=\"string\">&#x27;*g&#x27;</span>, <span class=\"string\">&#x27;*c&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i,center <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(centers):</span><br><span class=\"line\">    plt.plot(center[<span class=\"number\">0</span>],center[<span class=\"number\">1</span>], mark[i], markersize=<span class=\"number\">20</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è·å–æ•°æ®å€¼æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class=\"line\">x_min, x_max = data[:, <span class=\"number\">0</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, data[:, <span class=\"number\">0</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\">y_min, y_max = data[:, <span class=\"number\">1</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, data[:, <span class=\"number\">1</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">xx, yy = np.meshgrid(np.arange(x_min, x_max, <span class=\"number\">0.02</span>),</span><br><span class=\"line\">                     np.arange(y_min, y_max, <span class=\"number\">0.02</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">z = model.predict(np.c_[xx.ravel(), yy.ravel()])<span class=\"comment\"># ravelä¸flattenç±»ä¼¼ï¼Œå¤šç»´æ•°æ®è½¬ä¸€ç»´ã€‚flattenä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®ï¼Œravelä¼šæ”¹å˜åŸå§‹æ•°æ®</span></span><br><span class=\"line\">z = z.reshape(xx.shape)</span><br><span class=\"line\"><span class=\"comment\"># ç­‰é«˜çº¿å›¾</span></span><br><span class=\"line\">cs = plt.contourf(xx, yy, z)</span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºå„ä¸ªæ•°æ®ç‚¹ï¼Œç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºåˆ†ç±»</span></span><br><span class=\"line\">mark = [<span class=\"string\">&#x27;^r&#x27;</span>, <span class=\"string\">&#x27;vb&#x27;</span>, <span class=\"string\">&#x27;pg&#x27;</span>, <span class=\"string\">&#x27;+c&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i,d <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(data):</span><br><span class=\"line\">    plt.plot(d[<span class=\"number\">0</span>], d[<span class=\"number\">1</span>], mark[result[i]])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºå„ä¸ªåˆ†ç±»çš„ä¸­å¿ƒç‚¹</span></span><br><span class=\"line\">mark = [<span class=\"string\">&#x27;*r&#x27;</span>, <span class=\"string\">&#x27;*b&#x27;</span>, <span class=\"string\">&#x27;*g&#x27;</span>, <span class=\"string\">&#x27;*c&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i,center <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(centers):</span><br><span class=\"line\">    plt.plot(center[<span class=\"number\">0</span>],center[<span class=\"number\">1</span>], mark[i], markersize=<span class=\"number\">20</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607203700434.png\"  style=\"zoom:50%;\" /></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607203924280.png\"  style=\"zoom:52%;\" /></p>\r\n<h2 id=\"mini-batch-k-means\">Mini Batch K-Means</h2>\r\n<p>é‡‡ç”¨å°æ‰¹é‡çš„æ•°æ®å­é›†å‡å°è®¡ç®—æ—¶é—´ã€‚ä¹Ÿå°±æ˜¯éšæœºæŠ½å–æ•°æ®å­é›†è¿›è¡Œè®­ç»ƒç®—æ³•ï¼Œç»“æœä¸€èˆ¬åªç•¥å·®äºæ ‡å‡†ç®—æ³•ã€‚</p>\r\n<p>1ï¼šä»æ•°æ®é›†ä¸­éšæœºæŠ½å–ä¸€äº›æ•°æ®å½¢æˆå°æ‰¹é‡ï¼ŒæŠŠä»–ä»¬åˆ†é…ç»™æœ€è¿‘çš„è´¨å¿ƒ</p>\r\n<p>2ï¼šæ›´æ–°è´¨å¿ƒï¼Œä¸<strong>K-Means</strong>ç®—æ³•ç›¸æ¯”ï¼Œæ•°æ®çš„æ›´æ–°æ˜¯åœ¨æ¯ä¸€ä¸ªå°çš„æ ·æœ¬é›†ä¸Šã€‚</p>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç -1\">ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sklearn.cluster <span class=\"keyword\">import</span> MiniBatchKMeans</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># å¿½è§†è­¦å‘Š</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> warnings</span><br><span class=\"line\">warnings.filterwarnings(<span class=\"string\">&quot;ignore&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;kmeans.txt&quot;</span>, delimiter=<span class=\"string\">&quot; &quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># è®¾ç½®kå€¼</span></span><br><span class=\"line\">k = <span class=\"number\">4</span>  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶è®­ç»ƒæ¨¡å‹</span></span><br><span class=\"line\">model = MiniBatchKMeans(n_clusters=k,n_init=<span class=\"string\">&#x27;auto&#x27;</span>)</span><br><span class=\"line\">model.fit(data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ†ç±»ä¸­å¿ƒç‚¹åæ ‡</span></span><br><span class=\"line\">centers = model.cluster_centers_</span><br><span class=\"line\"><span class=\"built_in\">print</span>(centers)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># é¢„æµ‹ç»“æœ</span></span><br><span class=\"line\">result = model.predict(data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(result)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºå„ä¸ªæ•°æ®ç‚¹ï¼Œç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºåˆ†ç±»</span></span><br><span class=\"line\">mark = [<span class=\"string\">&#x27;or&#x27;</span>, <span class=\"string\">&#x27;ob&#x27;</span>, <span class=\"string\">&#x27;og&#x27;</span>, <span class=\"string\">&#x27;oy&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i,d <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(data):</span><br><span class=\"line\">    plt.plot(d[<span class=\"number\">0</span>], d[<span class=\"number\">1</span>], mark[result[i]])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºå„ä¸ªåˆ†ç±»çš„ä¸­å¿ƒç‚¹</span></span><br><span class=\"line\">mark = [<span class=\"string\">&#x27;*r&#x27;</span>, <span class=\"string\">&#x27;*b&#x27;</span>, <span class=\"string\">&#x27;*g&#x27;</span>, <span class=\"string\">&#x27;*y&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i,center <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(centers):</span><br><span class=\"line\">    plt.plot(center[<span class=\"number\">0</span>],center[<span class=\"number\">1</span>], mark[i], markersize=<span class=\"number\">20</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è·å–æ•°æ®å€¼æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class=\"line\">x_min, x_max = data[:, <span class=\"number\">0</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, data[:, <span class=\"number\">0</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\">y_min, y_max = data[:, <span class=\"number\">1</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, data[:, <span class=\"number\">1</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">xx, yy = np.meshgrid(np.arange(x_min, x_max, <span class=\"number\">0.02</span>),</span><br><span class=\"line\">                     np.arange(y_min, y_max, <span class=\"number\">0.02</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">z = model.predict(np.c_[xx.ravel(), yy.ravel()])<span class=\"comment\"># ravelä¸flattenç±»ä¼¼ï¼Œå¤šç»´æ•°æ®è½¬ä¸€ç»´ã€‚flattenä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®ï¼Œravelä¼šæ”¹å˜åŸå§‹æ•°æ®</span></span><br><span class=\"line\">z = z.reshape(xx.shape)</span><br><span class=\"line\"><span class=\"comment\"># ç­‰é«˜çº¿å›¾</span></span><br><span class=\"line\">cs = plt.contourf(xx, yy, z)</span><br><span class=\"line\"><span class=\"comment\"># æ˜¾ç¤ºç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºå„ä¸ªæ•°æ®ç‚¹ï¼Œç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºåˆ†ç±»</span></span><br><span class=\"line\">mark = [<span class=\"string\">&#x27;or&#x27;</span>, <span class=\"string\">&#x27;ob&#x27;</span>, <span class=\"string\">&#x27;og&#x27;</span>, <span class=\"string\">&#x27;oy&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i,d <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(data):</span><br><span class=\"line\">    plt.plot(d[<span class=\"number\">0</span>], d[<span class=\"number\">1</span>], mark[result[i]])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºå„ä¸ªåˆ†ç±»çš„ä¸­å¿ƒç‚¹</span></span><br><span class=\"line\">mark = [<span class=\"string\">&#x27;*r&#x27;</span>, <span class=\"string\">&#x27;*b&#x27;</span>, <span class=\"string\">&#x27;*g&#x27;</span>, <span class=\"string\">&#x27;*y&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i,center <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(centers):</span><br><span class=\"line\">    plt.plot(center[<span class=\"number\">0</span>],center[<span class=\"number\">1</span>], mark[i], markersize=<span class=\"number\">20</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607205405646.png\"  style=\"zoom:50%;\" /></p>\r\n<p>â€‹ <img src=\"/imgs/$%7Bfiilename%7D/image-20230607204231807.png\"  style=\"zoom:50%;\" /></p>\r\n<h1 id=\"dbscandensity-based-spatial-clustering-of-applications-with-noise\"><a href=\"https://baike.baidu.com/item/DBSCAN/4864716?fr=aladdin\">DBSCANï¼ˆDensity-Based Spatial Clustering of Applications with Noiseï¼‰</a></h1>\r\n<p>èƒ½å¤Ÿå°†å…·æœ‰è¶³å¤Ÿé«˜å¯†åº¦çš„åŒºåŸŸåˆ’åˆ†ä¸ºç°‡ï¼Œå¹¶å¯åœ¨å™ªå£°çš„ç©ºé—´æ•°æ®åº“ä¸­å‘ç°ä»»æ„å½¢çŠ¶çš„<a href=\"https://baike.baidu.com/item/èšç±»/593695?fromModule=lemma_inlink\">èšç±»</a>ã€‚</p>\r\n<p><span class=\"math inline\">\\(\\Epsilon\\)</span>é‚»åŸŸï¼šç»™å®šå¯¹è±¡åŠå¾„<span class=\"math inline\">\\(\\Epsilon\\)</span>å†…çš„åŒºåŸŸç§°ä¸ºè¯¥å¯¹è±¡çš„<span class=\"math inline\">\\(\\Epsilon\\)</span>é‚»åŸŸã€‚</p>\r\n<p>æ ¸å¿ƒå¯¹è±¡ï¼šå¦‚æœç»™å®š<span class=\"math inline\">\\(\\Epsilon\\)</span>é‚»åŸŸå†…çš„æ ·æœ¬ç‚¹æ•°å¤§äºç­‰äº<span class=\"math inline\">\\(Minpoints\\)</span>ï¼Œåˆ™è¯¥å¯¹è±¡ä¸ºæ ¸å¿ƒå¯¹è±¡ã€‚</p>\r\n<p>ç›´æ¥å¯†åº¦å¯è¾¾ï¼šç»™å®šä¸€ä¸ªå¯¹è±¡é›†åˆ<span class=\"math inline\">\\(D\\)</span>ï¼Œå¦‚æœ<span class=\"math inline\">\\(p\\)</span>åœ¨<span class=\"math inline\">\\(q\\)</span>çš„<span class=\"math inline\">\\(\\Epsilon\\)</span>é‚»åŸŸå†…ï¼Œ ä¸”<span class=\"math inline\">\\(q\\)</span>æ˜¯ä¸€ä¸ªæ ¸å¿ƒå¯¹è±¡ï¼Œåˆ™æˆ‘ä»¬è¯´å¯¹è±¡<span class=\"math inline\">\\(p\\)</span>ä»<span class=\"math inline\">\\(q\\)</span>è§¦å‘æ˜¯ç›´æ¥å¯†åº¦å¯è¾¾çš„ï¼ˆdirectly density-reachableï¼‰ã€‚</p>\r\n<p>å¯†åº¦å¯è¾¾ï¼šé›†åˆ<span class=\"math inline\">\\(D\\)</span>ï¼Œå­˜åœ¨ä¸€ä¸ªå¯¹è±¡é“¾ <span class=\"math inline\">\\(p_1,p_2,\\cdots ,pn,p_1=q,p_n=p\\)</span>ï¼Œ<span class=\"math inline\">\\(p_{i+1}\\)</span>æ˜¯ä»<span class=\"math inline\">\\(p_i\\)</span>å…³äºğœ€å’Œ<span class=\"math inline\">\\(Minpoints\\)</span>ç›´æ¥å¯†åº¦å¯è¾¾ï¼Œåˆ™ç§°ç‚¹<span class=\"math inline\">\\(p\\)</span>æ˜¯ä»<span class=\"math inline\">\\(q\\)</span>å…³äº<span class=\"math inline\">\\(\\Epsilon\\)</span>å’Œ<span class=\"math inline\">\\(Minpoints\\)</span>å¯†åº¦å¯è¾¾çš„ã€‚</p>\r\n<p>å¯†åº¦ç›¸è¿ï¼šé›†åˆ<span class=\"math inline\">\\(D\\)</span>å­˜åœ¨ç‚¹<span class=\"math inline\">\\(o\\)</span>ï¼Œä½¿å¾—ç‚¹<span class=\"math inline\">\\(pã€q\\)</span>æ˜¯ä»<span class=\"math inline\">\\(o\\)</span>å…³äº<span class=\"math inline\">\\(\\Epsilon\\)</span>å’Œ <span class=\"math inline\">\\(Minpoints\\)</span>å¯†åº¦å¯è¾¾çš„ï¼Œé‚£ä¹ˆç‚¹<span class=\"math inline\">\\(pã€q\\)</span>æ˜¯å…³äº<span class=\"math inline\">\\(\\Epsilon\\)</span>å’Œ <span class=\"math inline\">\\(Minpoints\\)</span>å¯†åº¦ç›¸è¿çš„ã€‚</p>\r\n<p>ç®—æ³•æµç¨‹ï¼š</p>\r\n<ol type=\"1\">\r\n<li><p>æŒ‡å®šåˆé€‚çš„<span class=\"math inline\">\\(\\Epsilon\\)</span>å’Œ <span class=\"math inline\">\\(Minpoints\\)</span>ã€‚</p></li>\r\n<li><p>è®¡ç®—æ‰€æœ‰çš„æ ·æœ¬ç‚¹ï¼Œå¦‚æœç‚¹<span class=\"math inline\">\\(p\\)</span>çš„<span class=\"math inline\">\\(\\Epsilon\\)</span>é‚»åŸŸé‡Œæœ‰è¶…è¿‡<span class=\"math inline\">\\(Minpoints\\)</span>ä¸ªç‚¹ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªä»¥<span class=\"math inline\">\\(p\\)</span>ä¸ºæ ¸å¿ƒç‚¹çš„æ–°ç°‡ã€‚</p></li>\r\n<li><p>åå¤å¯»æ‰¾è¿™äº›æ ¸å¿ƒç‚¹ç›´æ¥å¯†åº¦å¯è¾¾ï¼ˆä¹‹åå¯èƒ½æ˜¯å¯†åº¦å¯è¾¾ï¼‰ çš„ç‚¹ï¼Œå°†å…¶åŠ å…¥åˆ°ç›¸åº”çš„ç°‡ï¼Œå¯¹äºæ ¸å¿ƒç‚¹å‘ç”Ÿâ€œå¯†åº¦ç›¸è¿â€ çŠ¶å†µçš„ç°‡ï¼Œç»™äºˆåˆå¹¶ã€‚</p></li>\r\n<li><p>æ²¡æœ‰æ–°çš„ç‚¹å¯ä»¥è¢«æ·»åŠ åˆ°ä»»ä½•ç°‡æ—¶ï¼Œç®—æ³•ç»“æŸ</p></li>\r\n</ol>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç -2\">ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sklearn.cluster <span class=\"keyword\">import</span> DBSCAN</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;kmeans.txt&quot;</span>, delimiter=<span class=\"string\">&quot; &quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">result = model.fit_predict(data)</span><br><span class=\"line\">result</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å‡ºå„ä¸ªæ•°æ®ç‚¹ï¼Œç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºåˆ†ç±»</span></span><br><span class=\"line\">mark = [<span class=\"string\">&#x27;or&#x27;</span>, <span class=\"string\">&#x27;ob&#x27;</span>, <span class=\"string\">&#x27;og&#x27;</span>, <span class=\"string\">&#x27;oy&#x27;</span>, <span class=\"string\">&#x27;ok&#x27;</span>, <span class=\"string\">&#x27;om&#x27;</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i,d <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(data):</span><br><span class=\"line\">    plt.plot(d[<span class=\"number\">0</span>], d[<span class=\"number\">1</span>], mark[result[i]])</span><br><span class=\"line\">    </span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607205310944.png\"  style=\"zoom:50%;\" /></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> datasets</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">x1, y1 = datasets.make_circles(n_samples=<span class=\"number\">2000</span>, factor=<span class=\"number\">0.5</span>, noise=<span class=\"number\">0.05</span>)</span><br><span class=\"line\">x2, y2 = datasets.make_blobs(n_samples=<span class=\"number\">1000</span>, centers=[[<span class=\"number\">1.2</span>,<span class=\"number\">1.2</span>]], cluster_std=[[<span class=\"number\">.1</span>]])</span><br><span class=\"line\"></span><br><span class=\"line\">x = np.concatenate((x1, x2))</span><br><span class=\"line\">plt.scatter(x[:, <span class=\"number\">0</span>], x[:, <span class=\"number\">1</span>], marker=<span class=\"string\">&#x27;o&#x27;</span>)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.cluster <span class=\"keyword\">import</span> DBSCAN</span><br><span class=\"line\">y_pred = DBSCAN(eps = <span class=\"number\">0.2</span>, min_samples=<span class=\"number\">50</span>).fit_predict(x)</span><br><span class=\"line\">plt.scatter(x[:, <span class=\"number\">0</span>], x[:, <span class=\"number\">1</span>], c=y_pred)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607205925872.png\"  style=\"zoom:50%;\" /></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607205903894.png\"  style=\"zoom:50%;\" /></p>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Rt411q7WJ?p=71&amp;vd_source=fe8e916be2bd597efffd8dfd95249141\">èšç±»ç®—æ³•</a></p>\r\n",
            "tags": [
                "Python",
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95/",
            "url": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95/",
            "title": "è´å¶æ–¯ç®—æ³•",
            "date_published": "2023-06-07T07:56:38.000Z",
            "content_html": "<h1 id=\"è´å¶æ–¯ç®—æ³•\">è´å¶æ–¯ç®—æ³•</h1>\r\n<ul>\r\n<li>æ€»ä½“ä¿¡æ¯ï¼šå½“å‰æ€»ä½“æ ·æœ¬ç¬¦åˆæŸç§åˆ†å¸ƒã€‚æ¯”å¦‚æŠ›ç¡¬å¸ç¬¦åˆäºŒé¡¹ åˆ†å¸ƒï¼›å­¦ç”Ÿçš„æŸä¸€ç§‘çš„æˆç»©ç¬¦åˆæ­£æ€åˆ†å¸ƒã€‚</li>\r\n<li>æ ·æœ¬ä¿¡æ¯ï¼šé€šè¿‡æŠ½æ ·å¾—åˆ°çš„éƒ¨åˆ†æ ·æœ¬çš„æŸç§åˆ†å¸ƒã€‚</li>\r\n<li>æŠ½æ ·ä¿¡æ¯=æ€»ä½“ä¿¡æ¯+æ ·æœ¬ä¿¡æ¯</li>\r\n<li>å…ˆéªŒä¿¡æ¯ï¼šæŠ½æ ·ä¹‹å‰ï¼Œæœ‰å…³æ¨æ–­é—®é¢˜ä¸­æœªçŸ¥å‚æ•°çš„ä¸€äº›ä¿¡æ¯ï¼Œ é€šå¸¸æ¥è‡ªäºç»éªŒæˆ–å†å²èµ„æ–™ã€‚</li>\r\n</ul>\r\n<p>åŸºäºæŠ½æ ·ä¿¡æ¯è¿›è¡Œç»Ÿè®¡æ¨æ–­çš„ç†è®ºå’Œæ–¹æ³•ç§°ä¸ºç»å…¸ç»Ÿè®¡å­¦ã€‚</p>\r\n<p>åŸºäºæŠ½æ ·ä¿¡æ¯+å…ˆéªŒä¿¡æ¯è¿›è¡Œç»Ÿè®¡æ¨æ–­çš„æ–¹æ³•å’Œç† è®ºï¼Œç§°ä¸ºè´å¶æ–¯ç»Ÿè®¡å­¦ã€‚</p>\r\n<h2 id=\"è´å¶æ–¯å®šç†\"><a href=\"https://baike.baidu.com/item/%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%85%AC%E5%BC%8F/9683982?fr=aladdin\">è´å¶æ–¯å®šç†</a></h2>\r\n<p>å·²çŸ¥<span class=\"math inline\">\\(P(X|H)\\)</span>ï¼Œè¦æ±‚è§£<span class=\"math inline\">\\(P(H|X)\\)</span> <span class=\"math display\">\\[\r\nP(H|X)=\\frac{P(X|H)P(H)}{P(X)}\r\n\\]</span></p>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å¯¼å…¥ç®—æ³•åŒ…ä»¥åŠæ•°æ®é›†</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> datasets</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.model_selection <span class=\"keyword\">import</span> train_test_split</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report,confusion_matrix</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.naive_bayes <span class=\"keyword\">import</span> MultinomialNB,BernoulliNB,GaussianNB</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">iris = datasets.load_iris()</span><br><span class=\"line\">x_train,x_test,y_train,y_test = train_test_split(iris.data, iris.target) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶æ‹Ÿåˆæ¨¡å‹</span></span><br><span class=\"line\">mul_nb = GaussianNB()</span><br><span class=\"line\">mul_nb.fit(x_train,y_train)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¯„ä¼°</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(classification_report(mul_nb.predict(x_test),y_test))</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607165131324.png\"  style=\"zoom: 67%;\" /></p>\r\n<h2 id=\"è¯è¢‹æ¨¡å‹bag-of-words\">è¯è¢‹æ¨¡å‹(Bag of Words)</h2>\r\n<p>Bag of words modelï¼ˆBoWï¼‰æœ€æ—©å‡ºç°åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNatural Language Processingï¼‰å’Œä¿¡æ¯æ£€ç´¢ ï¼ˆInformation Retrievalï¼‰é¢†åŸŸã€‚</p>\r\n<p>è¯¥æ¨¡å‹å¿½ç•¥æ‰æ–‡æœ¬çš„è¯­æ³•å’Œè¯­åºç­‰è¦ç´ ï¼Œå°†å…¶ä»…ä»…çœ‹ä½œæ˜¯è‹¥å¹²ä¸ªè¯æ±‡çš„é›†åˆï¼Œæ–‡æ¡£ä¸­æ¯ä¸ªå•è¯çš„å‡ºç°éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚BoWä½¿ç”¨ä¸€ç»„æ— åºçš„å•è¯(words)æ¥è¡¨è¾¾ä¸€æ®µæ–‡å­—æˆ–ä¸€ä¸ªæ–‡æ¡£ã€‚</p>\r\n<p>ç®€å•ä¾‹å­</p>\r\n<p>é¦–å…ˆç»™å‡ºä¸¤ä¸ªç®€å•çš„æ–‡æœ¬æ–‡æ¡£å¦‚ä¸‹ï¼š</p>\r\n<p>John likes to watch movies. Mary likes too.</p>\r\n<p>John also likes to watch football games.</p>\r\n<p>å¯¹äºä¸Šè¿°ä¸¤ä¸ªæ–‡æ¡£ä¸­å‡ºç°çš„å•è¯ï¼Œæ„å»ºå¦‚ä¸‹ä¸€ä¸ªè¯å…¸ (dictionary)ï¼š</p>\r\n<p>{â€œJohnâ€: 1, â€œlikesâ€: 2,â€œtoâ€: 3, â€œwatchâ€: 4, â€œmoviesâ€: 5,â€œalsoâ€: 6, â€œfootballâ€: 7, â€œgamesâ€: 8,â€œMaryâ€: 9, â€œtooâ€: 10}</p>\r\n<p>ä¸Šé¢çš„è¯å…¸ä¸­åŒ…å«10ä¸ªå•è¯, æ¯ä¸ªå•è¯æœ‰å”¯ä¸€çš„ç´¢å¼•, é‚£ä¹ˆæ¯ä¸ªæ–‡æœ¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª10ç»´çš„å‘é‡æ¥è¡¨ç¤ºã€‚</p>\r\n<p>[1, 2, 1, 1, 1, 0, 0, 0, 1, 1]</p>\r\n<p>[1, 1,1, 1, 0, 1, 1, 1, 0, 0]</p>\r\n<p>è¯¥å‘é‡ä¸åŸæ¥æ–‡æœ¬ä¸­å•è¯å‡ºç°çš„é¡ºåºæ²¡æœ‰å…³ç³»ï¼Œè€Œæ˜¯è¯å…¸ä¸­æ¯ä¸ªå•è¯åœ¨æ–‡æœ¬ä¸­å‡ºç°çš„é¢‘ç‡ã€‚</p>\r\n<h2 id=\"tf-idf\">TF-IDF</h2>\r\n<p>TFï¼ˆTerm Frequencyï¼‰ è¯é¢‘</p>\r\n<p>IDF ï¼ˆInverse Document Frequencyï¼‰é€†æ–‡æ¡£é¢‘ç‡</p>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Rt411q7WJ?p=60\">è´å¶æ–¯ç®—æ³•</a></p>\r\n",
            "tags": [
                "Python",
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/",
            "url": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/",
            "title": "é›†æˆå­¦ä¹ ",
            "date_published": "2023-06-07T01:32:09.000Z",
            "content_html": "<h1 id=\"é›†æˆå­¦ä¹ ensemble-learning\"><a href=\"https://baike.baidu.com/item/%E5%88%86%E7%B1%BB%E5%99%A8%E9%9B%86%E6%88%90/21512231?fromtitle=%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0&amp;fromid=3440721&amp;fr=aladdin\">é›†æˆå­¦ä¹ ï¼ˆEnsemble Learningï¼‰</a></h1>\r\n<p>é›†æˆå­¦ä¹ å°±æ˜¯ç»„åˆå¤šä¸ªå­¦ä¹ å™¨ï¼Œæœ€åå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ›´ å¥½çš„å­¦ä¹ å™¨ã€‚</p>\r\n<p>é›†æˆå­¦ä¹ ç®—æ³•ï¼š</p>\r\n<ol type=\"1\">\r\n<li><p>ä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´ä¸å­˜åœ¨å¼ºä¾èµ–å…³ç³»ï¼Œè£…è¢‹ï¼ˆBaggingï¼‰</p></li>\r\n<li><p>éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰</p></li>\r\n<li><p>ä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´å­˜åœ¨å¼ºä¾èµ–å…³ç³»ï¼Œæå‡ï¼ˆBoostingï¼‰</p></li>\r\n<li><p>Stacking</p></li>\r\n</ol>\r\n<span id=\"more\"></span>\r\n<h2 id=\"bagging\">Bagging</h2>\r\n<p>Baggingä¹Ÿå«åšBootstrap Aggregatingï¼Œæ˜¯åœ¨åŸå§‹ æ•°æ®é›†é€‰æ‹©Sæ¬¡åå¾—åˆ°Sä¸ªæ–°æ•°æ®é›†çš„ä¸€ç§æŠ€æœ¯ã€‚æ˜¯ä¸€ ç§æœ‰æ”¾å›æŠ½æ ·ã€‚</p>\r\n<p>åŸå§‹è®­ç»ƒæ•°æ®é›†<span class=\"math inline\">\\(0,1,2,3,4,5,6,7,8,9\\)</span></p>\r\n<p>Baggingé‡‡æ ·<span class=\"math inline\">\\(1,3,5,2,6,4,2,5,7,0â€”â€”æœªé‡‡æ ·8,9\\)</span></p>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å¯¼å…¥ç®—æ³•åŒ…ä»¥åŠæ•°æ®é›†</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> neighbors</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> datasets</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.ensemble <span class=\"keyword\">import</span> BaggingClassifier</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> tree</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.model_selection <span class=\"keyword\">import</span> train_test_split</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\">åˆ’åˆ†æ•°æ®é›†</span><br><span class=\"line\">iris = datasets.load_iris()</span><br><span class=\"line\">x_data = iris.data[:,:<span class=\"number\">2</span>]</span><br><span class=\"line\">y_data = iris.target</span><br><span class=\"line\"></span><br><span class=\"line\">x_train,x_test,y_train,y_test = train_test_split(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶è®­ç»ƒKNNæ¨¡å‹</span></span><br><span class=\"line\">knn = neighbors.KNeighborsClassifier()</span><br><span class=\"line\">knn.fit(x_train, y_train)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">plot</span>(<span class=\"params\">model</span>):</span><br><span class=\"line\">    <span class=\"comment\"># è·å–æ•°æ®å€¼æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class=\"line\">    x_min, x_max = x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\">    y_min, y_max = x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">    xx, yy = np.meshgrid(np.arange(x_min, x_max, <span class=\"number\">0.02</span>),</span><br><span class=\"line\">                         np.arange(y_min, y_max, <span class=\"number\">0.02</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">    z = model.predict(np.c_[xx.ravel(), yy.ravel()])<span class=\"comment\"># ravelä¸flattenç±»ä¼¼ï¼Œå¤šç»´æ•°æ®è½¬ä¸€ç»´ã€‚flattenä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®ï¼Œravelä¼šæ”¹å˜åŸå§‹æ•°æ®</span></span><br><span class=\"line\">    z = z.reshape(xx.shape)</span><br><span class=\"line\">    <span class=\"comment\"># ç­‰é«˜çº¿å›¾</span></span><br><span class=\"line\">    cs = plt.contourf(xx, yy, z)</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\"># ç”»å›¾</span></span><br><span class=\"line\">plot(knn)</span><br><span class=\"line\"><span class=\"comment\"># æ ·æœ¬æ•£ç‚¹å›¾</span></span><br><span class=\"line\">plt.scatter(x_data[:, <span class=\"number\">0</span>], x_data[:, <span class=\"number\">1</span>], c=y_data)</span><br><span class=\"line\">plt.xlabel(<span class=\"string\">&quot;knn&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\">knn.score(x_test, y_test) <span class=\"comment\"># KNNæ¨¡å‹å‡†ç¡®ç‡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶è®­ç»ƒbagging_knnæ¨¡å‹</span></span><br><span class=\"line\">bagging_knn = BaggingClassifier(knn, n_estimators=<span class=\"number\">100</span>)</span><br><span class=\"line\">bagging_knn.fit(x_train, y_train)</span><br><span class=\"line\">plot(bagging_knn)</span><br><span class=\"line\"><span class=\"comment\"># æ ·æœ¬æ•£ç‚¹å›¾</span></span><br><span class=\"line\">plt.scatter(x_data[:, <span class=\"number\">0</span>], x_data[:, <span class=\"number\">1</span>], c=y_data)</span><br><span class=\"line\">plt.xlabel(<span class=\"string\">&#x27;bagging_knn&#x27;</span>)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\">bagging_knn.score(x_test, y_test) <span class=\"comment\"># bagging_knnæ¨¡å‹å‡†ç¡®ç‡</span></span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607113057905.png\"  style=\"zoom:50%;\" /></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607113349947.png\"  style=\"zoom:50%;\" /></p>\r\n<h2 id=\"éšæœºæ£®æ—random-forest\"><a href=\"https://baike.baidu.com/item/%E9%9A%8F%E6%9C%BA%E6%A3%AE%E6%9E%97/1974765?fr=aladdin\">éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰</a></h2>\r\n<p>ç®—æ³•æµç¨‹ï¼š</p>\r\n<ol type=\"1\">\r\n<li><p>éšæœºé€‰å–æ ·æœ¬ï¼šåœ¨æ ·æœ¬é›†ç”¨<strong>bagging</strong>çš„æ–¹å¼éšæœºé€‰æ‹©nä¸ªæ ·æœ¬ã€‚</p></li>\r\n<li><p>éšæœºé€‰å–ç‰¹å¾ï¼šä»æ‰€æœ‰å±æ€§dä¸­éšæœºé€‰æ‹©kä¸ªå±æ€§ï¼ˆk&lt;dï¼‰ï¼Œç„¶åä»kä¸ªå±æ€§ä¸­é€‰æ‹©æœ€ä½³åˆ†å‰²å±æ€§ä½œä¸ºèŠ‚ç‚¹å»ºç«‹ CARTå†³ç­–æ ‘ã€‚</p></li>\r\n<li><p>é‡å¤ä»¥ä¸Šä¸¤ä¸ªæ­¥éª¤mæ¬¡ï¼Œå»ºç«‹mæ£µCARTå†³ç­–æ ‘ã€‚</p></li>\r\n<li><p>è¿™mæ£µCARTå†³ç­–æ ‘å½¢æˆéšæœºæ£®æ—ï¼Œé€šè¿‡æŠ•ç¥¨è¡¨å†³ç»“ æœï¼Œå†³å®šæ•°æ®å±äºå“ªä¸€ç±»ã€‚</p></li>\r\n</ol>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -1\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> tree</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.model_selection <span class=\"keyword\">import</span> train_test_split</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.ensemble <span class=\"keyword\">import</span> RandomForestClassifier <span class=\"comment\"># é›†æˆå­¦ä¹ ä¸­çš„éšæœºæ£®æ—æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;LR-testSet2.txt&quot;</span>, delimiter=<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">x_data = data[:,:-<span class=\"number\">1</span>]</span><br><span class=\"line\">y_data = data[:,-<span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">plt.scatter(x_data[:,<span class=\"number\">0</span>],x_data[:,<span class=\"number\">1</span>],c=y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ’åˆ†æ•°æ®é›†</span></span><br><span class=\"line\">x_train,x_test,y_train,y_test = train_test_split(x_data, y_data, test_size = <span class=\"number\">0.5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">plot</span>(<span class=\"params\">model</span>):</span><br><span class=\"line\">    <span class=\"comment\"># è·å–æ•°æ®å€¼æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class=\"line\">    x_min, x_max = x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\">    y_min, y_max = x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">    xx, yy = np.meshgrid(np.arange(x_min, x_max, <span class=\"number\">0.02</span>),</span><br><span class=\"line\">                         np.arange(y_min, y_max, <span class=\"number\">0.02</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">    z = model.predict(np.c_[xx.ravel(), yy.ravel()])<span class=\"comment\"># ravelä¸flattenç±»ä¼¼ï¼Œå¤šç»´æ•°æ®è½¬ä¸€ç»´ã€‚flattenä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®ï¼Œravelä¼šæ”¹å˜åŸå§‹æ•°æ®</span></span><br><span class=\"line\">    z = z.reshape(xx.shape)</span><br><span class=\"line\">    <span class=\"comment\"># ç­‰é«˜çº¿å›¾</span></span><br><span class=\"line\">    cs = plt.contourf(xx, yy, z)</span><br><span class=\"line\">    <span class=\"comment\"># æ ·æœ¬æ•£ç‚¹å›¾</span></span><br><span class=\"line\">    plt.scatter(x_test[:, <span class=\"number\">0</span>], x_test[:, <span class=\"number\">1</span>], c=y_test)</span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶è®­ç»ƒéšæœºæ£®æ—æ¨¡å‹</span></span><br><span class=\"line\">RF = RandomForestClassifier(n_estimators=<span class=\"number\">50</span>)</span><br><span class=\"line\">RF.fit(x_train, y_train)</span><br><span class=\"line\">plot(RF)</span><br><span class=\"line\">RF.score(x_test, y_test)</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607114037530.png\"  style=\"zoom:50%;\" /></p>\r\n<h2 id=\"boosting\"><a href=\"https://baike.baidu.com/item/Boosting/1403912?fr=aladdin\">Boosting</a></h2>\r\n<p>AdaBoost ï¼ˆAdaptive Boostingï¼‰ç®—æ³•ï¼Œå®ƒçš„è‡ªé€‚åº”åœ¨äºï¼Œå‰ä¸€ä¸ªåŸºæœ¬åˆ†ç±»å™¨è¢«é”™è¯¯åˆ†ç±»çš„æ ·æœ¬çš„æƒå€¼ä¼šå¢å¤§ï¼Œè€Œæ­£ç¡®åˆ†ç±»çš„æ ·æœ¬çš„æƒå€¼ä¼šå‡å°ï¼Œå¹¶å†æ¬¡ç”¨æ¥è®­ç»ƒä¸‹ä¸€ä¸ªåŸºæœ¬åˆ†ç±»å™¨ã€‚åŒæ—¶ï¼Œåœ¨æ¯ä¸€è½®è¿­ä»£ä¸­ï¼ŒåŠ å…¥ä¸€ä¸ªæ–°çš„å¼±åˆ†ç±»å™¨ï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªé¢„å®šçš„è¶³å¤Ÿå°çš„é”™è¯¯ç‡æˆ–è¾¾åˆ°é¢„å…ˆæŒ‡å®šçš„æœ€å¤§è¿­ä»£æ¬¡æ•°æ‰ç¡®å®šæœ€ç»ˆçš„å¼ºåˆ†ç±»å™¨ã€‚</p>\r\n<p>ç®—æ³•æµç¨‹ï¼š</p>\r\n<ol type=\"1\">\r\n<li><p>åˆå§‹åŒ–è®­ç»ƒæ•°æ®çš„æƒå€¼åˆ†å¸ƒ<span class=\"math inline\">\\(D1\\)</span>ã€‚å‡è®¾æœ‰<span class=\"math inline\">\\(N\\)</span>ä¸ªè®­ç»ƒæ ·æœ¬æ•°æ®ï¼Œåˆ™æ¯ä¸€ä¸ªè®­ç»ƒæ ·æœ¬æœ€å¼€å§‹æ—¶ï¼Œéƒ½è¢«èµ‹äºˆ ç›¸åŒçš„æƒå€¼<span class=\"math inline\">\\(w~1~=1/N\\)</span>ã€‚</p></li>\r\n<li><p>è®­ç»ƒå¼±åˆ†ç±»å™¨<span class=\"math inline\">\\(h_i\\)</span>ã€‚</p>\r\n<ul>\r\n<li><p>å¦‚æœæŸä¸ªè®­ç»ƒæ ·æœ¬ç‚¹ï¼Œè¢«å¼±åˆ†ç±»å™¨<span class=\"math inline\">\\(h_i\\)</span>å‡†ç¡®åœ°åˆ†ç±»ï¼Œé‚£ä¹ˆåœ¨æ„é€ ä¸‹ä¸€ä¸ªè®­ç»ƒé›†ä¸­ï¼Œå®ƒå¯¹åº”çš„æƒå€¼è¦å‡å°ï¼›</p></li>\r\n<li><p>å¦‚æœæŸä¸ªè®­ç»ƒæ ·æœ¬ç‚¹ï¼Œè¢«å¼±åˆ†ç±»å™¨<span class=\"math inline\">\\(h_i\\)</span>é”™è¯¯åˆ†ç±»ï¼Œé‚£ä¹ˆå®ƒçš„æƒå€¼å°±åº”è¯¥å¢å¤§ã€‚æƒå€¼æ›´æ–°è¿‡çš„æ ·æœ¬é›†è¢«ç”¨äºè®­ç»ƒä¸‹ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œæ•´ä¸ªè®­ç»ƒè¿‡ç¨‹å¦‚æ­¤è¿­ä»£åœ°è¿›è¡Œä¸‹å»ã€‚</p></li>\r\n</ul></li>\r\n<li><p>å°†å„ä¸ªè®­ç»ƒå¾—åˆ°çš„å¼±åˆ†ç±»å™¨ç»„åˆæˆä¸€ä¸ªå¼ºåˆ†ç±»å™¨ã€‚å„ä¸ªå¼±åˆ†ç±»å™¨çš„è®­ç»ƒè¿‡ç¨‹ç»“æŸåï¼Œ</p>\r\n<ul>\r\n<li>åŠ å¤§åˆ†ç±»è¯¯å·®ç‡å°çš„å¼±åˆ†ç±»å™¨çš„æƒé‡ï¼Œä½¿å…¶åœ¨æœ€ç»ˆçš„åˆ†ç±»å‡½æ•°ä¸­èµ·ç€è¾ƒå¤§çš„å†³å®šä½œç”¨ï¼Œ</li>\r\n<li>é™ä½åˆ†ç±»è¯¯å·®ç‡å¤§çš„å¼±åˆ†ç±»å™¨çš„æƒé‡ï¼Œä½¿å…¶åœ¨æœ€ç»ˆçš„åˆ†ç±»å‡½æ•°ä¸­èµ·ç€è¾ƒå°çš„å†³å®šä½œç”¨ã€‚</li>\r\n</ul></li>\r\n</ol>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -2\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> tree</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.ensemble <span class=\"keyword\">import</span> AdaBoostClassifier</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.tree <span class=\"keyword\">import</span> DecisionTreeClassifier</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.datasets <span class=\"keyword\">import</span> make_gaussian_quantiles</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆ2ç»´æ­£æ€åˆ†å¸ƒï¼Œç”Ÿæˆçš„æ•°æ®æŒ‰åˆ†ä½æ•°åˆ†ä¸ºä¸¤ç±»ï¼Œ500ä¸ªæ ·æœ¬,2ä¸ªæ ·æœ¬ç‰¹å¾</span></span><br><span class=\"line\">x1, y1 = make_gaussian_quantiles(n_samples=<span class=\"number\">500</span>, n_features=<span class=\"number\">2</span>,n_classes=<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆ2ç»´æ­£æ€åˆ†å¸ƒï¼Œç”Ÿæˆçš„æ•°æ®æŒ‰åˆ†ä½æ•°åˆ†ä¸ºä¸¤ç±»ï¼Œ400ä¸ªæ ·æœ¬,2ä¸ªæ ·æœ¬ç‰¹å¾å‡å€¼éƒ½ä¸º3</span></span><br><span class=\"line\">x2, y2 = make_gaussian_quantiles(mean=(<span class=\"number\">3</span>, <span class=\"number\">3</span>), n_samples=<span class=\"number\">500</span>, n_features=<span class=\"number\">2</span>, n_classes=<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"comment\"># å°†ä¸¤ç»„æ•°æ®åˆæˆä¸€ç»„æ•°æ®</span></span><br><span class=\"line\">x_data = np.concatenate((x1, x2))</span><br><span class=\"line\">y_data = np.concatenate((y1, - y2 + <span class=\"number\">1</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">plt.scatter(x_data[:, <span class=\"number\">0</span>], x_data[:, <span class=\"number\">1</span>], c=y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># AdaBoostæ¨¡å‹</span></span><br><span class=\"line\">model = AdaBoostClassifier(DecisionTreeClassifier(max_depth=<span class=\"number\">3</span>),n_estimators=<span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"comment\"># è®­ç»ƒæ¨¡å‹</span></span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è·å–æ•°æ®å€¼æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class=\"line\">x_min, x_max = x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\">y_min, y_max = x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">xx, yy = np.meshgrid(np.arange(x_min, x_max, <span class=\"number\">0.02</span>),</span><br><span class=\"line\">                     np.arange(y_min, y_max, <span class=\"number\">0.02</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è·å–é¢„æµ‹å€¼</span></span><br><span class=\"line\">z = model.predict(np.c_[xx.ravel(), yy.ravel()])</span><br><span class=\"line\">z = z.reshape(xx.shape)</span><br><span class=\"line\"><span class=\"comment\"># ç­‰é«˜çº¿å›¾</span></span><br><span class=\"line\">cs = plt.contourf(xx, yy, z)</span><br><span class=\"line\"><span class=\"comment\"># æ ·æœ¬æ•£ç‚¹å›¾</span></span><br><span class=\"line\">plt.scatter(x_data[:, <span class=\"number\">0</span>], x_data[:, <span class=\"number\">1</span>], c=y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ¨¡å‹å‡†ç¡®ç‡</span></span><br><span class=\"line\">model.score(x_data,y_data)</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607153300730.png\"  style=\"zoom:50%;\" /></p>\r\n<h2 id=\"stacking\">Stacking</h2>\r\n<p>ä½¿ç”¨å¤šä¸ªä¸åŒçš„åˆ†ç±»å™¨å¯¹è®­ç»ƒé›†è¿›é¢„æµ‹ï¼ŒæŠŠé¢„æµ‹ å¾—åˆ°çš„ç»“æœä½œä¸ºä¸€ä¸ªæ¬¡çº§åˆ†ç±»å™¨çš„è¾“å…¥ã€‚æ¬¡çº§åˆ† ç±»å™¨çš„è¾“å‡ºæ˜¯æ•´ä¸ªæ¨¡å‹çš„é¢„æµ‹ç»“æœã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607153502918.png\"  style=\"zoom:67%;\" /></p>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -3\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> datasets  </span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> model_selection  </span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.linear_model <span class=\"keyword\">import</span> LogisticRegression</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.neighbors <span class=\"keyword\">import</span> KNeighborsClassifier  </span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.tree <span class=\"keyword\">import</span> DecisionTreeClassifier</span><br><span class=\"line\"><span class=\"keyword\">from</span> mlxtend.classifier <span class=\"keyword\">import</span> StackingClassifier</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®é›†</span></span><br><span class=\"line\">iris = datasets.load_iris()  </span><br><span class=\"line\"><span class=\"comment\"># åªè¦ç¬¬1,2åˆ—çš„ç‰¹å¾</span></span><br><span class=\"line\">x_data, y_data = iris.data[:, <span class=\"number\">1</span>:<span class=\"number\">3</span>], iris.target  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å®šä¹‰ä¸‰ä¸ªä¸åŒçš„åˆ†ç±»å™¨</span></span><br><span class=\"line\">clf1 = KNeighborsClassifier(n_neighbors=<span class=\"number\">1</span>)  </span><br><span class=\"line\">clf2 = DecisionTreeClassifier() </span><br><span class=\"line\">clf3 = LogisticRegression()  </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># å®šä¹‰ä¸€ä¸ªæ¬¡çº§åˆ†ç±»å™¨</span></span><br><span class=\"line\">lr = LogisticRegression()  </span><br><span class=\"line\">sclf = StackingClassifier(classifiers=[clf1, clf2, clf3],   </span><br><span class=\"line\">                          meta_classifier=lr)</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">for</span> clf,label <span class=\"keyword\">in</span> <span class=\"built_in\">zip</span>([clf1, clf2, clf3, sclf],</span><br><span class=\"line\">                      [<span class=\"string\">&#x27;KNN&#x27;</span>,<span class=\"string\">&#x27;Decision Tree&#x27;</span>,<span class=\"string\">&#x27;LogisticRegression&#x27;</span>,<span class=\"string\">&#x27;StackingClassifier&#x27;</span>]):  </span><br><span class=\"line\">    scores = model_selection.cross_val_score(clf, x_data, y_data, cv=<span class=\"number\">3</span>, scoring=<span class=\"string\">&#x27;accuracy&#x27;</span>)  </span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Accuracy: %0.2f [%s]&quot;</span> % (scores.mean(), label)) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å¯è§†åŒ–   </span></span><br><span class=\"line\">sclf.fit(x_train,y_train)</span><br><span class=\"line\">plot(sclf)</span><br><span class=\"line\">plt.scatter(x_data[:,<span class=\"number\">0</span>],x_data[:,<span class=\"number\">1</span>],c=y_data)    </span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607155449811.png\"  style=\"zoom:50%;\" /></p>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Rt411q7WJ/?p=55&amp;spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=fe8e916be2bd597efffd8dfd95249141\">é›†æˆå­¦ä¹ </a></p>\r\n",
            "tags": [
                "Python",
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%86%B3%E7%AD%96%E6%A0%91/",
            "url": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%86%B3%E7%AD%96%E6%A0%91/",
            "title": "å†³ç­–æ ‘",
            "date_published": "2023-06-06T12:25:49.000Z",
            "content_html": "<h1 id=\"å†³ç­–æ ‘-decision-tree\"><a href=\"https://baike.baidu.com/item/%E5%86%B3%E7%AD%96%E6%A0%91/10377049?fr=aladdin\">å†³ç­–æ ‘ ï¼ˆDecision Treeï¼‰</a></h1>\r\n<p>æ¯”è¾ƒé€‚åˆåˆ†æç¦»æ•£æ•°æ®ã€‚ å¦‚æœæ˜¯è¿ç»­æ•°æ®è¦å…ˆè½¬æˆç¦»æ•£æ•°æ®å†åšåˆ†æ</p>\r\n<h2 id=\"ç†µentropy\">ç†µï¼ˆentropyï¼‰</h2>\r\n<p>1948å¹´ï¼Œé¦™æµ“æå‡ºäº†â€œ<a href=\"https://baike.baidu.com/item/%E4%BF%A1%E6%81%AF%E7%86%B5/7302318?fr=aladdin\">ä¿¡æ¯ç†µ</a>â€çš„æ¦‚å¿µï¼Œ</p>\r\n<p><strong>ä¸€æ¡ä¿¡æ¯çš„ä¿¡æ¯é‡å¤§å°å’Œå®ƒçš„ä¸ç¡®å®šæ€§æœ‰ç›´æ¥çš„å…³ç³»ï¼Œ è¦ææ¸…æ¥šä¸€ä»¶éå¸¸éå¸¸ä¸ç¡®å®šçš„äº‹æƒ…ï¼Œæˆ–è€…æ˜¯ä¸€æ— æ‰€çŸ¥çš„äº‹æƒ…ï¼Œéœ€è¦äº†è§£å¤§é‡ä¿¡æ¯ã€‚â€”&gt;ä¿¡æ¯é‡çš„åº¦é‡å°±ç­‰äºä¸ç¡®å®šæ€§çš„å¤šå°‘ã€‚</strong></p>\r\n<span id=\"more\"></span>\r\n<p>ä¿¡æ¯ç†µå…¬å¼ï¼š <span class=\"math display\">\\[\r\nH[x]=-\\sum_{x}p(x)logp(x)\r\n\\]</span></p>\r\n<h2 id=\"id3ç®—æ³•\"><a href=\"https://baike.baidu.com/item/ID3%E7%AE%97%E6%B3%95/5522381?fr=aladdin\">ID3ç®—æ³•</a></h2>\r\n<p>å†³ç­–æ ‘ä¼šé€‰æ‹©æœ€å¤§åŒ–ä¿¡æ¯å¢ç›Šæ¥å¯¹ç»“ç‚¹è¿›è¡Œåˆ’åˆ†ã€‚</p>\r\n<p>ä¿¡æ¯å¢ç›Šï¼ˆInformation Gainï¼‰è®¡ç®—ï¼š <span class=\"math display\">\\[\r\nInfo(D)=-\\sum_{i=1}^{m}p_ilog(p_i)\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nInfo_A(D)=-\\sum_{j=1}^{v}\\frac{|D_j|}{|D|}\\times Info(D_j)\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nGain(A)=Info(D)-Info_A(D)\r\n\\]</span></p>\r\n<table>\r\n<thead>\r\n<tr class=\"header\">\r\n<th>RID</th>\r\n<th>age</th>\r\n<th>income</th>\r\n<th>student</th>\r\n<th>credit_rating</th>\r\n<th>class_buys_computer</th>\r\n</tr>\r\n</thead>\r\n<tbody>\r\n<tr class=\"odd\">\r\n<td>1</td>\r\n<td>youth</td>\r\n<td>high</td>\r\n<td>no</td>\r\n<td>fair</td>\r\n<td>no</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td>2</td>\r\n<td>youth</td>\r\n<td>high</td>\r\n<td>no</td>\r\n<td>excellent</td>\r\n<td>no</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td>3</td>\r\n<td>middle_aged</td>\r\n<td>high</td>\r\n<td>no</td>\r\n<td>fair</td>\r\n<td>yes</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td>4</td>\r\n<td>senior</td>\r\n<td>medium</td>\r\n<td>no</td>\r\n<td>fair</td>\r\n<td>yes</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td>5</td>\r\n<td>senior</td>\r\n<td>low</td>\r\n<td>yes</td>\r\n<td>fair</td>\r\n<td>yes</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td>6</td>\r\n<td>senior</td>\r\n<td>low</td>\r\n<td>yes</td>\r\n<td>excellent</td>\r\n<td>no</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td>7</td>\r\n<td>middle_aged</td>\r\n<td>low</td>\r\n<td>yes</td>\r\n<td>excellent</td>\r\n<td>yes</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td>8</td>\r\n<td>youth</td>\r\n<td>medium</td>\r\n<td>no</td>\r\n<td>fair</td>\r\n<td>no</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td>9</td>\r\n<td>youth</td>\r\n<td>low</td>\r\n<td>yes</td>\r\n<td>fair</td>\r\n<td>yes</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td>10</td>\r\n<td>senior</td>\r\n<td>medium</td>\r\n<td>yes</td>\r\n<td>fair</td>\r\n<td>yes</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td>11</td>\r\n<td>youth</td>\r\n<td>medium</td>\r\n<td>yes</td>\r\n<td>excellent</td>\r\n<td>yes</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td>12</td>\r\n<td>middle_aged</td>\r\n<td>medium</td>\r\n<td>no</td>\r\n<td>excellent</td>\r\n<td>yes</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td>13</td>\r\n<td>middle_aged</td>\r\n<td>high</td>\r\n<td>yes</td>\r\n<td>fair</td>\r\n<td>yes</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td>14</td>\r\n<td>senior</td>\r\n<td>medium</td>\r\n<td>no</td>\r\n<td>excellent</td>\r\n<td>no</td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n<p>è®¡ç®—<strong>age</strong>çš„ä¿¡æ¯å¢ç›Š: <span class=\"math display\">\\[\r\nInfo(D)=-\\frac{9}{14}log_2(\\frac{9}{14})-\\frac{5}{14}log_2(\\frac{5}{14})=0.94\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nInfo_{age}(D)=\\frac{5}{14}(-\\frac{2}{5}log_2\\frac{2}{5}-\\frac{3}{5}log_2\\frac{3}{5})+\r\n\\frac{4}{14}(-\\frac{4}{4}log_2\\frac{4}{4}-\\frac{0}{4}log_2\\frac{0}{4})+\r\n\\frac{5}{14}(-\\frac{3}{5}log_2\\frac{3}{5}-\\frac{2}{5}log_2\\frac{2}{5})\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nGain(age)=Info(D)-Info_A(D)=0.94-0.694=0.246\r\n\\]</span></p>\r\n<p>å…¶ä»–çš„ä¹Ÿæ˜¯ç±»ä¼¼è®¡ç®—ã€‚</p>\r\n<h2 id=\"c4.5ç®—æ³•\"><a href=\"https://baike.baidu.com/item/C4.5%E7%AE%97%E6%B3%95/20814636\">C4.5ç®—æ³•</a></h2>\r\n<p>ä¿¡æ¯å¢ç›Šçš„æ–¹æ³•å€¾å‘äºé¦–å…ˆé€‰æ‹©å› å­æ•°è¾ƒå¤šçš„å˜é‡ ã€‚</p>\r\n<p>ä¿¡æ¯å¢ç›Šçš„æ”¹è¿›ï¼šå¢ç›Šç‡ <span class=\"math display\">\\[\r\nSplitInfo_A(D)=-\\sum_{j=1}^{v}\\frac{|D_j|}{|D|}\\times log_2(\\frac{|D_j|}{|D|})\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nGainRatio(A)=\\frac{Gain(A)}{SpliInfo_A(D)}\r\n\\]</span></p>\r\n<h2 id=\"cartç®—æ³•\"><a href=\"https://baike.baidu.com/item/CART/17679070\">CARTç®—æ³•</a></h2>\r\n<p>CARTå†³ç­–æ ‘çš„ç”Ÿæˆå°±æ˜¯é€’å½’åœ°æ„å»ºäºŒå‰å†³ç­–æ ‘çš„è¿‡ç¨‹ã€‚</p>\r\n<p>CARTç”¨åŸºå°¼ï¼ˆGiniï¼‰ç³»æ•°æœ€å°åŒ–å‡†åˆ™æ¥è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œç”ŸæˆäºŒå‰æ ‘ã€‚</p>\r\n<p>Giniç³»æ•°è®¡ç®—ï¼š <span class=\"math display\">\\[\r\nGini(D)=1-\\sum_{i=1}^{m}p_i^2\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nGini_A(D)=\\frac{|D_1|}{|D|}Gini(D_1)+\\frac{|D_2|}{|D|}Gini(D_2)\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n\\Delta Gini(A)=Gini(D)-Gini_A(D)\r\n\\]</span></p>\r\n<p>ä¼˜ç‚¹ï¼šå°è§„æ¨¡æ•°æ®é›†æœ‰æ•ˆ</p>\r\n<p>ç¼ºç‚¹ï¼š å¤„ç†è¿ç»­å˜é‡ä¸å¥½ ç±»åˆ«è¾ƒå¤šæ—¶ï¼Œé”™è¯¯å¢åŠ çš„æ¯”è¾ƒå¿« ä¸èƒ½å¤„ç†å¤§é‡æ•°æ®</p>\r\n<h2 id=\"çº¿æ€§äºŒåˆ†ç±»ç¤ºä¾‹ä»£ç \">çº¿æ€§äºŒåˆ†ç±»ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> tree <span class=\"comment\"># å†³ç­–æ ‘æ¨¡å—</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;LR-testSet.csv&quot;</span>, delimiter=<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">x_data = data[:,:-<span class=\"number\">1</span>]</span><br><span class=\"line\">y_data = data[:,-<span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">plt.scatter(x_data[:,<span class=\"number\">0</span>],x_data[:,<span class=\"number\">1</span>],c=y_data) </span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå†³ç­–æ ‘æ¨¡å‹</span></span><br><span class=\"line\">model = tree.DecisionTreeClassifier()</span><br><span class=\"line\"><span class=\"comment\"># è¾“å…¥æ•°æ®å»ºç«‹æ¨¡å‹</span></span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è·å–æ•°æ®å€¼æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class=\"line\">x_min, x_max = x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\">y_min, y_max = x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">xx, yy = np.meshgrid(np.arange(x_min, x_max, <span class=\"number\">0.02</span>),</span><br><span class=\"line\">                     np.arange(y_min, y_max, <span class=\"number\">0.02</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">z = model.predict(np.c_[xx.ravel(), yy.ravel()])<span class=\"comment\"># ravelä¸flattenç±»ä¼¼ï¼Œå¤šç»´æ•°æ®è½¬ä¸€ç»´ã€‚flattenä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®ï¼Œravelä¼šæ”¹å˜åŸå§‹æ•°æ®</span></span><br><span class=\"line\">z = z.reshape(xx.shape)</span><br><span class=\"line\"><span class=\"comment\"># ç­‰é«˜çº¿å›¾</span></span><br><span class=\"line\">cs = plt.contourf(xx, yy, z)</span><br><span class=\"line\"><span class=\"comment\"># æ ·æœ¬æ•£ç‚¹å›¾</span></span><br><span class=\"line\">plt.scatter(x_data[:, <span class=\"number\">0</span>], x_data[:, <span class=\"number\">1</span>], c=y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•ä¸è¯„ä¼°</span></span><br><span class=\"line\">predictions = model.predict(x_data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(classification_report(predictions,y_data))</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607084609741.png\"  style=\"zoom:50%;\" /></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230606214438933.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"éçº¿æ€§äºŒåˆ†ç±»ç¤ºä¾‹ä»£ç \">éçº¿æ€§äºŒåˆ†ç±»ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> tree</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.model_selection <span class=\"keyword\">import</span> train_test_split</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;LR-testSet2.txt&quot;</span>, delimiter=<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">x_data = data[:,:-<span class=\"number\">1</span>]</span><br><span class=\"line\">y_data = data[:,-<span class=\"number\">1</span>]</span><br><span class=\"line\">    </span><br><span class=\"line\">plt.scatter(x_data[:,<span class=\"number\">0</span>],x_data[:,<span class=\"number\">1</span>],c=y_data) <span class=\"comment\"># sæ•£ç‚¹å›¾</span></span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#åˆ†å‰²æ•°æ®</span></span><br><span class=\"line\">x_train,x_test,y_train,y_test = train_test_split(x_data, y_data) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå†³ç­–æ ‘æ¨¡å‹</span></span><br><span class=\"line\"><span class=\"comment\"># max_depthï¼Œæ ‘çš„æ·±åº¦</span></span><br><span class=\"line\"><span class=\"comment\"># min_samples_split å†…éƒ¨èŠ‚ç‚¹å†åˆ’åˆ†æ‰€éœ€æœ€å°æ ·æœ¬æ•°</span></span><br><span class=\"line\">model = tree.DecisionTreeClassifier(max_depth=<span class=\"number\">7</span>,min_samples_split=<span class=\"number\">4</span>)</span><br><span class=\"line\"><span class=\"comment\"># æ‹Ÿåˆæ¨¡å‹</span></span><br><span class=\"line\">model.fit(x_train, y_train)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è·å–æ•°æ®å€¼æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class=\"line\">x_min, x_max = x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\">y_min, y_max = x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">xx, yy = np.meshgrid(np.arange(x_min, x_max, <span class=\"number\">0.02</span>),</span><br><span class=\"line\">                     np.arange(y_min, y_max, <span class=\"number\">0.02</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">z = model.predict(np.c_[xx.ravel(), yy.ravel()])<span class=\"comment\"># ravelä¸flattenç±»ä¼¼ï¼Œå¤šç»´æ•°æ®è½¬ä¸€ç»´ã€‚flattenä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®ï¼Œravelä¼šæ”¹å˜åŸå§‹æ•°æ®</span></span><br><span class=\"line\">z = z.reshape(xx.shape)</span><br><span class=\"line\"><span class=\"comment\"># ç­‰é«˜çº¿å›¾</span></span><br><span class=\"line\">cs = plt.contourf(xx, yy, z)</span><br><span class=\"line\"><span class=\"comment\"># æ ·æœ¬æ•£ç‚¹å›¾</span></span><br><span class=\"line\">plt.scatter(x_data[:, <span class=\"number\">0</span>], x_data[:, <span class=\"number\">1</span>], c=y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•å¹¶è¯„ä¼°</span></span><br><span class=\"line\">predictions = model.predict(x_test)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(classification_report(predictions,y_test))</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607084429752.png\"  style=\"zoom: 50%;\" /></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607084526669.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"å›å½’æ ‘ç¤ºä¾‹ä»£ç \">å›å½’æ ‘ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> tree</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;data.csv&quot;</span>, delimiter=<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">x_data = data[:,<span class=\"number\">0</span>,np.newaxis]</span><br><span class=\"line\">y_data = data[:,<span class=\"number\">1</span>,np.newaxis]</span><br><span class=\"line\">plt.scatter(x_data,y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\">model = tree.DecisionTreeRegressor(max_depth=<span class=\"number\">5</span>)</span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\">x_test = np.linspace(<span class=\"number\">20</span>,<span class=\"number\">80</span>,<span class=\"number\">100</span>)</span><br><span class=\"line\">x_test = x_test[:,np.newaxis]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å›¾</span></span><br><span class=\"line\">plt.plot(x_data, y_data, <span class=\"string\">&#x27;b&#x27;</span>)</span><br><span class=\"line\">plt.plot(x_test, model.predict(x_test), <span class=\"string\">&#x27;r&#x27;</span>) </span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230607090010220.png\"  style=\"zoom:50%;\" /></p>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Rt411q7WJ?p=50&amp;vd_source=fe8e916be2bd597efffd8dfd95249141\">å†³ç­–æ ‘</a></p>\r\n",
            "tags": [
                "Python",
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/KNN%E7%AE%97%E6%B3%95/",
            "url": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/KNN%E7%AE%97%E6%B3%95/",
            "title": "KNNç®—æ³•",
            "date_published": "2023-06-06T12:05:23.000Z",
            "content_html": "<h1 id=\"kæœ€è¿‘é‚»k-nearest-neighborknnåˆ†ç±»ç®—æ³•\"><a href=\"https://baike.baidu.com/item/k%E8%BF%91%E9%82%BB%E7%AE%97%E6%B3%95/9512781?fr=aladdin\">Kæœ€è¿‘é‚»ï¼ˆK-Nearest Neighborï¼ŒKNNï¼‰</a>åˆ†ç±»ç®—æ³•</h1>\r\n<ol type=\"1\">\r\n<li>ä¸ºäº†åˆ¤æ–­æœªçŸ¥å®ä¾‹çš„ç±»åˆ«ï¼Œä»¥æ‰€æœ‰å·²çŸ¥ç±»åˆ«çš„å®ä¾‹ä½œä¸º å‚ç…§é€‰æ‹©å‚æ•°K</li>\r\n<li>è®¡ç®—æœªçŸ¥å®ä¾‹ä¸æ‰€æœ‰å·²çŸ¥å®ä¾‹çš„è·ç¦»</li>\r\n<li>é€‰æ‹©æœ€è¿‘Kä¸ªå·²çŸ¥å®ä¾‹</li>\r\n<li>æ ¹æ®å°‘æ•°æœä»å¤šæ•°çš„æŠ•ç¥¨æ³•åˆ™(majority-voting)ï¼Œè®© æœªçŸ¥å®ä¾‹å½’ç±»ä¸ºKä¸ªæœ€é‚»è¿‘æ ·æœ¬ä¸­æœ€å¤šæ•°çš„ç±»åˆ«</li>\r\n</ol>\r\n<span id=\"more\"></span>\r\n<p>æ¬§æ°è·ç¦» <span class=\"math display\">\\[\r\nE(x,y)=\\sqrt{\\sum_{i=0}^{n}(x_i-y_i)^2}\r\n\\]</span> <a href=\"https://www.cnblogs.com/belfuture/p/5871452.html\">å…¶ä»–çš„è·ç¦»è¡¡é‡</a>ï¼šä½™å¼¦å€¼è·ç¦»ï¼ˆcosï¼‰ï¼Œç›¸å…³åº¦ï¼ˆcorrelationï¼‰ï¼Œæ›¼å“ˆé¡¿è·ç¦»ï¼ˆManhattan distanceï¼‰</p>\r\n<p>ç®—æ³•ç¼ºç‚¹ï¼š</p>\r\n<ul>\r\n<li>ç®—æ³•å¤æ‚åº¦è¾ƒé«˜ï¼ˆéœ€è¦æ¯”è¾ƒæ‰€æœ‰å·²çŸ¥å®ä¾‹ä¸è¦åˆ†ç±»çš„å®ä¾‹ï¼‰</li>\r\n<li>å½“å…¶æ ·æœ¬åˆ†å¸ƒä¸å¹³è¡¡æ—¶ï¼Œæ¯”å¦‚å…¶ä¸­ä¸€ç±»æ ·æœ¬è¿‡å¤§ï¼ˆå®ä¾‹æ•°é‡è¿‡å¤šï¼‰å ä¸»å¯¼çš„æ—¶å€™ï¼Œæ–°çš„æœªçŸ¥å®ä¾‹å®¹æ˜“è¢«å½’ç±»ä¸ºè¿™ä¸ªä¸»å¯¼æ ·æœ¬ï¼Œå› ä¸ºè¿™ç±»æ ·æœ¬å®ä¾‹çš„æ•°é‡è¿‡å¤§ï¼Œä½†è¿™ä¸ªæ–°çš„æœªçŸ¥å®ä¾‹å®é™…å¹¶æ²¡æœ‰æ¥è¿‘ç›®æ ‡æ ·æœ¬</li>\r\n</ul>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å¯¼å…¥ç®—æ³•åŒ…ä»¥åŠæ•°æ®é›†</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> neighbors</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> datasets</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.model_selection <span class=\"keyword\">import</span> train_test_split</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">iris = datasets.load_iris()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(iris)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ‰“ä¹±æ•°æ®åˆ‡åˆ†æ•°æ®é›†</span></span><br><span class=\"line\"><span class=\"comment\"># x_train,x_test,y_train,y_test = train_test_split(iris.data, iris.target, test_size=0.2) #åˆ†å‰²æ•°æ®0.2ä¸ºæµ‹è¯•æ•°æ®ï¼Œ0.8ä¸ºè®­ç»ƒæ•°æ®</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#æ‰“ä¹±æ•°æ®</span></span><br><span class=\"line\">data_size = iris.data.shape[<span class=\"number\">0</span>]</span><br><span class=\"line\">index = [i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(data_size)] </span><br><span class=\"line\">random.shuffle(index)  </span><br><span class=\"line\">iris.data = iris.data[index]</span><br><span class=\"line\">iris.target = iris.target[index]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#åˆ‡åˆ†æ•°æ®é›†</span></span><br><span class=\"line\">test_size = <span class=\"number\">40</span></span><br><span class=\"line\">x_train = iris.data[test_size:]</span><br><span class=\"line\">x_test =  iris.data[:test_size]</span><br><span class=\"line\">y_train = iris.target[test_size:]</span><br><span class=\"line\">y_test = iris.target[:test_size]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ„å»ºæ¨¡å‹</span></span><br><span class=\"line\">model = neighbors.KNeighborsClassifier(n_neighbors=<span class=\"number\">3</span>)</span><br><span class=\"line\">model.fit(x_train, y_train)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•å’Œè¯„ä¼°</span></span><br><span class=\"line\">prediction = model.predict(x_test)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(classification_report(y_test, prediction))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230606202144425.png\"  style=\"zoom: 67%;\" /></p>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Rt411q7WJ?p=41&amp;vd_source=fe8e916be2bd597efffd8dfd95249141\">KNNç®—æ³•</a></p>\r\n",
            "tags": [
                "Python",
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/",
            "url": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/",
            "title": "é€»è¾‘å›å½’",
            "date_published": "2023-06-05T13:32:23.000Z",
            "content_html": "<h1 id=\"é€»è¾‘å›å½’logistic-regression\"><a href=\"https://baike.baidu.com/item/logistic%E5%9B%9E%E5%BD%92/2981575?fromtitle=%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92&amp;fromid=17202449&amp;fr=aladdin\">é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰</a></h1>\r\n<p>æ˜¯ä¸€ç§å¹¿ä¹‰çš„çº¿æ€§å›å½’åˆ†ææ¨¡å‹ï¼Œä¸å¤šé‡çº¿æ€§å›å½’æœ‰å¾ˆå¤šç›¸åŒä¹‹å¤„ã€‚å®ƒä»¬çš„æ¨¡å‹å½¢å¼åŸºæœ¬ä¸Šç›¸åŒï¼Œéƒ½å…·æœ‰$ wâ€™x+b$ï¼Œå…¶åŒºåˆ«åœ¨äºä»–ä»¬çš„å› å˜é‡ä¸åŒï¼Œ</p>\r\n<ul>\r\n<li>å¤šé‡çº¿æ€§å›å½’ç›´æ¥å°†<span class=\"math inline\">\\(w&#39;x+b\\)</span>ä½œä¸ºå› å˜é‡ï¼Œ</li>\r\n<li>Logisticå›å½’åˆ™é€šè¿‡å‡½æ•°Lå°†<span class=\"math inline\">\\(w&#39;x+b\\)</span>å¯¹åº”ä¸€ä¸ªéšçŠ¶æ€<span class=\"math inline\">\\(p\\)</span>ï¼Œ<span class=\"math inline\">\\(p =L(w&#39;x+b)\\)</span>ï¼Œç„¶åæ ¹æ®<span class=\"math inline\">\\(p\\)</span>ä¸<span class=\"math inline\">\\(1-p\\)</span>çš„å¤§å°å†³å®šå› å˜é‡çš„å€¼ã€‚</li>\r\n</ul>\r\n<p>å¦‚æœLæ˜¯Logisticå‡½æ•°ï¼Œå°±æ˜¯Logisticå›å½’ï¼Œ</p>\r\n<p>å¦‚æœLæ˜¯å¤šé¡¹å¼å‡½æ•°å°±æ˜¯å¤šé¡¹å¼å›å½’ã€‚</p>\r\n<span id=\"more\"></span>\r\n<h2 id=\"logistic-function\">Logistic Function</h2>\r\n<p>å®šä¹‰é€»è¾‘å›å½’çš„é¢„æµ‹å‡½æ•°ä¸º<span class=\"math inline\">\\(â„_\\theta(x) = ğ‘”(\\theta^ğ‘‡ğ‘¥)\\)</span> ï¼Œå…¶ä¸­g(x)å‡½æ•°æ˜¯sigmoidå‡½æ•°ã€‚ <span class=\"math display\">\\[\r\ng(x)=\\frac{1}{1+e^{-x}}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nh_\\theta(x)=\\frac{1}{1+e^{-\\theta^Tx}}\r\n\\]</span></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230606093600860.png\"  style=\"zoom:50%;\" /></p>\r\n<ol type=\"1\">\r\n<li>å½“<span class=\"math inline\">\\(\\theta^Txâ‰¥0\\)</span>ï¼Œ<span class=\"math inline\">\\(g(\\theta^Tx)â‰¥0.5\\)</span></li>\r\n<li>å½“<span class=\"math inline\">\\(\\theta^Txâ‰¤0\\)</span>ï¼Œ<span class=\"math inline\">\\(g(\\theta^Tx)â‰¤0.5\\)</span></li>\r\n</ol>\r\n<h2 id=\"é€»è¾‘å›å½’çš„ä»£ä»·å‡½æ•°cost-function\">é€»è¾‘å›å½’çš„ä»£ä»·å‡½æ•°ï¼ˆCost Functionï¼‰</h2>\r\n<p><span class=\"math display\">\\[\r\nCost(h_\\theta(x),y)= \r\n\\begin{cases}\r\n-log(h_\\theta(x))\\quad\\quad\\quad if\\quad y=1\\\\\r\n-log(1-h_\\theta(x))\\quad if\\quad y=0\r\n\\end{cases}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=-ylog(h_\\theta(x))-(1-y)log(1-h_\\theta(x))\r\n\\]</span></p>\r\n<h2 id=\"æ¢¯åº¦ä¸‹é™æ³•gradient-descent\">æ¢¯åº¦ä¸‹é™æ³•ï¼ˆGradient Descentï¼‰</h2>\r\n<p><span class=\"math display\">\\[\r\nJ(\\theta)=-\\frac{1}{m}[\\sum_{i=1}^{m}y^{(i)}logh_\\theta(x^{(i)})+(1-y^{(i)})log(1-h_\\theta(x^{(i)}))]\r\n\\]</span></p>\r\n<p>æ±‚è§£ <span class=\"math inline\">\\(min_\\theta J(\\theta)\\)</span> <span class=\"math display\">\\[\r\n\\theta_j:=\\theta_j-\\alpha\\sum_{i=1}^{m}(h_\\theta(x^{(i)})-y^{(i)})x_j^{(i)}\r\n\\]</span></p>\r\n<h2 id=\"å‡†ç¡®ç‡ç²¾å‡†ç‡å¬å›ç‡f1åˆ†æ•°\">å‡†ç¡®ç‡|ç²¾å‡†ç‡|å¬å›ç‡|F<sub>1</sub>åˆ†æ•°</h2>\r\n<p>æ··æ·†çŸ©é˜µ</p>\r\n<table>\r\n<thead>\r\n<tr class=\"header\">\r\n<th></th>\r\n<th></th>\r\n<th>å®é™…</th>\r\n<th>å®é™…</th>\r\n</tr>\r\n</thead>\r\n<tbody>\r\n<tr class=\"odd\">\r\n<td></td>\r\n<td></td>\r\n<td>1</td>\r\n<td>0</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td>é¢„æµ‹</td>\r\n<td>1</td>\r\n<td>TP</td>\r\n<td>FP</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td>é¢„æµ‹</td>\r\n<td>0</td>\r\n<td>FN</td>\r\n<td>TN</td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n<ul>\r\n<li>Pï¼ˆPositiveï¼‰ï¼šä»£è¡¨1</li>\r\n<li>Nï¼ˆNegativeï¼‰ï¼šä»£è¡¨0</li>\r\n<li>Tï¼ˆTrueï¼‰ï¼šä»£è¡¨é¢„æµ‹æ­£ç¡®</li>\r\n<li>Fï¼ˆFalseï¼‰ï¼šä»£è¡¨é¢„æµ‹é”™è¯¯</li>\r\n</ul>\r\n<p><strong>å‡†ç¡®ç‡ï¼š</strong>å³é¢„æµ‹æ­£ç¡®çš„ç»“æœå æ€»æ ·æœ¬çš„ç™¾åˆ†æ¯” <span class=\"math display\">\\[\r\nå‡†ç¡®ç‡=\\frac{TP+TN}{TP+TN+FP+FN}\r\n\\]</span> <strong>ç²¾å‡†ç‡ï¼ˆPrecisionï¼‰ï¼š</strong>æ˜¯æŒ‡åœ¨æ‰€æœ‰è¢«é¢„æµ‹ä¸ºæ­£çš„æ ·æœ¬ä¸­å®é™…ä¸ºæ­£çš„æ ·æœ¬çš„æ¦‚ç‡ã€‚ <span class=\"math display\">\\[\r\nç²¾å‡†ç‡=\\frac{TP}{TP+FP}\r\n\\]</span> <strong>ç²¾å‡†ç‡å°±æ˜¯ä½ è®¤ä¸ºæ‰¾çš„æ˜¯å¯¹çš„å®é™…ä¸Šå¤šå°‘æ˜¯å¯¹çš„</strong></p>\r\n<p><strong>å¬å›ç‡ï¼ˆRecallï¼‰ï¼š</strong>æ˜¯æŒ‡åœ¨å®é™…ä¸ºæ­£çš„æ ·æœ¬ä¸­è¢«é¢„æµ‹ä¸ºæ­£æ ·æœ¬çš„æ¦‚ç‡ã€‚ <span class=\"math display\">\\[\r\nå¬å›ç‡=\\frac{TP}{TP+FN}\r\n\\]</span> <strong>F<sub>1</sub>åˆ†æ•°ï¼š</strong>ç²¾å‡†ç‡å’Œå¬å›ç‡ä¹‹é—´çš„ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚ <span class=\"math display\">\\[\r\nF_1=\\frac{2\\times Precision\\times Recall}{Precision+Recall}\r\n\\]</span></p>\r\n<h2 id=\"é€»è¾‘å›å½’ç¤ºä¾‹ä»£ç \">é€»è¾‘å›å½’ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> preprocessing</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> linear_model</span><br><span class=\"line\"><span class=\"comment\"># æ•°æ®æ˜¯å¦éœ€è¦æ ‡å‡†åŒ–</span></span><br><span class=\"line\">scale = <span class=\"literal\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;LR-testSet.csv&quot;</span>, delimiter=<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">x_data = data[:,:-<span class=\"number\">1</span>]</span><br><span class=\"line\">y_data = data[:,-<span class=\"number\">1</span>]</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">plot</span>():</span><br><span class=\"line\">    x0 = []</span><br><span class=\"line\">    x1 = []</span><br><span class=\"line\">    y0 = []</span><br><span class=\"line\">    y1 = []</span><br><span class=\"line\">    <span class=\"comment\"># åˆ‡åˆ†ä¸åŒç±»åˆ«çš„æ•°æ®</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(x_data)):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> y_data[i]==<span class=\"number\">0</span>:</span><br><span class=\"line\">            x0.append(x_data[i,<span class=\"number\">0</span>])</span><br><span class=\"line\">            y0.append(x_data[i,<span class=\"number\">1</span>])</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            x1.append(x_data[i,<span class=\"number\">0</span>])</span><br><span class=\"line\">            y1.append(x_data[i,<span class=\"number\">1</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># ç”»å›¾</span></span><br><span class=\"line\">   scatter0 = plt.scatter(x0, y0, c=<span class=\"string\">&#x27;c&#x27;</span>, marker=<span class=\"string\">&#x27;+&#x27;</span>)</span><br><span class=\"line\">    scatter1 = plt.scatter(x1, y1, c=<span class=\"string\">&#x27;y&#x27;</span>, marker=<span class=\"string\">&#x27;*&#x27;</span>)</span><br><span class=\"line\">    <span class=\"comment\">#ç”»å›¾ä¾‹</span></span><br><span class=\"line\">    plt.legend(handles=[scatter0,scatter1],labels=[<span class=\"string\">&#x27;label0&#x27;</span>,<span class=\"string\">&#x27;label1&#x27;</span>],loc=<span class=\"string\">&#x27;best&#x27;</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">plot()</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶æ‹Ÿåˆæ¨¡å‹</span></span><br><span class=\"line\">logistic = linear_model.LogisticRegression()</span><br><span class=\"line\">logistic.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> scale == <span class=\"literal\">False</span>:</span><br><span class=\"line\">    <span class=\"comment\"># ç”»å›¾å†³ç­–è¾¹ç•Œ</span></span><br><span class=\"line\">    plot()</span><br><span class=\"line\">    x_test = np.array([[-<span class=\"number\">4</span>],[<span class=\"number\">3</span>]])</span><br><span class=\"line\">    y_test = (-logistic.intercept_ - x_test*logistic.coef_[<span class=\"number\">0</span>][<span class=\"number\">0</span>])/logistic.coef_[<span class=\"number\">0</span>][<span class=\"number\">1</span>]</span><br><span class=\"line\">    plt.plot(x_test, y_test, <span class=\"string\">&#x27;k&#x27;</span>)</span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•ä¸è¯„ä¼°    </span></span><br><span class=\"line\">predictions = logistic.predict(x_data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(classification_report(y_data, predictions))</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230606164354040.png\"  style=\"zoom:50%;\" /></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230606164557574.png\"  style=\"zoom: 67%;\" /></p>\r\n<h2 id=\"éçº¿æ€§é€»è¾‘å›å½’ç¤ºä¾‹ä»£ç \">éçº¿æ€§é€»è¾‘å›å½’ç¤ºä¾‹ä»£ç </h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> linear_model</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.datasets <span class=\"keyword\">import</span> make_gaussian_quantiles</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.preprocessing <span class=\"keyword\">import</span> PolynomialFeatures</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆ2ç»´æ­£æ€åˆ†å¸ƒï¼Œç”Ÿæˆçš„æ•°æ®æŒ‰åˆ†ä½æ•°åˆ†ä¸ºä¸¤ç±»ï¼Œ500ä¸ªæ ·æœ¬,2ä¸ªæ ·æœ¬ç‰¹å¾</span></span><br><span class=\"line\"><span class=\"comment\"># å¯ä»¥ç”Ÿæˆä¸¤ç±»æˆ–å¤šç±»æ•°æ®</span></span><br><span class=\"line\">x_data, y_data = make_gaussian_quantiles(n_samples=<span class=\"number\">500</span>, n_features=<span class=\"number\">2</span>,n_classes=<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">plt.scatter(x_data[:, <span class=\"number\">0</span>], x_data[:, <span class=\"number\">1</span>], c=y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶æ‹Ÿåˆæ¨¡å‹</span></span><br><span class=\"line\">logistic = linear_model.LogisticRegression()</span><br><span class=\"line\">logistic.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å®šä¹‰å¤šé¡¹å¼å›å½’,degreeçš„å€¼å¯ä»¥è°ƒèŠ‚å¤šé¡¹å¼çš„ç‰¹å¾</span></span><br><span class=\"line\">poly_reg  = PolynomialFeatures(degree=<span class=\"number\">5</span>) </span><br><span class=\"line\"><span class=\"comment\"># ç‰¹å¾å¤„ç†</span></span><br><span class=\"line\">x_poly = poly_reg.fit_transform(x_data)</span><br><span class=\"line\"><span class=\"comment\"># å®šä¹‰é€»è¾‘å›å½’æ¨¡å‹</span></span><br><span class=\"line\">logistic = linear_model.LogisticRegression()</span><br><span class=\"line\"><span class=\"comment\"># è®­ç»ƒæ¨¡å‹</span></span><br><span class=\"line\">logistic.fit(x_poly, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è·å–æ•°æ®å€¼æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class=\"line\">x_min, x_max = x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">0</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\">y_min, y_max = x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">min</span>() - <span class=\"number\">1</span>, x_data[:, <span class=\"number\">1</span>].<span class=\"built_in\">max</span>() + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">xx, yy = np.meshgrid(np.arange(x_min, x_max, <span class=\"number\">0.02</span>),</span><br><span class=\"line\">                     np.arange(y_min, y_max, <span class=\"number\">0.02</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">z = logistic.predict(poly_reg.fit_transform(np.c_[xx.ravel(), yy.ravel()]))<span class=\"comment\"># ravelä¸flattenç±»ä¼¼ï¼Œå¤šç»´æ•°æ®è½¬ä¸€ç»´ã€‚flattenä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®ï¼Œravelä¼šæ”¹å˜åŸå§‹æ•°æ®</span></span><br><span class=\"line\">z = z.reshape(xx.shape)</span><br><span class=\"line\"><span class=\"comment\"># ç­‰é«˜çº¿å›¾</span></span><br><span class=\"line\">cs = plt.contourf(xx, yy, z)</span><br><span class=\"line\"><span class=\"comment\"># æ ·æœ¬æ•£ç‚¹å›¾</span></span><br><span class=\"line\">plt.scatter(x_data[:, <span class=\"number\">0</span>], x_data[:, <span class=\"number\">1</span>], c=y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;score:&#x27;</span>,logistic.score(x_poly,y_data))</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230606165631817.png\"  style=\"zoom:67%;\" /></p>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Rt411q7WJ?p=29\">é€»è¾‘å›å½’</a></p>\r\n",
            "tags": [
                "Python",
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E5%8F%8A%E9%9D%9E%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/",
            "url": "https://liujk6525.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E5%8F%8A%E9%9D%9E%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/",
            "title": "çº¿æ€§å›å½’åŠéçº¿æ€§å›å½’",
            "date_published": "2023-06-05T01:37:27.000Z",
            "content_html": "<h1 id=\"åŸºæœ¬æ¦‚å¿µ\">åŸºæœ¬æ¦‚å¿µï¼š</h1>\r\n<p>å°†æ•°æ®åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š<span class=\"math inline\">\\(\\begin{cases} è®­ç»ƒé›†(Train):ç”¨æ¥è®­ç»ƒï¼Œæ„å»ºæ¨¡å‹\\\\ éªŒè¯é›†(Validate):åœ¨æ¨¡å‹è®­ç»ƒé˜¶æ®µï¼Œæµ‹è¯•æ¨¡å‹çš„å¥½å\\\\ æµ‹è¯•é›†(Test):ç­‰æ¨¡å‹è®­ç»ƒå¥½åï¼Œè¯„ä¼°æ¨¡å‹çš„å¥½å \\end{cases}\\)</span></p>\r\n<span id=\"more\"></span>\r\n<p>å­¦ä¹ æ–¹å¼ï¼š<span class=\"math inline\">\\(\\begin{cases} ç›‘ç£å­¦ä¹ \\\\ æ— ç›‘ç£å­¦ä¹ \\\\ åŠç›‘ç£å­¦ä¹  \\end{cases}\\)</span></p>\r\n<p>å¸¸è§åº”ç”¨ï¼š<span class=\"math inline\">\\(\\begin{cases} å›å½’ï¼šé¢„æµ‹æ•°æ®ä¸ºè¿ç»­å‹æ•°å€¼ã€‚\\\\ åˆ†ç±»ï¼šé¢„æµ‹æ•°æ®ä¸ºç±»åˆ«å‹æ•°æ®ï¼Œå¹¶ä¸”ç±»åˆ«å·²çŸ¥ã€‚\\\\ èšç±»ï¼šé¢„æµ‹æ•°æ®ä¸ºç±»åˆ«å‹æ•°æ®ï¼Œä½†æ˜¯ç±»åˆ«æœªçŸ¥ã€‚ \\end{cases}\\)</span></p>\r\n<h1 id=\"å›å½’åˆ†æregression\"><a href=\"https://baike.baidu.com/item/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/2625498?fr=aladdin\">å›å½’åˆ†æï¼ˆRegressionï¼‰</a></h1>\r\n<p>å›å½’åˆ†æç”¨æ¥å»ºç«‹æ–¹ç¨‹ï¼Œæ¨¡æ‹Ÿä¸¤ä¸ªæˆ–è€…å¤šä¸ªå˜é‡ä¹‹é—´å¦‚ä½•å…³è”ï¼Œ</p>\r\n<ul>\r\n<li>è¢«é¢„æµ‹çš„å˜é‡å«åšï¼šå› å˜é‡/è¾“å‡º</li>\r\n<li>è¢«ç”¨æ¥è¿›è¡Œé¢„æµ‹çš„å˜é‡å«åšï¼š è‡ªå˜é‡,/è¾“å…¥</li>\r\n</ul>\r\n<p>ä¸€å…ƒçº¿æ€§å›å½’åŒ…å«ä¸€ä¸ªè‡ªå˜é‡å’Œä¸€ä¸ªå› å˜é‡ï¼Œä¸¤ä¸ªå˜é‡çš„å…³ç³»ç”¨ä¸€æ¡ç›´çº¿æ¥æ¨¡æ‹Ÿï¼Œå¦‚æœåŒ…å«ä¸¤ä¸ªä»¥ä¸Šçš„è‡ªå˜é‡ï¼Œåˆ™ç§°ä½œå¤šå…ƒå›å½’åˆ†æï¼ˆmultiple regressionï¼‰</p>\r\n<h1 id=\"ä¸€å…ƒçº¿æ€§å›å½’\"><a href=\"https://baike.baidu.com/item/%E4%B8%80%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/22770888?fr=aladdin\">ä¸€å…ƒçº¿æ€§å›å½’</a></h1>\r\n<p>ä¸€å…ƒçº¿æ€§å›å½’ï¼š<span class=\"math inline\">\\(h_\\theta(x)=\\theta_0+\\theta_1x\\)</span></p>\r\n<h2 id=\"ä»£ä»·å‡½æ•°cost-function\"><a href=\"https://baike.baidu.com/item/%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0/1783236?fromtitle=%E4%BB%A3%E4%BB%B7%E5%87%BD%E6%95%B0&amp;fromid=7048599&amp;fr=aladdin\">ä»£ä»·å‡½æ•°ï¼ˆCost Functionï¼‰</a></h2>\r\n<p><strong>æœ€å°äºŒä¹˜æ³•</strong></p>\r\n<p>å‡è®¾çœŸå®å€¼ä¸º<span class=\"math inline\">\\(y\\)</span>ï¼Œé¢„æµ‹å€¼<span class=\"math inline\">\\(h_\\theta(x)\\)</span> ï¼Œåˆ™è¯¯å·®å¹³æ–¹ä¸º<span class=\"math inline\">\\((h_\\theta(x)-y)^2\\)</span></p>\r\n<p>æ‰¾åˆ°åˆé€‚çš„å‚æ•°ï¼Œä½¿å¾—è¯¯å·®å¹³æ–¹å’Œ<span class=\"math inline\">\\(J(\\theta_0,\\theta_1)\\)</span>æœ€å°ã€‚ <span class=\"math display\">\\[\r\nJ(\\theta_0,\\theta_1)=\\frac{1}{2m}\\sum_{i=1}^{m}{(h_\\theta(x^{(i)})-y^{(i)})^{2}}\r\n\\]</span></p>\r\n<h2 id=\"æ¢¯åº¦ä¸‹é™æ³•gradient-descent\"><a href=\"https://baike.baidu.com/item/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95/8641233?fr=aladdin\">æ¢¯åº¦ä¸‹é™æ³•ï¼ˆGradient Descentï¼‰</a></h2>\r\n<p><strong>æœ€å°åŒ–ç›®æ ‡å‡½æ•°</strong> <span class=\"math inline\">\\(\\underset{\\theta_0,\\theta_1}{min}\\quad J(\\theta_0,\\theta_1)\\)</span></p>\r\n<p>åˆå§‹åŒ–å‚æ•°<span class=\"math inline\">\\(\\theta_0,\\theta_1\\)</span></p>\r\n<p>ä¸æ–­æ”¹å˜<span class=\"math inline\">\\(\\theta_0,\\theta_1\\)</span> ï¼Œç›´åˆ°<span class=\"math inline\">\\(J(\\theta_0,\\theta_1)\\)</span>åˆ°è¾¾ä¸€ä¸ªå…¨å±€æœ€å°å€¼ï¼Œæˆ–å±€éƒ¨æå°å€¼ã€‚ <span class=\"math display\">\\[\r\n\\theta_j:=\\theta_j-\\alpha\\frac{\\partial}{\\partial\\theta_j}J(\\theta_0,\\theta_1)\\quad (j=0,1,2\\cdots)\r\n\\]</span></p>\r\n<h2 id=\"ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£çº¿æ€§å›å½’\">ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£çº¿æ€§å›å½’</h2>\r\n<p><span class=\"math display\">\\[\r\n\\frac{\\partial}{\\partial\\theta_0}J(\\theta_0,\\theta_1)=\r\n\\frac{1}{m}\\sum_{i=1}^{m}{(h_\\theta(x^{(i)})-y^{(i)})}\r\n\\\\\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n\\frac{\\partial}{\\partial\\theta_1}J(\\theta_0,\\theta_1)=\r\n\\frac{1}{m}\\sum_{i=1}^{m}{(h_\\theta(x^{(i)})-y^{(i)})}\\times x^{(i)}\r\n\\]</span></p>\r\n<p>ä¸æ–­è¿­ä»£ï¼Œç›´åˆ°æ”¶æ•›ï¼š <span class=\"math display\">\\[\r\n\\theta_0:=\\theta_0-\\alpha\\frac{1}{m}{\\sum_{i=1}^{m}{(h_\\theta(x^{(i)})-y^{(i)})}}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n\\theta_1:=\\theta_1-\\alpha\\frac{1}{m}{\\sum_{i=1}^{m}{(h_\\theta(x^{(i)})-y^{(i)})}}\\times x^{(i)}\r\n\\]</span></p>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç ï¼š</h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sklearn.linear_model <span class=\"keyword\">import</span> LinearRegression <span class=\"comment\"># çº¿æ€§å›å½’æ¨¡å‹</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;data.csv&quot;</span>, delimiter=<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">x_data = data[:,<span class=\"number\">0</span>]</span><br><span class=\"line\">y_data = data[:,<span class=\"number\">1</span>]</span><br><span class=\"line\">plt.scatter(x_data,y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\">x_data = data[:,<span class=\"number\">0</span>,np.newaxis]</span><br><span class=\"line\">y_data = data[:,<span class=\"number\">1</span>,np.newaxis]</span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶æ‹Ÿåˆæ¨¡å‹</span></span><br><span class=\"line\">model = LinearRegression() <span class=\"comment\"># çº¿æ€§å›å½’</span></span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•</span></span><br><span class=\"line\">x_test = [[<span class=\"number\">44.5</span>]]</span><br><span class=\"line\">predict = model.predict(x_test)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;predict&#x27;</span>,predict)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å›¾</span></span><br><span class=\"line\">plt.plot(x_data, y_data, <span class=\"string\">&#x27;b.&#x27;</span>)</span><br><span class=\"line\">plt.plot(x_data, model.predict(x_data), <span class=\"string\">&#x27;r&#x27;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230605203607162.png\"  style=\"zoom:50%;\" /></p>\r\n<h1 id=\"å¤šå…ƒçº¿æ€§å›å½’multiple-linear-regression\"><a href=\"https://baike.baidu.com/item/%E5%A4%9A%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/10702248?fr=aladdin\">å¤šå…ƒçº¿æ€§å›å½’ï¼ˆMultiple Linear Regressionï¼‰</a></h1>\r\n<p>å¤šç‰¹å¾æ—¶ï¼Œå‡è®¾ï¼š<span class=\"math inline\">\\(h_\\theta(x)=\\theta_0+\\theta_1x_1+\\theta_2x_2+\\cdots+\\theta_nx_n\\)</span></p>\r\n<p>å½“çœŸå®å€¼<span class=\"math inline\">\\(y\\)</span>çš„å½±å“å› ç´ ä¸æ˜¯å”¯ä¸€æ—¶ï¼Œéœ€é‡‡ç”¨å¤šå…ƒçº¿æ€§å›å½’æ¨¡å‹ã€‚</p>\r\n<p>ä»£ä»·å‡½æ•°ï¼š <span class=\"math display\">\\[\r\nJ(\\theta_0,\\theta_1,\\cdots,\\theta_n)=\\frac{1}{2m}\\sum_{i=1}^{m}(h_\\theta(x^{(i)})-y^{(i)})^{2}\r\n\\]</span> æ¢¯åº¦ä¸‹é™æ³•ï¼š <span class=\"math display\">\\[\r\n\\theta_j:=\\theta_j-\\alpha\\frac{1}{m}\\sum_{i=1}^{m}{(h_\\theta(x^{(i)})-y^{(i)})}\\times x_j^{(i)}\\quad (j=0,1,2\\cdots,n)\r\n\\]</span> æ³¨æ„è¿™é‡Œçš„<span class=\"math inline\">\\(j=0\\)</span>æ—¶ï¼Œ<span class=\"math inline\">\\(x_0=1\\)</span></p>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç -1\">ç¤ºä¾‹ä»£ç ï¼š</h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> numpy <span class=\"keyword\">import</span> genfromtxt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> linear_model <span class=\"comment\"># çº¿æ€§å›å½’æ¨¡å‹</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt  </span><br><span class=\"line\"><span class=\"keyword\">from</span> mpl_toolkits.mplot3d <span class=\"keyword\">import</span> Axes3D  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¯»å…¥æ•°æ® </span></span><br><span class=\"line\">data = genfromtxt(<span class=\"string\">r&quot;Delivery.csv&quot;</span>,delimiter=<span class=\"string\">&#x27;,&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ‡åˆ†æ•°æ®</span></span><br><span class=\"line\">x_data = data[:,:-<span class=\"number\">1</span>]</span><br><span class=\"line\">y_data = data[:,-<span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"built_in\">print</span>(x_data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºæ¨¡å‹</span></span><br><span class=\"line\">model = linear_model.LinearRegression()</span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•</span></span><br><span class=\"line\">x_test = [[<span class=\"number\">102</span>,<span class=\"number\">4</span>]]</span><br><span class=\"line\">predict = model.predict(x_test)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;predict:&quot;</span>,predict)</span><br><span class=\"line\"></span><br><span class=\"line\">ax = plt.figure().add_subplot(<span class=\"number\">111</span>, projection = <span class=\"string\">&#x27;3d&#x27;</span>) </span><br><span class=\"line\">ax.scatter(x_data[:,<span class=\"number\">0</span>], x_data[:,<span class=\"number\">1</span>], y_data, c = <span class=\"string\">&#x27;r&#x27;</span>, marker = <span class=\"string\">&#x27;o&#x27;</span>, s = <span class=\"number\">100</span>) <span class=\"comment\">#ç‚¹ä¸ºçº¢è‰²ä¸‰è§’å½¢  </span></span><br><span class=\"line\">x0 = x_data[:,<span class=\"number\">0</span>]</span><br><span class=\"line\">x1 = x_data[:,<span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆç½‘æ ¼çŸ©é˜µ</span></span><br><span class=\"line\">x0, x1 = np.meshgrid(x0, x1)</span><br><span class=\"line\">z = model.intercept_ + x0*model.coef_[<span class=\"number\">0</span>] + x1*model.coef_[<span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"comment\"># ç”»3Då›¾</span></span><br><span class=\"line\">ax.plot_surface(x0, x1, z)</span><br><span class=\"line\"><span class=\"comment\">#è®¾ç½®åæ ‡è½´  </span></span><br><span class=\"line\">ax.set_xlabel(<span class=\"string\">&#x27;Miles&#x27;</span>)  </span><br><span class=\"line\">ax.set_ylabel(<span class=\"string\">&#x27;Num of Deliveries&#x27;</span>)  </span><br><span class=\"line\">ax.set_zlabel(<span class=\"string\">&#x27;Time&#x27;</span>)  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"comment\">#æ˜¾ç¤ºå›¾åƒ  </span></span><br><span class=\"line\">plt.show()  </span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230605204147960.png\"  style=\"zoom:50%;\" /></p>\r\n<h1 id=\"å¤šé¡¹å¼å›å½’\">å¤šé¡¹å¼å›å½’</h1>\r\n<p>å‡å¦‚æˆ‘ä»¬ä¸æ˜¯è¦æ‰¾ç›´çº¿ï¼ˆæˆ–è€…è¶…å¹³é¢ï¼‰ï¼Œè€Œæ˜¯éœ€è¦æ‰¾åˆ°ä¸€ ä¸ªç”¨å¤šé¡¹å¼æ‰€è¡¨ç¤ºçš„æ›²çº¿ï¼ˆæˆ–è€…è¶…æ›²é¢ï¼‰</p>\r\n<p>å¤šé¡¹å¼å›å½’ï¼š<span class=\"math inline\">\\(h_\\theta(x)=\\theta_0+\\theta_1x+\\theta_2x^2+\\cdots+\\theta_nx^n\\)</span></p>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç -2\">ç¤ºä¾‹ä»£ç ï¼š</h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.preprocessing <span class=\"keyword\">import</span> PolynomialFeatures </span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.linear_model <span class=\"keyword\">import</span> LinearRegression</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è½½å…¥æ•°æ®</span></span><br><span class=\"line\">data = np.genfromtxt(<span class=\"string\">&quot;job.csv&quot;</span>, delimiter=<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">x_data = data[<span class=\"number\">1</span>:,<span class=\"number\">1</span>]</span><br><span class=\"line\">y_data = data[<span class=\"number\">1</span>:,<span class=\"number\">2</span>]</span><br><span class=\"line\">plt.scatter(x_data,y_data)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\">x_data = x_data[:,np.newaxis]</span><br><span class=\"line\">y_data = y_data[:,np.newaxis]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å®šä¹‰å¤šé¡¹å¼å›å½’,degreeçš„å€¼å¯ä»¥è°ƒèŠ‚å¤šé¡¹å¼çš„ç‰¹å¾</span></span><br><span class=\"line\">poly_reg  = PolynomialFeatures(degree=<span class=\"number\">5</span>) </span><br><span class=\"line\"><span class=\"comment\"># ç‰¹å¾å¤„ç†</span></span><br><span class=\"line\">x_poly = poly_reg.fit_transform(x_data)</span><br><span class=\"line\"><span class=\"comment\"># å®šä¹‰å›å½’æ¨¡å‹</span></span><br><span class=\"line\">lin_reg = LinearRegression()</span><br><span class=\"line\"><span class=\"comment\"># è®­ç»ƒæ¨¡å‹</span></span><br><span class=\"line\">lin_reg.fit(x_poly, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å›¾</span></span><br><span class=\"line\"><span class=\"comment\"># ç”»å›¾</span></span><br><span class=\"line\">plt.plot(x_data, y_data, <span class=\"string\">&#x27;b.&#x27;</span>)</span><br><span class=\"line\">x_test = np.linspace(<span class=\"number\">1</span>,<span class=\"number\">10</span>,<span class=\"number\">100</span>)</span><br><span class=\"line\">x_test = x_test[:,np.newaxis]</span><br><span class=\"line\">plt.plot(x_test, lin_reg.predict(poly_reg.fit_transform(x_test)), c=<span class=\"string\">&#x27;r&#x27;</span>)</span><br><span class=\"line\">plt.title(<span class=\"string\">&#x27;Truth or Bluff (Polynomial Regression)&#x27;</span>)</span><br><span class=\"line\">plt.xlabel(<span class=\"string\">&#x27;Position level&#x27;</span>)</span><br><span class=\"line\">plt.ylabel(<span class=\"string\">&#x27;Salary&#x27;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230605205328029.png\"  style=\"zoom:50%;\" /></p>\r\n<h1 id=\"æ ‡å‡†æ–¹ç¨‹æ³•normal-equation\">æ ‡å‡†æ–¹ç¨‹æ³•ï¼ˆNormal Equationï¼‰</h1>\r\n<p>æ³¨æ„è¿™é‡Œçš„ç¬¦å·ï¼š<span class=\"math inline\">\\(w\\)</span>å…¶å®å°±æ˜¯ä¸Šé¢å…¬å¼é‡Œçš„<span class=\"math inline\">\\(\\theta\\)</span>ï¼Œå°±æ˜¯è¦æ±‚è§£çš„é‚£ä¸ªå‚æ•°ã€‚</p>\r\n<p>å‡è®¾ï¼š <span class=\"math display\">\\[\r\nh_w(x)=w_0+w_1x_1+w_2x_2+\\cdots+w_nx_n\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nh_w(x)=xw\\\r\n\\]</span></p>\r\n<p>ç›®æ ‡å‡½æ•°: <span class=\"math display\">\\[\r\nJ(w_0,w_1,\\cdots,w_n)=\\frac{1}{2m}\\sum_{i=1}^{m}(h_w(x^{(i)})-y^{(i)})^{2}\r\n\\]</span> åˆå› ä¸º <span class=\"math display\">\\[\r\n\\sum_{i=1}^{m}(h_w(x^{(i)})-y^{(i)})^{2}=(y-Xw)^T(y-Xw)\r\n\\]</span> æ‰€ä»¥ <span class=\"math display\">\\[\r\n\\frac{\\partial J(w)}{\\partial w}=\\frac{\\partial(y-Xw)^T(y-Xw)}{\\partial w}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=\\frac{\\partial(y^Ty-y^TXw-w^TX^Ty+w^TX^TXw)}{\\partial w}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=\\frac{\\partial(y^Ty)}{\\partial w}-\\frac{\\partial(y^TXw)}{\\partial w}-\\frac{\\partial(w^TX^Ty)}{\\partial w}+\\frac{\\partial(w^TX^TXw)}{\\partial w}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=0-X^Ty-X^Ty+2X^TXw\r\n\\]</span></p>\r\n<p>ä»¤ <span class=\"math display\">\\[\r\n\\frac{\\partial J(w)}{\\partial w}=0\r\n\\]</span> æ±‚è§£ï¼š <span class=\"math display\">\\[\r\n-2X^Ty+2X^TXw=0\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nX^TXw=X^Ty\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nw=(X^TX)^{-1}X^Ty\r\n\\]</span></p>\r\n<h1 id=\"ç‰¹å¾ç¼©æ”¾\"><a href=\"https://baike.baidu.com/item/%E7%89%B9%E5%BE%81%E7%BC%A9%E6%94%BE/17415222?fr=aladdin\">ç‰¹å¾ç¼©æ”¾</a></h1>\r\n<h2 id=\"æ•°æ®å½’ä¸€åŒ–\">æ•°æ®å½’ä¸€åŒ–</h2>\r\n<p>æ•°æ®å½’ä¸€åŒ–å°±æ˜¯æŠŠæ•°æ®çš„å–å€¼èŒƒå›´å¤„ç†ä¸º<span class=\"math inline\">\\(0-1\\)</span>ï¼Œæˆ–è€…<span class=\"math inline\">\\(-1-1\\)</span>ä¹‹é—´ã€‚</p>\r\n<p>ä»»æ„æ•°æ®è½¬åŒ–ä¸º0-1ä¹‹é—´ï¼š <span class=\"math display\">\\[\r\nNewValue = \\frac{OldValue-min}{max-min}\r\n\\]</span> ä»»æ„æ•°æ®è½¬åŒ–ä¸º-1-1ä¹‹é—´ï¼š <span class=\"math display\">\\[\r\nNewValue=2\\times(\\frac{OldVaule-min}{max-min}-0.5)\r\n\\]</span></p>\r\n<h2 id=\"å‡å€¼æ ‡å‡†åŒ–\">å‡å€¼æ ‡å‡†åŒ–</h2>\r\n<p><span class=\"math inline\">\\(x\\)</span>ä¸ºç‰¹å¾æ•°æ®ï¼Œ<span class=\"math inline\">\\(u\\)</span>ä¸ºæ•°æ®çš„å¹³å‡å€¼ï¼Œ<span class=\"math inline\">\\(s\\)</span>ä¸ºæ•°æ®çš„æ–¹å·®ã€‚ <span class=\"math display\">\\[\r\nNewValue=\\frac{OldValue-u}{s}\r\n\\]</span></p>\r\n<h1 id=\"è¿‡æ‹Ÿåˆoverfitting\">è¿‡æ‹Ÿåˆï¼ˆOverfittingï¼‰</h1>\r\n<p>å›å½’é—®é¢˜æ‹Ÿåˆæœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230605154335888.png\"  style=\"zoom:50%;\" /></p>\r\n<p>åˆ†ç±»é—®é¢˜æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230605154600447.png\" style=\"zoom:50%;\" /></p>\r\n<p>é˜²æ­¢è¿‡æ‹Ÿåˆï¼šå‡å°‘ç‰¹å¾ï¼›å¢åŠ æ•°æ®é‡ï¼›æ­£åˆ™åŒ–ï¼ˆRegularizedï¼‰</p>\r\n<h2 id=\"æ­£åˆ™åŒ–\">æ­£åˆ™åŒ–</h2>\r\n<p>L2æ­£åˆ™åŒ–ï¼š <span class=\"math display\">\\[\r\nJ(\\theta)=\\frac{1}{2m}[\\sum_{i=1}^{m}{h_\\theta(x^{(i)}-y^{(i)})^2+\\lambda\\sum_{j=1}^{n}{\\theta_j^2}}]\r\n\\]</span> L1æ­£åˆ™åŒ–ï¼š <span class=\"math display\">\\[\r\nJ(\\theta)=\\frac{1}{2m}[\\sum_{i=1}^{m}{h_\\theta(x^{(i)}-y^{(i)})^2+\\lambda\\sum_{j=1}^{n}{|\\theta_j|}}]\r\n\\]</span></p>\r\n<h1 id=\"å²­å›å½’ridge-regression\"><a href=\"https://baike.baidu.com/link?url=J428YjCOAduEv-hDj1BM53FvjQEMC1iR9icG161YvlKwmXXmtsgGoFBvkL_VK2T40KfCjPMUpQQ8ePln0cjp50QpceYEGvvCC4iewQhwY0fGCqcS9kwQCLnbARBjd0mT\">å²­å›å½’ï¼ˆRidge Regressionï¼‰</a></h1>\r\n<p>ç”±æ ‡å‡†æ–¹ç¨‹æ³•å¾—å‡ºï¼Œ <span class=\"math display\">\\[\r\nw = (ğ‘‹^ğ‘‡ğ‘‹)^{-1}ğ‘‹^ğ‘‡y\r\n\\]</span> å¦‚æœæ•°æ®çš„ç‰¹å¾æ¯”æ ·æœ¬ç‚¹è¿˜å¤šï¼Œï¼ˆæ•°æ®ç‰¹å¾<span class=\"math inline\">\\(n\\)</span>ï¼Œæ ·æœ¬ä¸ªæ•°<span class=\"math inline\">\\(m\\)</span>ï¼‰ï¼Œå¦‚æœ<span class=\"math inline\">\\(n&gt;m\\)</span>ï¼Œ<span class=\"math inline\">\\(ğ‘‹^ğ‘‡ğ‘‹\\)</span>ä¸æ˜¯æ»¡ç§©çŸ©é˜µï¼Œä¸å¯é€†ï¼Œè®¡ç®—<span class=\"math inline\">\\(ğ‘‹^ğ‘‡ğ‘‹^{-1}\\)</span>æ—¶ä¼šå‡ºé”™ã€‚</p>\r\n<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†å²­å›å½’çš„æ¦‚å¿µã€‚<span class=\"math inline\">\\(\\lambda\\)</span>ä¸ºå²­ç³»æ•°ï¼Œ<span class=\"math inline\">\\(I\\)</span>ä¸ºå•ä½çŸ©é˜µã€‚ <span class=\"math display\">\\[\r\nw = (ğ‘‹^ğ‘‡ğ‘‹ + \\lambda I)^{-1}ğ‘‹^ğ‘‡y\r\n\\]</span> æ¨å¯¼ï¼š <span class=\"math display\">\\[\r\nJ(\\theta)=\\frac{1}{2}[\\sum_{i=1}^{m}{h_\\theta(x^{(i)}-y^{(i)})^2+\\lambda\\sum_{j=1}^{n}{\\theta_j^2}}]\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=\\frac{1}{2}(Xw-y)^T(Xw-y)+\\lambda w^Tw\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=\\frac{1}{2}(w^TX^TXw-w^TX^Ty-y^TXw+y^Ty)+\\lambda w^Tw\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n\\frac{\\partial J(w)}{\\partial w}=X^TXw-X^Ty+\\lambda w\r\n\\]</span></p>\r\n<p>ä»¤ <span class=\"math display\">\\[\r\n\\frac{\\partial J(w)}{\\partial w}=0\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nw = (ğ‘‹^ğ‘‡ğ‘‹ + \\lambda I)^{-1}ğ‘‹^ğ‘‡y\r\n\\]</span></p>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç -3\">ç¤ºä¾‹ä»£ç ï¼š</h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> numpy <span class=\"keyword\">import</span> genfromtxt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> linear_model</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¯»å…¥æ•°æ® </span></span><br><span class=\"line\">data = genfromtxt(<span class=\"string\">r&quot;longley.csv&quot;</span>,delimiter=<span class=\"string\">&#x27;,&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ‡åˆ†æ•°æ®</span></span><br><span class=\"line\">x_data = data[<span class=\"number\">1</span>:,<span class=\"number\">2</span>:]</span><br><span class=\"line\">y_data = data[<span class=\"number\">1</span>:,<span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"built_in\">print</span>(x_data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºæ¨¡å‹</span></span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆ50ä¸ªå€¼</span></span><br><span class=\"line\">alphas_to_test = np.linspace(<span class=\"number\">0.001</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºæ¨¡å‹ï¼Œä¿å­˜è¯¯å·®å€¼</span></span><br><span class=\"line\">model = linear_model.RidgeCV(alphas=alphas_to_test, store_cv_values=<span class=\"literal\">True</span>)</span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç”»å›¾</span></span><br><span class=\"line\"><span class=\"comment\"># å²­ç³»æ•°è·Ÿlosså€¼çš„å…³ç³»</span></span><br><span class=\"line\">plt.plot(alphas_to_test, model.cv_values_.mean(axis=<span class=\"number\">0</span>))</span><br><span class=\"line\"><span class=\"comment\"># é€‰å–çš„å²­ç³»æ•°å€¼çš„ä½ç½®</span></span><br><span class=\"line\">plt.plot(model.alpha_, <span class=\"built_in\">min</span>(model.cv_values_.mean(axis=<span class=\"number\">0</span>)),<span class=\"string\">&#x27;ro&#x27;</span>)</span><br><span class=\"line\">plt.xlabel(<span class=\"string\">&#x27;alphas&#x27;</span>)</span><br><span class=\"line\">plt.ylabel(<span class=\"string\">&#x27;loss&#x27;</span>)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•</span></span><br><span class=\"line\">model.predict(x_data[<span class=\"number\">2</span>,np.newaxis])</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20230605210828441.png\"  style=\"zoom:50%;\" /></p>\r\n<h1 id=\"lassoleast-absolute-shrinkage-and\">[LASSOï¼ˆLeast Absolute Shrinkage and</h1>\r\n<p>Selectionator operatorï¼‰](https://baike.baidu.com/item/Lasso%E7%AE%97%E6%B3%95/22685468?fromtitle=LASSO&amp;fromid=20366865&amp;fr=aladdin)</p>\r\n<p>LASSOçš„ä»£ä»·å‡½æ•°ï¼š <span class=\"math display\">\\[\r\nJ(\\theta)=\\frac{1}{2m}[\\sum_{i=1}^{m}{h_\\theta(x^{(i)}-y^{(i)})^2+\\lambda\\sum_{j=1}^{n}{|\\theta_j|}}]\r\n\\]</span></p>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç -4\">ç¤ºä¾‹ä»£ç ï¼š</h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> numpy <span class=\"keyword\">import</span> genfromtxt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> linear_model</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¯»å…¥æ•°æ® </span></span><br><span class=\"line\">data = genfromtxt(<span class=\"string\">r&quot;longley.csv&quot;</span>,delimiter=<span class=\"string\">&#x27;,&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ‡åˆ†æ•°æ®</span></span><br><span class=\"line\">x_data = data[<span class=\"number\">1</span>:,<span class=\"number\">2</span>:]</span><br><span class=\"line\">y_data = data[<span class=\"number\">1</span>:,<span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"built_in\">print</span>(x_data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶æ‹Ÿåˆæ¨¡å‹</span></span><br><span class=\"line\">model = linear_model.LassoCV()</span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># lassoç³»æ•°</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(model.alpha_)</span><br><span class=\"line\"><span class=\"comment\"># ç›¸å…³ç³»æ•°</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(model.coef_)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># é¢„æµ‹</span></span><br><span class=\"line\">model.predict(x_data[-<span class=\"number\">2</span>,np.newaxis])</span><br></pre></td></tr></table></figure>\r\n<h1 id=\"å¼¹æ€§ç½‘elastic-net\">å¼¹æ€§ç½‘ï¼ˆElastic Netï¼‰</h1>\r\n<p>åœ¨<span class=\"math inline\">\\(q\\)</span>å–ä¸åŒå€¼æƒ…å†µä¸‹çš„ä»£ä»·å‡½æ•° <span class=\"math display\">\\[\r\nJ(\\theta)=\\frac{1}{2m}[\\sum_{i=1}^{m}{h_\\theta(x^{(i)}-y^{(i)})^2+\\lambda\\sum_{j=1}^{n}{|\\theta_j|^q}}]\r\n\\]</span> <img src=\"/imgs/$%7Bfiilename%7D/image-20230605164458909.png\"  style=\"zoom:50%;\" /></p>\r\n<p>Elastic Netçš„ä»£ä»·å‡½æ•°ï¼š <span class=\"math display\">\\[\r\nJ(\\theta)=\\frac{1}{2m}[\\sum_{i=1}^{m}{h_\\theta(x^{(i)}-y^{(i)})^2+\\lambda\\sum_{j=1}^{n}{\\alpha\\theta_j^2+(1-\\alpha)|\\theta_j|}}]\r\n\\]</span></p>\r\n<h2 id=\"ç¤ºä¾‹ä»£ç -5\">ç¤ºä¾‹ä»£ç ï¼š</h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> numpy <span class=\"keyword\">import</span> genfromtxt</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> linear_model</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¯»å…¥æ•°æ® </span></span><br><span class=\"line\">data = genfromtxt(<span class=\"string\">r&quot;longley.csv&quot;</span>,delimiter=<span class=\"string\">&#x27;,&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ‡åˆ†æ•°æ®</span></span><br><span class=\"line\">x_data = data[<span class=\"number\">1</span>:,<span class=\"number\">2</span>:]</span><br><span class=\"line\">y_data = data[<span class=\"number\">1</span>:,<span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"built_in\">print</span>(x_data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶æ‹Ÿåˆæ¨¡å‹</span></span><br><span class=\"line\">model = linear_model.ElasticNetCV()</span><br><span class=\"line\">model.fit(x_data, y_data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å¼¹æ€§ç½‘ç³»æ•°</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(model.alpha_)</span><br><span class=\"line\"><span class=\"comment\"># ç›¸å…³ç³»æ•°</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(model.coef_)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># é¢„æµ‹</span></span><br><span class=\"line\">model.predict(x_data[-<span class=\"number\">2</span>,np.newaxis])</span><br></pre></td></tr></table></figure>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Rt411q7WJ?p=23&amp;vd_source=fe8e916be2bd597efffd8dfd95249141\">çº¿æ€§å›å½’åŠå…¶éçº¿æ€§å›å½’</a></p>\r\n",
            "tags": [
                "Python",
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/OpenCV/%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB%E6%A1%88%E4%BE%8B/",
            "url": "https://liujk6525.github.io/OpenCV/%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB%E6%A1%88%E4%BE%8B/",
            "title": "äººè„¸è¯†åˆ«æ¡ˆä¾‹",
            "date_published": "2023-05-20T06:16:48.000Z",
            "content_html": "<h1 id=\"åŸºç¡€\">åŸºç¡€</h1>\r\n<p>ä½¿ç”¨æœºå™¨å­¦ä¹ çš„æ–¹æ³•å®Œæˆäººè„¸æ£€æµ‹ï¼Œé¦–å…ˆéœ€è¦å¤§é‡çš„æ­£æ ·æœ¬å›¾åƒï¼ˆé¢éƒ¨å›¾åƒï¼‰å’Œè´Ÿæ ·æœ¬å›¾åƒï¼ˆä¸å«é¢éƒ¨çš„å›¾åƒï¼‰æ¥è®­ç»ƒåˆ†ç±»å™¨ã€‚æˆ‘ä»¬éœ€è¦ä»å…¶ä¸­æå–ç‰¹å¾ã€‚ä¸‹å›¾ä¸­çš„ Haar ç‰¹å¾ä¼šè¢«ä½¿ç”¨ï¼Œå°±åƒæˆ‘ä»¬çš„å·ç§¯æ ¸ï¼Œæ¯ä¸€ä¸ªç‰¹å¾æ˜¯ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼ç­‰äºé»‘è‰²çŸ©å½¢ä¸­çš„åƒç´ å€¼ä¹‹åå‡å»ç™½è‰²çŸ©å½¢ä¸­çš„åƒç´ å€¼ä¹‹å’Œã€‚</p>\r\n<span id=\"more\"></span>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191014152218924-1684563500129-1.png\"  style=\"zoom:67%;\" /></p>\r\n<p>Haarç‰¹å¾å€¼åæ˜ äº†å›¾åƒçš„ç°åº¦å˜åŒ–æƒ…å†µã€‚ä¾‹å¦‚ï¼šè„¸éƒ¨çš„ä¸€äº›ç‰¹å¾èƒ½ç”±çŸ©å½¢ç‰¹å¾ç®€å•çš„æè¿°ï¼Œçœ¼ç›è¦æ¯”è„¸é¢Šé¢œè‰²è¦æ·±ï¼Œé¼»æ¢ä¸¤ä¾§æ¯”é¼»æ¢é¢œè‰²è¦æ·±ï¼Œå˜´å·´æ¯”å‘¨å›´é¢œè‰²è¦æ·±ç­‰ã€‚</p>\r\n<p>Haarç‰¹å¾å¯ç”¨äºäºå›¾åƒä»»æ„ä½ç½®ï¼Œå¤§å°ä¹Ÿå¯ä»¥ä»»æ„æ”¹å˜ï¼Œæ‰€ä»¥çŸ©å½¢ç‰¹å¾å€¼æ˜¯çŸ©å½¢æ¨¡ç‰ˆç±»åˆ«ã€çŸ©å½¢ä½ç½®å’ŒçŸ©å½¢å¤§å°è¿™ä¸‰ä¸ªå› ç´ çš„å‡½æ•°ã€‚æ•…ç±»åˆ«ã€å¤§å°å’Œä½ç½®çš„å˜åŒ–ï¼Œä½¿å¾—å¾ˆå°çš„æ£€æµ‹çª—å£å«æœ‰éå¸¸å¤šçš„çŸ©å½¢ç‰¹å¾ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191014152716626-1684563652425-11.png\"  style=\"zoom: 50%;\" /></p>\r\n<p>å¾—åˆ°å›¾åƒçš„ç‰¹å¾åï¼Œè®­ç»ƒä¸€ä¸ªå†³ç­–æ ‘æ„å»ºçš„adaboostçº§è”å†³ç­–å™¨æ¥è¯†åˆ«æ˜¯å¦ä¸ºäººè„¸ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191014160504382-1684563672078-13.png\"  style=\"zoom:50%;\" /></p>\r\n<p>OpenCVä¸­è‡ªå¸¦å·²è®­ç»ƒå¥½çš„æ£€æµ‹å™¨ï¼ŒåŒ…æ‹¬é¢éƒ¨ï¼Œçœ¼ç›ï¼ŒçŒ«è„¸ç­‰ï¼Œéƒ½ä¿å­˜åœ¨XMLæ–‡ä»¶ä¸­ï¼Œåˆ©ç”¨è¿™äº›æ–‡ä»¶æ¥è¯†åˆ«äººè„¸ï¼Œçœ¼ç›ç­‰ã€‚</p>\r\n<ol type=\"1\">\r\n<li><p>è¯»å–å›¾ç‰‡ï¼Œå¹¶è½¬æ¢æˆç°åº¦å›¾</p></li>\r\n<li><p>å®ä¾‹åŒ–äººè„¸å’Œçœ¼ç›æ£€æµ‹çš„åˆ†ç±»å™¨å¯¹è±¡</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å®ä¾‹åŒ–çº§è”åˆ†ç±»å™¨</span></span><br><span class=\"line\">classifier =cv.CascadeClassifier( <span class=\"string\">&quot;haarcascade_frontalface_default.xml&quot;</span> ) </span><br><span class=\"line\"><span class=\"comment\"># åŠ è½½åˆ†ç±»å™¨</span></span><br><span class=\"line\">classifier.load(<span class=\"string\">&#x27;haarcascade_frontalface_default.xml&#x27;</span>)</span><br></pre></td></tr></table></figure></li>\r\n<li><p>è¿›è¡Œäººè„¸å’Œçœ¼ç›çš„æ£€æµ‹</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rect = classifier.detectMultiScale(gray, scaleFactor, minNeighbors, minSize,maxsize)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>Gray: è¦è¿›è¡Œæ£€æµ‹çš„äººè„¸å›¾åƒ</li>\r\n<li>scaleFactor: å‰åä¸¤æ¬¡æ‰«æä¸­ï¼Œæœç´¢çª—å£çš„æ¯”ä¾‹ç³»æ•°</li>\r\n<li>minneighborsï¼šç›®æ ‡è‡³å°‘è¢«æ£€æµ‹åˆ°minNeighborsæ¬¡æ‰ä¼šè¢«è®¤ä¸ºæ˜¯ç›®æ ‡</li>\r\n<li>minsizeå’Œmaxsize: ç›®æ ‡çš„æœ€å°å°ºå¯¸å’Œæœ€å¤§å°ºå¯¸</li>\r\n</ul></li>\r\n<li><p>å°†æ£€æµ‹ç»“æœç»˜åˆ¶å‡ºæ¥å°±å¯ä»¥äº†ã€‚</p></li>\r\n</ol>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1.ä»¥ç°åº¦å›¾çš„å½¢å¼è¯»å–å›¾ç‰‡</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&quot;16.jpg&quot;</span>)</span><br><span class=\"line\">gray = cv.cvtColor(img,cv.COLOR_BGR2GRAY)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.å®ä¾‹åŒ–OpenCVäººè„¸å’Œçœ¼ç›è¯†åˆ«çš„åˆ†ç±»å™¨ </span></span><br><span class=\"line\">face_cas = cv.CascadeClassifier( <span class=\"string\">&quot;haarcascade_frontalface_default.xml&quot;</span> ) </span><br><span class=\"line\">face_cas.load(<span class=\"string\">&#x27;haarcascade_frontalface_default.xml&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">eyes_cas = cv.CascadeClassifier(<span class=\"string\">&quot;haarcascade_eye.xml&quot;</span>)</span><br><span class=\"line\">eyes_cas.load(<span class=\"string\">&quot;haarcascade_eye.xml&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.è°ƒç”¨è¯†åˆ«äººè„¸ </span></span><br><span class=\"line\">faceRects = face_cas.detectMultiScale( gray, scaleFactor=<span class=\"number\">1.2</span>, minNeighbors=<span class=\"number\">3</span>, minSize=(<span class=\"number\">32</span>, <span class=\"number\">32</span>)) </span><br><span class=\"line\"><span class=\"keyword\">for</span> faceRect <span class=\"keyword\">in</span> faceRects: </span><br><span class=\"line\">    x, y, w, h = faceRect </span><br><span class=\"line\">    <span class=\"comment\"># æ¡†å‡ºäººè„¸ </span></span><br><span class=\"line\">    cv.rectangle(img, (x, y), (x + h, y + w),(<span class=\"number\">0</span>,<span class=\"number\">255</span>,<span class=\"number\">0</span>), <span class=\"number\">3</span>) </span><br><span class=\"line\">    <span class=\"comment\"># 4.åœ¨è¯†åˆ«å‡ºçš„äººè„¸ä¸­è¿›è¡Œçœ¼ç›çš„æ£€æµ‹</span></span><br><span class=\"line\">    roi_color = img[y:y+h, x:x+w]</span><br><span class=\"line\">    roi_gray = gray[y:y+h, x:x+w]</span><br><span class=\"line\">    eyes = eyes_cas.detectMultiScale(roi_gray) </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ex,ey,ew,eh) <span class=\"keyword\">in</span> eyes:</span><br><span class=\"line\">        cv.rectangle(roi_color,(ex,ey),(ex+ew,ey+eh),(<span class=\"number\">0</span>,<span class=\"number\">255</span>,<span class=\"number\">0</span>),<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"comment\"># 5. æ£€æµ‹ç»“æœçš„ç»˜åˆ¶</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">8</span>,<span class=\"number\">6</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.imshow(img[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;æ£€æµ‹ç»“æœ&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/yangzi2.jpeg\"  style=\"zoom:67%;\" /></p>\r\n<p>åœ¨è§†é¢‘ä¸­å¯¹äººè„¸è¿›è¡Œæ£€æµ‹ï¼š</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1.è¯»å–è§†é¢‘</span></span><br><span class=\"line\">cap = cv.VideoCapture(<span class=\"string\">&quot;movie.mp4&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2.åœ¨æ¯ä¸€å¸§æ•°æ®ä¸­è¿›è¡Œäººè„¸è¯†åˆ«</span></span><br><span class=\"line\"><span class=\"keyword\">while</span>(cap.isOpened()):</span><br><span class=\"line\">    ret, frame = cap.read()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ret==<span class=\"literal\">True</span>:</span><br><span class=\"line\">        gray = cv.cvtColor(frame, cv.COLOR_BGR2GRAY)</span><br><span class=\"line\">        <span class=\"comment\"># 3.å®ä¾‹åŒ–OpenCVäººè„¸è¯†åˆ«çš„åˆ†ç±»å™¨ </span></span><br><span class=\"line\">        face_cas = cv.CascadeClassifier( <span class=\"string\">&quot;haarcascade_frontalface_default.xml&quot;</span> ) </span><br><span class=\"line\">        face_cas.load(<span class=\"string\">&#x27;haarcascade_frontalface_default.xml&#x27;</span>)</span><br><span class=\"line\">        <span class=\"comment\"># 4.è°ƒç”¨è¯†åˆ«äººè„¸ </span></span><br><span class=\"line\">        faceRects = face_cas.detectMultiScale(gray, scaleFactor=<span class=\"number\">1.2</span>, minNeighbors=<span class=\"number\">3</span>, minSize=(<span class=\"number\">32</span>, <span class=\"number\">32</span>)) </span><br><span class=\"line\">        <span class=\"keyword\">for</span> faceRect <span class=\"keyword\">in</span> faceRects: </span><br><span class=\"line\">            x, y, w, h = faceRect </span><br><span class=\"line\">            <span class=\"comment\"># æ¡†å‡ºäººè„¸ </span></span><br><span class=\"line\">            cv.rectangle(frame, (x, y), (x + h, y + w),(<span class=\"number\">0</span>,<span class=\"number\">255</span>,<span class=\"number\">0</span>), <span class=\"number\">3</span>) </span><br><span class=\"line\">        cv.imshow(<span class=\"string\">&quot;frame&quot;</span>,frame)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> cv.waitKey(<span class=\"number\">1</span>) &amp; <span class=\"number\">0xFF</span> == <span class=\"built_in\">ord</span>(<span class=\"string\">&#x27;q&#x27;</span>):</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\"><span class=\"comment\"># 5. é‡Šæ”¾èµ„æº</span></span><br><span class=\"line\">cap.release()  </span><br><span class=\"line\">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>\r\n",
            "tags": [
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/OpenCV/%E8%A7%86%E9%A2%91%E8%BF%BD%E8%B8%AA/",
            "url": "https://liujk6525.github.io/OpenCV/%E8%A7%86%E9%A2%91%E8%BF%BD%E8%B8%AA/",
            "title": "è§†é¢‘è¿½è¸ª",
            "date_published": "2023-05-20T05:31:48.000Z",
            "content_html": "<h1 id=\"è§†é¢‘è¯»å†™\">è§†é¢‘è¯»å†™</h1>\r\n<h2 id=\"è¯»å–è§†é¢‘\">è¯»å–è§†é¢‘</h2>\r\n<p><strong>åˆ›å»ºè¯»å–è§†é¢‘çš„å¯¹è±¡</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cap = cv.VideoCapture(filepath)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>filepathï¼šè§†é¢‘æ–‡ä»¶è·¯å¾„</p>\r\n<span id=\"more\"></span></li>\r\n</ul>\r\n<p><strong>è·å–è§†é¢‘çš„æŸäº›å±æ€§</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">retval = cap.get(propId)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>propId: ä»0åˆ°18çš„æ•°å­—ï¼Œæ¯ä¸ªæ•°å­—è¡¨ç¤ºè§†é¢‘çš„å±æ€§</p>\r\n<p>å¸¸ç”¨å±æ€§æœ‰ï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191016164053661-1684560896151-1.png\"  style=\"zoom: 33%;\" /></p></li>\r\n</ul>\r\n<p><strong>ä¿®æ”¹è§†é¢‘çš„å±æ€§ä¿¡æ¯</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cap.<span class=\"built_in\">set</span>(propIdï¼Œvalue)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>proidï¼šå±æ€§çš„ç´¢å¼•ï¼Œä¸ä¸Šé¢çš„è¡¨æ ¼ç›¸å¯¹åº”</li>\r\n<li>valueï¼šä¿®æ”¹åçš„å±æ€§å€¼</li>\r\n</ul>\r\n<p><strong>åˆ¤æ–­å›¾åƒæ˜¯å¦è¯»å–æˆåŠŸ</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">isornot = cap.isOpened()</span><br></pre></td></tr></table></figure>\r\n<ul>\r\n<li>è‹¥è¯»å–æˆåŠŸåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›False</li>\r\n</ul>\r\n<p><strong>è·å–è§†é¢‘çš„ä¸€å¸§å›¾åƒ</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ret, frame = cap.read()</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>retï¼šè‹¥è·å–æˆåŠŸè¿”å›Trueï¼Œè·å–å¤±è´¥ï¼Œè¿”å›False</li>\r\n<li>frameï¼šè·å–åˆ°çš„æŸä¸€å¸§çš„å›¾åƒ</li>\r\n</ul>\r\n<p><strong>å°†è§†é¢‘é‡Šæ”¾æ‰</strong></p>\r\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cap.realease()</span><br></pre></td></tr></table></figure>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"comment\"># 1.è·å–è§†é¢‘å¯¹è±¡</span></span><br><span class=\"line\">cap = cv.VideoCapture(<span class=\"string\">&#x27;DOG.wmv&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2.åˆ¤æ–­æ˜¯å¦è¯»å–æˆåŠŸ</span></span><br><span class=\"line\"><span class=\"keyword\">while</span>(cap.isOpened()):</span><br><span class=\"line\">    <span class=\"comment\"># 3.è·å–æ¯ä¸€å¸§å›¾åƒ</span></span><br><span class=\"line\">    ret, frame = cap.read()</span><br><span class=\"line\">    <span class=\"comment\"># 4. è·å–æˆåŠŸæ˜¾ç¤ºå›¾åƒ</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ret == <span class=\"literal\">True</span>:</span><br><span class=\"line\">        cv.imshow(<span class=\"string\">&#x27;frame&#x27;</span>,frame)</span><br><span class=\"line\">    <span class=\"comment\"># 5.æ¯ä¸€å¸§é—´éš”ä¸º25ms</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> cv.waitKey(<span class=\"number\">25</span>) &amp; <span class=\"number\">0xFF</span> == <span class=\"built_in\">ord</span>(<span class=\"string\">&#x27;q&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\"><span class=\"comment\"># 6.é‡Šæ”¾è§†é¢‘å¯¹è±¡</span></span><br><span class=\"line\">cap.release()</span><br><span class=\"line\">cv.destoryAllwindows()</span><br></pre></td></tr></table></figure>\r\n<h1 id=\"ä¿å­˜è§†é¢‘\">ä¿å­˜è§†é¢‘</h1>\r\n<p><strong>åˆ›å»ºè§†é¢‘å†™å…¥çš„å¯¹è±¡</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">out = cv2.VideoWriter(filename,fourcc, fps, frameSize)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>filenameï¼šè§†é¢‘ä¿å­˜çš„ä½ç½®</li>\r\n<li>fourccï¼šæŒ‡å®šè§†é¢‘ç¼–è§£ç å™¨çš„4å­—èŠ‚ä»£ç </li>\r\n<li>fpsï¼šå¸§ç‡</li>\r\n<li>frameSizeï¼šå¸§å¤§å°</li>\r\n</ul>\r\n<p><strong>è®¾ç½®è§†é¢‘çš„ç¼–è§£ç å™¨</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">retval = cv2.VideoWriter_fourcc( c1, c2, c3, c4 )</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>c1,c2,c3,c4ï¼šæ˜¯è§†é¢‘ç¼–è§£ç å™¨çš„4å­—èŠ‚ä»£ç ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p>\r\n<ul>\r\n<li><p>åœ¨Windowsä¸­ï¼šDIVXï¼ˆ.aviï¼‰</p></li>\r\n<li><p>åœ¨OSä¸­ï¼šMJPGï¼ˆ.mp4ï¼‰ï¼ŒDIVXï¼ˆ.aviï¼‰ï¼ŒX264ï¼ˆ.mkvï¼‰ã€‚</p></li>\r\n</ul></li>\r\n</ul>\r\n<p><strong>è·å–è§†é¢‘çš„ä¸€å¸§å›¾åƒ</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ret, frame = cap.read()</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>retï¼šè‹¥è·å–æˆåŠŸè¿”å›Trueï¼Œè·å–å¤±è´¥ï¼Œè¿”å›False</li>\r\n<li>frameï¼šè·å–åˆ°çš„æŸä¸€å¸§çš„å›¾åƒ</li>\r\n</ul>\r\n<p><strong>æŸä¸€å¸§å›¾åƒå†™å…¥è§†é¢‘</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">out.write()</span><br></pre></td></tr></table></figure>\r\n<p><strong>é‡Šæ”¾èµ„æº</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cap.release()</span><br><span class=\"line\">out.release()</span><br></pre></td></tr></table></figure>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -1\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 1. è¯»å–è§†é¢‘</span></span><br><span class=\"line\">cap = cv.VideoCapture(<span class=\"string\">&quot;DOG.wmv&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2. è·å–å›¾åƒçš„å±æ€§ï¼ˆå®½å’Œé«˜ï¼Œï¼‰,å¹¶å°†å…¶è½¬æ¢ä¸ºæ•´æ•°</span></span><br><span class=\"line\">frame_width = <span class=\"built_in\">int</span>(cap.get(<span class=\"number\">3</span>))</span><br><span class=\"line\">frame_height = <span class=\"built_in\">int</span>(cap.get(<span class=\"number\">4</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3. åˆ›å»ºä¿å­˜è§†é¢‘çš„å¯¹è±¡ï¼Œè®¾ç½®ç¼–ç æ ¼å¼ï¼Œå¸§ç‡ï¼Œå›¾åƒçš„å®½é«˜ç­‰</span></span><br><span class=\"line\">out = cv.VideoWriter(<span class=\"string\">&#x27;outpy.avi&#x27;</span>,cv.VideoWriter_fourcc(<span class=\"string\">&#x27;M&#x27;</span>,<span class=\"string\">&#x27;J&#x27;</span>,<span class=\"string\">&#x27;P&#x27;</span>,<span class=\"string\">&#x27;G&#x27;</span>), <span class=\"number\">10</span>, (frame_width,frame_height))</span><br><span class=\"line\"><span class=\"keyword\">while</span>(<span class=\"literal\">True</span>):</span><br><span class=\"line\">    <span class=\"comment\"># 4.è·å–è§†é¢‘ä¸­çš„æ¯ä¸€å¸§å›¾åƒ</span></span><br><span class=\"line\">    ret, frame = cap.read()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ret == <span class=\"literal\">True</span>: </span><br><span class=\"line\">        <span class=\"comment\"># 5.å°†æ¯ä¸€å¸§å›¾åƒå†™å…¥åˆ°è¾“å‡ºæ–‡ä»¶ä¸­</span></span><br><span class=\"line\">        out.write(frame)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">break</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 6.é‡Šæ”¾èµ„æº</span></span><br><span class=\"line\">cap.release()</span><br><span class=\"line\">out.release()</span><br><span class=\"line\">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>\r\n<h1 id=\"è§†é¢‘è¿½è¸ª\">è§†é¢‘è¿½è¸ª</h1>\r\n<h2 id=\"meanshiftç®—æ³•\"><code>meanshiftç®—æ³•</code></h2>\r\n<p>å‡è®¾æœ‰ä¸€å †ç‚¹é›†ï¼Œè¿˜æœ‰ä¸€ä¸ªå°çš„çª—å£ï¼Œè¿™ä¸ªçª—å£å¯èƒ½æ˜¯åœ†å½¢çš„ï¼Œç°åœ¨ä½ å¯èƒ½è¦ç§»åŠ¨è¿™ä¸ªçª—å£åˆ°ç‚¹é›†å¯†åº¦æœ€å¤§çš„åŒºåŸŸå½“ä¸­ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image1-0784863-1684561795932-3.jpg\" style=\"zoom:67%;\" /></p>\r\n<p>æœ€å¼€å§‹çš„çª—å£æ˜¯è“è‰²åœ†ç¯çš„åŒºåŸŸï¼Œå‘½åä¸º<span class=\"math inline\">\\(C1\\)</span>ã€‚è“è‰²åœ†ç¯çš„åœ†å¿ƒç”¨ä¸€ä¸ªè“è‰²çš„çŸ©å½¢æ ‡æ³¨ï¼Œå‘½åä¸º<span class=\"math inline\">\\(C1_o\\)</span>ã€‚è€Œçª—å£ä¸­æ‰€æœ‰ç‚¹çš„ç‚¹é›†æ„æˆçš„è´¨å¿ƒåœ¨è“è‰²åœ†å½¢ç‚¹<span class=\"math inline\">\\(C1_r\\)</span>å¤„ï¼Œæ˜¾ç„¶åœ†ç¯çš„å½¢å¿ƒå’Œè´¨å¿ƒå¹¶ä¸é‡åˆã€‚æ‰€ä»¥ï¼Œç§»åŠ¨è“è‰²çš„çª—å£ï¼Œä½¿å¾—å½¢å¿ƒä¸ä¹‹å‰å¾—åˆ°çš„è´¨å¿ƒé‡åˆã€‚åœ¨æ–°ç§»åŠ¨åçš„åœ†ç¯çš„åŒºåŸŸå½“ä¸­å†æ¬¡å¯»æ‰¾åœ†ç¯å½“ä¸­æ‰€åŒ…å›´ç‚¹é›†çš„è´¨å¿ƒï¼Œç„¶åå†æ¬¡ç§»åŠ¨ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå½¢å¿ƒå’Œè´¨å¿ƒæ˜¯ä¸é‡åˆçš„ã€‚ä¸æ–­æ‰§è¡Œä¸Šé¢çš„ç§»åŠ¨è¿‡ç¨‹ï¼Œç›´åˆ°å½¢å¿ƒå’Œè´¨å¿ƒå¤§è‡´é‡åˆç»“æŸã€‚ è¿™æ ·ï¼Œæœ€ååœ†å½¢çš„çª—å£ä¼šè½åˆ°åƒç´ åˆ†å¸ƒæœ€å¤§çš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ç»¿è‰²åœˆï¼Œå‘½åä¸º<span class=\"math inline\">\\(C2\\)</span>ã€‚</p>\r\n<ol type=\"1\">\r\n<li><p>é¦–å…ˆåœ¨å›¾åƒä¸Šé€‰å®šä¸€ä¸ªç›®æ ‡åŒºåŸŸ</p></li>\r\n<li><p>è®¡ç®—é€‰å®šåŒºåŸŸçš„ç›´æ–¹å›¾åˆ†å¸ƒï¼Œä¸€èˆ¬æ˜¯<code>HSV</code>è‰²å½©ç©ºé—´çš„ç›´æ–¹å›¾ã€‚</p></li>\r\n<li><p>å¯¹ä¸‹ä¸€å¸§å›¾åƒ<span class=\"math inline\">\\(b\\)</span>åŒæ ·è®¡ç®—ç›´æ–¹å›¾åˆ†å¸ƒã€‚</p></li>\r\n<li><p>è®¡ç®—å›¾åƒ<span class=\"math inline\">\\(b\\)</span>å½“ä¸­ä¸é€‰å®šåŒºåŸŸç›´æ–¹å›¾åˆ†å¸ƒæœ€ä¸ºç›¸ä¼¼çš„åŒºåŸŸï¼Œä½¿ç”¨<code>meanshiftç®—æ³•</code>å°†é€‰å®šåŒºåŸŸæ²¿ç€æœ€ä¸ºç›¸ä¼¼çš„éƒ¨åˆ†è¿›è¡Œç§»åŠ¨ï¼Œç›´åˆ°æ‰¾åˆ°æœ€ç›¸ä¼¼çš„åŒºåŸŸï¼Œä¾¿å®Œæˆäº†åœ¨å›¾åƒ<span class=\"math inline\">\\(b\\)</span>ä¸­çš„ç›®æ ‡è¿½è¸ªã€‚</p></li>\r\n<li><p>é‡å¤3ã€4çš„è¿‡ç¨‹ï¼Œå°±å®Œæˆæ•´ä¸ªè§†é¢‘ç›®æ ‡è¿½è¸ªã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image2-0785334-1684562460307-7.gif\"  style=\"zoom: 80%;\" /></p></li>\r\n</ol>\r\n<p>é€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨<strong>ç›´æ–¹å›¾åå‘æŠ•å½±</strong>å¾—åˆ°çš„å›¾åƒå’Œç¬¬ä¸€å¸§ç›®æ ‡å¯¹è±¡çš„èµ·å§‹ä½ç½®ï¼Œç›®æ ‡å¯¹è±¡çš„ç§»åŠ¨ä¼šåæ˜ åˆ°ç›´æ–¹å›¾åå‘æŠ•å½±å›¾ä¸­ï¼Œ<code>meanshift ç®—æ³•</code>æŠŠçª—å£ç§»åŠ¨åˆ°åå‘æŠ•å½±å›¾åƒä¸­ç°åº¦å¯†åº¦æœ€å¤§çš„åŒºåŸŸã€‚</p>\r\n<p>ç›´æ–¹å›¾åå‘æŠ•å½±çš„æµç¨‹æ˜¯ï¼š</p>\r\n<ol type=\"1\">\r\n<li>å‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼ <span class=\"math inline\">\\(100\\times100\\)</span>çš„è¾“å…¥å›¾åƒï¼Œæœ‰ä¸€å¼ <span class=\"math inline\">\\(10\\times10\\)</span>çš„æ¨¡æ¿å›¾åƒï¼Œ</li>\r\n<li>ä»è¾“å…¥å›¾åƒçš„å·¦ä¸Šè§’<span class=\"math inline\">\\((0,0)\\)</span>å¼€å§‹ï¼Œåˆ‡å‰²ä¸€å—<span class=\"math inline\">\\((0,0)\\)</span>è‡³<span class=\"math inline\">\\((10,10)\\)</span>çš„ä¸´æ—¶å›¾åƒï¼Œ</li>\r\n<li>ç”Ÿæˆä¸´æ—¶å›¾åƒçš„ç›´æ–¹å›¾ï¼Œ</li>\r\n<li>ç”¨ä¸´æ—¶å›¾åƒçš„ç›´æ–¹å›¾å’Œæ¨¡æ¿å›¾åƒçš„ç›´æ–¹å›¾å¯¹æ¯”ï¼Œå¯¹æ¯”ç»“æœè®°ä¸º<span class=\"math inline\">\\(c\\)</span>ï¼Œ</li>\r\n<li>ç›´æ–¹å›¾å¯¹æ¯”ç»“æœ<span class=\"math inline\">\\(c\\)</span>ï¼Œå°±æ˜¯ç»“æœå›¾åƒ<span class=\"math inline\">\\((0,0)\\)</span>å¤„çš„åƒç´ å€¼ï¼Œ</li>\r\n<li>åˆ‡å‰²è¾“å…¥å›¾åƒä»<span class=\"math inline\">\\((0,1)\\)</span>è‡³<span class=\"math inline\">\\((10,11)\\)</span>çš„ä¸´æ—¶å›¾åƒï¼Œå¯¹æ¯”ç›´æ–¹å›¾ï¼Œå¹¶è®°å½•åˆ°ç»“æœå›¾åƒï¼Œ</li>\r\n<li>é‡å¤1ï½5æ­¥ç›´åˆ°è¾“å…¥å›¾åƒçš„å³ä¸‹è§’ï¼Œå°±å½¢æˆäº†ç›´æ–¹å›¾çš„åå‘æŠ•å½±ã€‚</li>\r\n</ol>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.meanShift(probImage, window, criteria)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>probImage: ROIåŒºåŸŸï¼Œå³ç›®æ ‡çš„ç›´æ–¹å›¾çš„åå‘æŠ•å½±</li>\r\n<li>windowï¼š åˆå§‹æœç´¢çª—å£ï¼Œå°±æ˜¯å®šä¹‰ROIçš„rect</li>\r\n<li>criteria: ç¡®å®šçª—å£æœç´¢åœæ­¢çš„å‡†åˆ™ï¼Œä¸»è¦æœ‰è¿­ä»£æ¬¡æ•°è¾¾åˆ°è®¾ç½®çš„æœ€å¤§å€¼ï¼Œçª—å£ä¸­å¿ƒçš„æ¼‚ç§»å€¼å¤§äºæŸä¸ªè®¾å®šçš„é™å€¼ç­‰ã€‚</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -2\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"comment\"># 1.è·å–å›¾åƒ</span></span><br><span class=\"line\">cap = cv.VideoCapture(<span class=\"string\">&#x27;DOG.wmv&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.è·å–ç¬¬ä¸€å¸§å›¾åƒï¼Œå¹¶æŒ‡å®šç›®æ ‡ä½ç½®</span></span><br><span class=\"line\">ret,frame = cap.read()</span><br><span class=\"line\"><span class=\"comment\"># 2.1 ç›®æ ‡ä½ç½®ï¼ˆè¡Œï¼Œé«˜ï¼Œåˆ—ï¼Œå®½ï¼‰</span></span><br><span class=\"line\">r,h,c,w = <span class=\"number\">197</span>,<span class=\"number\">141</span>,<span class=\"number\">0</span>,<span class=\"number\">208</span>  </span><br><span class=\"line\">track_window = (c,r,w,h)</span><br><span class=\"line\"><span class=\"comment\"># 2.2 æŒ‡å®šç›®æ ‡çš„æ„Ÿå…´è¶£åŒºåŸŸ</span></span><br><span class=\"line\">roi = frame[r:r+h, c:c+w]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3. è®¡ç®—ç›´æ–¹å›¾</span></span><br><span class=\"line\"><span class=\"comment\"># 3.1 è½¬æ¢è‰²å½©ç©ºé—´ï¼ˆHSVï¼‰</span></span><br><span class=\"line\">hsv_roi =  cv.cvtColor(roi, cv.COLOR_BGR2HSV)</span><br><span class=\"line\"><span class=\"comment\"># 3.2 å»é™¤ä½äº®åº¦çš„å€¼</span></span><br><span class=\"line\"><span class=\"comment\"># mask = cv.inRange(hsv_roi, np.array((0., 60.,32.)), np.array((180.,255.,255.)))</span></span><br><span class=\"line\"><span class=\"comment\"># 3.3 è®¡ç®—ç›´æ–¹å›¾</span></span><br><span class=\"line\">roi_hist = cv.calcHist([hsv_roi],[<span class=\"number\">0</span>],<span class=\"literal\">None</span>,[<span class=\"number\">180</span>],[<span class=\"number\">0</span>,<span class=\"number\">180</span>])</span><br><span class=\"line\"><span class=\"comment\"># 3.4 å½’ä¸€åŒ–</span></span><br><span class=\"line\">cv.normalize(roi_hist,roi_hist,<span class=\"number\">0</span>,<span class=\"number\">255</span>,cv.NORM_MINMAX)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4. ç›®æ ‡è¿½è¸ª</span></span><br><span class=\"line\"><span class=\"comment\"># 4.1 è®¾ç½®çª—å£æœç´¢ç»ˆæ­¢æ¡ä»¶ï¼šæœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œçª—å£ä¸­å¿ƒæ¼‚ç§»æœ€å°å€¼</span></span><br><span class=\"line\">term_crit = ( cv.TERM_CRITERIA_EPS | cv.TERM_CRITERIA_COUNT, <span class=\"number\">10</span>, <span class=\"number\">1</span> )</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span>(<span class=\"literal\">True</span>):</span><br><span class=\"line\">    <span class=\"comment\"># 4.2 è·å–æ¯ä¸€å¸§å›¾åƒ</span></span><br><span class=\"line\">    ret ,frame = cap.read()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ret == <span class=\"literal\">True</span>:</span><br><span class=\"line\">        <span class=\"comment\"># 4.3 è®¡ç®—ç›´æ–¹å›¾çš„åå‘æŠ•å½±</span></span><br><span class=\"line\">        hsv = cv.cvtColor(frame, cv.COLOR_BGR2HSV)</span><br><span class=\"line\">        dst = cv.calcBackProject([hsv],[<span class=\"number\">0</span>],roi_hist,[<span class=\"number\">0</span>,<span class=\"number\">180</span>],<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 4.4 è¿›è¡Œmeanshiftè¿½è¸ª</span></span><br><span class=\"line\">        ret, track_window = cv.meanShift(dst, track_window, term_crit)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 4.5 å°†è¿½è¸ªçš„ä½ç½®ç»˜åˆ¶åœ¨è§†é¢‘ä¸Šï¼Œå¹¶è¿›è¡Œæ˜¾ç¤º</span></span><br><span class=\"line\">        x,y,w,h = track_window</span><br><span class=\"line\">        img2 = cv.rectangle(frame, (x,y), (x+w,y+h), <span class=\"number\">255</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\">        cv.imshow(<span class=\"string\">&#x27;frame&#x27;</span>,img2)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> cv.waitKey(<span class=\"number\">60</span>) &amp; <span class=\"number\">0xFF</span> == <span class=\"built_in\">ord</span>(<span class=\"string\">&#x27;q&#x27;</span>):</span><br><span class=\"line\">            <span class=\"keyword\">break</span>        </span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\"><span class=\"comment\"># 5. èµ„æºé‡Šæ”¾        </span></span><br><span class=\"line\">cap.release()</span><br><span class=\"line\">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191011180244485-1684561868819-5.png\"  style=\"zoom: 50%;\" /></p>\r\n<h1 id=\"camshiftç®—æ³•\">Camshiftç®—æ³•</h1>\r\n<p>æ£€æµ‹çš„çª—å£çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œè€Œç‹—ç‹—ç”±è¿‘åŠè¿œæ˜¯ä¸€ä¸ªé€æ¸å˜å°çš„è¿‡ç¨‹ï¼Œå›ºå®šçš„çª—å£æ˜¯ä¸åˆé€‚çš„ã€‚æ‰€ä»¥éœ€è¦æ ¹æ®ç›®æ ‡çš„å¤§å°å’Œè§’åº¦æ¥å¯¹çª—å£çš„å¤§å°å’Œè§’åº¦è¿›è¡Œä¿®æ­£ã€‚</p>\r\n<p>è¿ç»­è‡ªé€‚åº”<code>MeanShift</code>(Continuously Adaptive Mean-Shiftï¼Œ<a href=\"https://baike.baidu.com/item/Camshift/5302311\">Camshift</a>)ç®—æ³•æ˜¯å¯¹<code>MeanShiftç®—æ³•</code>çš„æ”¹è¿›ç®—æ³•ï¼Œå¯éšç€è·Ÿè¸ªç›®æ ‡çš„å¤§å°å˜åŒ–å®æ—¶è°ƒæ•´æœç´¢çª—å£çš„å¤§å°ï¼Œå…·æœ‰è¾ƒå¥½çš„è·Ÿè¸ªæ•ˆæœã€‚</p>\r\n<p>é¦–å…ˆåº”ç”¨<code>meanshift</code>ï¼Œä¸€æ—¦<code>meanshift</code>æ”¶æ•›ï¼Œå®ƒå°±ä¼šæ›´æ–°çª—å£çš„å¤§å°ï¼Œè¿˜è®¡ç®—æœ€ä½³æ‹Ÿåˆæ¤­åœ†çš„æ–¹å‘ï¼Œä»è€Œæ ¹æ®ç›®æ ‡çš„ä½ç½®å’Œå¤§å°æ›´æ–°æœç´¢çª—å£ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image4-1684563103560-9.gif\"  style=\"zoom: 80%;\" /></p>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -3\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"comment\"># 1.è·å–å›¾åƒ</span></span><br><span class=\"line\">cap = cv.VideoCapture(<span class=\"string\">&#x27;DOG.wmv&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.è·å–ç¬¬ä¸€å¸§å›¾åƒï¼Œå¹¶æŒ‡å®šç›®æ ‡ä½ç½®</span></span><br><span class=\"line\">ret,frame = cap.read()</span><br><span class=\"line\"><span class=\"comment\"># 2.1 ç›®æ ‡ä½ç½®ï¼ˆè¡Œï¼Œé«˜ï¼Œåˆ—ï¼Œå®½ï¼‰</span></span><br><span class=\"line\">r,h,c,w = <span class=\"number\">197</span>,<span class=\"number\">141</span>,<span class=\"number\">0</span>,<span class=\"number\">208</span>  </span><br><span class=\"line\">track_window = (c,r,w,h)</span><br><span class=\"line\"><span class=\"comment\"># 2.2 æŒ‡å®šç›®æ ‡çš„æ„Ÿå…´è¶£åŒºåŸŸ</span></span><br><span class=\"line\">roi = frame[r:r+h, c:c+w]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3. è®¡ç®—ç›´æ–¹å›¾</span></span><br><span class=\"line\"><span class=\"comment\"># 3.1 è½¬æ¢è‰²å½©ç©ºé—´ï¼ˆHSVï¼‰</span></span><br><span class=\"line\">hsv_roi =  cv.cvtColor(roi, cv.COLOR_BGR2HSV)</span><br><span class=\"line\"><span class=\"comment\"># 3.2 å»é™¤ä½äº®åº¦çš„å€¼</span></span><br><span class=\"line\"><span class=\"comment\"># mask = cv.inRange(hsv_roi, np.array((0., 60.,32.)), np.array((180.,255.,255.)))</span></span><br><span class=\"line\"><span class=\"comment\"># 3.3 è®¡ç®—ç›´æ–¹å›¾</span></span><br><span class=\"line\">roi_hist = cv.calcHist([hsv_roi],[<span class=\"number\">0</span>],<span class=\"literal\">None</span>,[<span class=\"number\">180</span>],[<span class=\"number\">0</span>,<span class=\"number\">180</span>])</span><br><span class=\"line\"><span class=\"comment\"># 3.4 å½’ä¸€åŒ–</span></span><br><span class=\"line\">cv.normalize(roi_hist,roi_hist,<span class=\"number\">0</span>,<span class=\"number\">255</span>,cv.NORM_MINMAX)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4. ç›®æ ‡è¿½è¸ª</span></span><br><span class=\"line\"><span class=\"comment\"># 4.1 è®¾ç½®çª—å£æœç´¢ç»ˆæ­¢æ¡ä»¶ï¼šæœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œçª—å£ä¸­å¿ƒæ¼‚ç§»æœ€å°å€¼</span></span><br><span class=\"line\">term_crit = ( cv.TERM_CRITERIA_EPS | cv.TERM_CRITERIA_COUNT, <span class=\"number\">10</span>, <span class=\"number\">1</span> )</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span>(<span class=\"literal\">True</span>):</span><br><span class=\"line\">    <span class=\"comment\"># 4.2 è·å–æ¯ä¸€å¸§å›¾åƒ</span></span><br><span class=\"line\">    ret ,frame = cap.read()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ret == <span class=\"literal\">True</span>:</span><br><span class=\"line\">        <span class=\"comment\"># 4.3 è®¡ç®—ç›´æ–¹å›¾çš„åå‘æŠ•å½±</span></span><br><span class=\"line\">        hsv = cv.cvtColor(frame, cv.COLOR_BGR2HSV)</span><br><span class=\"line\">        dst = cv.calcBackProject([hsv],[<span class=\"number\">0</span>],roi_hist,[<span class=\"number\">0</span>,<span class=\"number\">180</span>],<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 4.4 è¿›è¡Œcamshiftè¿½è¸ª</span></span><br><span class=\"line\">   \t \tret, track_window = cv.CamShift(dst, track_window, term_crit)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># ç»˜åˆ¶è¿½è¸ªç»“æœ</span></span><br><span class=\"line\">        pts = cv.boxPoints(ret)</span><br><span class=\"line\">        pts = np.int0(pts)</span><br><span class=\"line\">        img2 = cv.polylines(frame,[pts],<span class=\"literal\">True</span>, <span class=\"number\">255</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\">        cv.imshow(<span class=\"string\">&#x27;frame&#x27;</span>,img2)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> cv.waitKey(<span class=\"number\">60</span>) &amp; <span class=\"number\">0xFF</span> == <span class=\"built_in\">ord</span>(<span class=\"string\">&#x27;q&#x27;</span>):</span><br><span class=\"line\">            <span class=\"keyword\">break</span>        </span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\"><span class=\"comment\"># 5. èµ„æºé‡Šæ”¾        </span></span><br><span class=\"line\">cap.release()</span><br><span class=\"line\">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>\r\n<h1 id=\"æ€»ç»“\">æ€»ç»“</h1>\r\n<p><code>Meanshift</code>å’Œ<code>camshift</code>ç®—æ³•éƒ½å„æœ‰ä¼˜åŠ¿ï¼Œè‡ªç„¶ä¹Ÿæœ‰åŠ£åŠ¿ï¼š</p>\r\n<ul>\r\n<li><code>Meanshiftç®—æ³•</code>ï¼šç®€å•ï¼Œè¿­ä»£æ¬¡æ•°å°‘ï¼Œä½†æ— æ³•è§£å†³ç›®æ ‡çš„é®æŒ¡é—®é¢˜å¹¶ä¸”ä¸èƒ½é€‚åº”è¿åŠ¨ç›®æ ‡çš„çš„å½¢çŠ¶å’Œå¤§å°å˜åŒ–ã€‚</li>\r\n<li><code>camshiftç®—æ³•</code>ï¼šå¯é€‚åº”è¿åŠ¨ç›®æ ‡çš„å¤§å°å½¢çŠ¶çš„æ”¹å˜ï¼Œå…·æœ‰è¾ƒå¥½çš„è·Ÿè¸ªæ•ˆæœï¼Œä½†å½“èƒŒæ™¯è‰²å’Œç›®æ ‡é¢œè‰²æ¥è¿‘æ—¶ï¼Œå®¹æ˜“ä½¿ç›®æ ‡çš„åŒºåŸŸå˜å¤§ï¼Œæœ€ç»ˆæœ‰å¯èƒ½å¯¼è‡´ç›®æ ‡è·Ÿè¸ªä¸¢å¤±ã€‚</li>\r\n</ul>\r\n",
            "tags": [
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/OpenCV/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B8%8E%E6%8F%8F%E8%BF%B0/",
            "url": "https://liujk6525.github.io/OpenCV/%E5%9B%BE%E5%83%8F%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96%E4%B8%8E%E6%8F%8F%E8%BF%B0/",
            "title": "å›¾åƒç‰¹å¾æå–ä¸æè¿°",
            "date_published": "2023-05-19T15:38:12.000Z",
            "content_html": "<h1 id=\"è§’ç‚¹ç‰¹å¾\">è§’ç‚¹ç‰¹å¾</h1>\r\n<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè“è‰²æ¡†ä¸­çš„åŒºåŸŸæ˜¯ä¸€ä¸ªå¹³é¢ï¼Œæ— è®ºå‘å“ªä¸ªæ–¹å‘ç§»åŠ¨è“è‰²æ¡†ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚å¯¹äºé»‘è‰²æ¡†ä¸­çš„åŒºåŸŸï¼Œå®ƒæ˜¯ä¸€ä¸ªè¾¹ç¼˜ã€‚å¦‚æœæ²¿å‚ç›´æ–¹å‘ç§»åŠ¨ï¼Œå®ƒä¼šæ”¹å˜ã€‚ä½†æ˜¯å¦‚æœæ²¿æ°´å¹³æ–¹å‘ç§»åŠ¨å°±ä¸ä¼šæ”¹å˜ã€‚è€Œçº¢è‰²æ¡†ä¸­çš„è§’ç‚¹ï¼Œæ— è®ºä½ å‘é‚£ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œå¾—åˆ°çš„ç»“æœéƒ½ä¸åŒï¼Œè¿™è¯´æ˜å®ƒæ˜¯å”¯ä¸€çš„ã€‚ æ‰€ä»¥è¯´ï¼Œè§’ç‚¹æ˜¯ä¸€ä¸ªå¥½çš„å›¾åƒç‰¹å¾ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008141945745-1684510965118-1.png\"  style=\"zoom: 80%;\" /></p>\r\n<span id=\"more\"></span>\r\n<h1 id=\"harriså’Œshi-tomasç®—æ³•\">Harriså’ŒShi-Tomasç®—æ³•</h1>\r\n<h2 id=\"harrisè§’ç‚¹æ£€æµ‹\">Harrisè§’ç‚¹æ£€æµ‹</h2>\r\n<p>Harrisè§’ç‚¹æ£€æµ‹çš„æ€æƒ³æ˜¯é€šè¿‡å›¾åƒçš„å±€éƒ¨çš„å°çª—å£è§‚å¯Ÿå›¾åƒï¼Œè§’ç‚¹çš„ç‰¹å¾æ˜¯çª—å£æ²¿ä»»æ„æ–¹å‘ç§»åŠ¨éƒ½ä¼šå¯¼è‡´å›¾åƒç°åº¦çš„æ˜æ˜¾å˜åŒ–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008144647540-1684511183358-3.png\"  style=\"zoom: 33%;\" /></p>\r\n<p>å°†å±€éƒ¨çª—å£å‘å„ä¸ªæ–¹å‘ç§»åŠ¨<span class=\"math inline\">\\((u,v)\\)</span>ï¼Œå¹¶è®¡ç®—æ‰€æœ‰ç°åº¦å·®å¼‚çš„æ€»å’Œï¼Œè¡¨è¾¾å¼å¦‚ä¸‹ï¼š <span class=\"math display\">\\[\r\nE(u,v)=\\sum_{x,y}w(x,y)[I(x+u,y+v)-I(x,y)]^2\r\n\\]</span> å…¶ä¸­<span class=\"math inline\">\\(E(u,v)\\)</span>æ˜¯å±€éƒ¨çª—å£çš„å›¾åƒç°åº¦ï¼Œ<span class=\"math inline\">\\(I(x+u,y+v)\\)</span>æ˜¯å¹³ç§»åçš„å›¾åƒç°åº¦ï¼Œ<span class=\"math inline\">\\(w(x,y)\\)</span>æ˜¯çª—å£å‡½æ•°ï¼Œè¯¥å¯ä»¥æ˜¯çŸ©å½¢çª—å£ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹æ¯ä¸€ä¸ªåƒç´ èµ‹äºˆä¸åŒæƒé‡çš„é«˜æ–¯çª—å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008153014984-1684511417820-5.png\"  style=\"zoom: 50%;\" /></p>\r\n<p>è§’ç‚¹æ£€æµ‹ä¸­ä½¿<span class=\"math inline\">\\(E(u,v)\\)</span>çš„å€¼æœ€å¤§ã€‚åˆ©ç”¨ä¸€é˜¶æ³°å‹’å±•å¼€æœ‰ï¼š <span class=\"math display\">\\[\r\nI(x+u,y+v)=I(x,y)+I_xu+I_yv\r\n\\]</span> å…¶ä¸­<span class=\"math inline\">\\(I_x\\)</span>å’Œ<span class=\"math inline\">\\(I_y\\)</span>æ˜¯æ²¿<span class=\"math inline\">\\(x\\)</span>å’Œ<span class=\"math inline\">\\(y\\)</span>æ–¹å‘çš„å¯¼æ•°ï¼Œå¯ç”¨<code>sobelç®—å­</code>è®¡ç®— <span class=\"math display\">\\[\r\nE(u,v)=\\sum_{x,y}w(x,y)[I(x+u,y+v)-I(x,y)]^2\r\n\\]</span> <span class=\"math display\">\\[\r\n=\\sum_{x,y}w(x,y)[I(x,y)+I_xu+I_yv-I(x,y)]^2\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=\\sum_{x,y}w(x,y)[I_x^2u^2+2I_xI_yuv+I_y^2v^2]\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=\\sum_{x,y}w(x,y)\\left[\\begin{matrix}u&amp;v\\end{matrix}\\right]\r\n\\left[\\begin{matrix}I_x^2&amp;I_xI_y\\\\I_xI_y&amp;I_y^2\\end{matrix}\\right]\r\n\\left[\\begin{matrix}u\\\\v\\end{matrix}\\right]\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\n=\\left[\\begin{matrix}u&amp;v\\end{matrix}\\right]\\underbrace{\\sum_{x,y}w(x,y)\r\n\\left[\\begin{matrix}I_x^2&amp;I_xI_y\\\\I_xI_y&amp;I_y^2\\end{matrix}\\right]}_M\r\n\\left[\\begin{matrix}u\\\\v\\end{matrix}\\right]=\\left[\\begin{matrix}u&amp;v\\end{matrix}\\right]M\r\n\\left[\\begin{matrix}u\\\\v\\end{matrix}\\right]\r\n\\]</span></p>\r\n<p><span class=\"math inline\">\\(M\\)</span>çŸ©é˜µå†³å®šäº†<span class=\"math inline\">\\(E(u,v)\\)</span>çš„å–å€¼ï¼Œä¸‹é¢æˆ‘ä»¬åˆ©ç”¨<span class=\"math inline\">\\(M\\)</span>æ¥æ±‚è§’ç‚¹ï¼Œ<span class=\"math inline\">\\(M\\)</span>æ˜¯<span class=\"math inline\">\\(I_x\\)</span>å’Œ<span class=\"math inline\">\\(I_y\\)</span>çš„äºŒæ¬¡é¡¹å‡½æ•°ï¼Œå¯ä»¥è¡¨ç¤ºæˆæ¤­åœ†çš„å½¢çŠ¶ï¼Œæ¤­åœ†çš„é•¿çŸ­åŠè½´ç”±<span class=\"math inline\">\\(M\\)</span>çš„ç‰¹å¾å€¼<span class=\"math inline\">\\(\\lambda_1\\)</span>å’Œ<span class=\"math inline\">\\(\\lambda_2\\)</span>å†³å®šï¼Œæ–¹å‘ç”±ç‰¹å¾çŸ¢é‡å†³å®šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008160908338-1684512358754-7.png\"  style=\"zoom: 60%;\" /></p>\r\n<p>æ¤­åœ†å‡½æ•°ç‰¹å¾å€¼ä¸å›¾åƒä¸­çš„è§’ç‚¹ã€ç›´çº¿ï¼ˆè¾¹ç¼˜ï¼‰å’Œå¹³é¢ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008161040473-1684512385628-9.png\"  style=\"zoom: 45%;\" /></p>\r\n<p>å…±å¯åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š</p>\r\n<ol type=\"1\">\r\n<li>å›¾åƒä¸­çš„ç›´çº¿ã€‚ä¸€ä¸ªç‰¹å¾å€¼å¤§ï¼Œå¦ä¸€ä¸ªç‰¹å¾å€¼å°ï¼Œ<span class=\"math inline\">\\(\\lambda_1&gt;&gt;\\lambda_2\\)</span>æˆ– <span class=\"math inline\">\\(\\lambda_2&gt;&gt;\\lambda_1\\)</span>ã€‚æ¤­åœ†å‡½æ•°å€¼åœ¨æŸä¸€æ–¹å‘ä¸Šå¤§ï¼Œåœ¨å…¶ä»–æ–¹å‘ä¸Šå°ã€‚</li>\r\n<li>å›¾åƒä¸­çš„å¹³é¢ã€‚ä¸¤ä¸ªç‰¹å¾å€¼éƒ½å°ï¼Œä¸”è¿‘ä¼¼ç›¸ç­‰ï¼›æ¤­åœ†å‡½æ•°æ•°å€¼åœ¨å„ä¸ªæ–¹å‘ä¸Šéƒ½å°ã€‚</li>\r\n<li>å›¾åƒä¸­çš„è§’ç‚¹ã€‚ä¸¤ä¸ªç‰¹å¾å€¼éƒ½å¤§ï¼Œä¸”è¿‘ä¼¼ç›¸ç­‰ï¼Œæ¤­åœ†å‡½æ•°åœ¨æ‰€æœ‰æ–¹å‘éƒ½å¢å¤§</li>\r\n</ol>\r\n<p>Harrisç»™å‡ºçš„è§’ç‚¹è®¡ç®—æ–¹æ³•å¹¶ä¸éœ€è¦è®¡ç®—å…·ä½“çš„ç‰¹å¾å€¼ï¼Œè€Œæ˜¯è®¡ç®—ä¸€ä¸ª<strong>è§’ç‚¹å“åº”å€¼<span class=\"math inline\">\\(R\\)</span></strong>æ¥åˆ¤æ–­è§’ç‚¹ã€‚<span class=\"math inline\">\\(R\\)</span>çš„è®¡ç®—å…¬å¼æ˜¯ <span class=\"math display\">\\[\r\nR=detM-\\alpha(traceM)^2\\\\\r\ndetM=\\lambda_1\\lambda_2\\\\\r\ntraceM=\\lambda_1+\\lambda_2\r\n\\]</span> å¼ä¸­ï¼Œ<span class=\"math inline\">\\(detM\\)</span>ä¸ºçŸ©é˜µ<span class=\"math inline\">\\(M\\)</span>çš„è¡Œåˆ—å¼ï¼›<span class=\"math inline\">\\(traceM\\)</span>ä¸ºçŸ©é˜µ<span class=\"math inline\">\\(M\\)</span>çš„è¿¹ï¼›<span class=\"math inline\">\\(\\alpha\\)</span>ä¸ºå¸¸æ•°ï¼Œå–å€¼èŒƒå›´ä¸º0.04~0.06ã€‚</p>\r\n<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008161904372-1684512700094-11.png\"  style=\"zoom: 50%;\" /></p>\r\n<ul>\r\n<li>å½“Rä¸ºå¤§æ•°å€¼çš„æ­£æ•°æ—¶æ˜¯è§’ç‚¹</li>\r\n<li>å½“Rä¸ºå¤§æ•°å€¼çš„è´Ÿæ•°æ—¶æ˜¯è¾¹ç•Œ</li>\r\n<li>å½“Rä¸ºå°æ•°æ˜¯è®¤ä¸ºæ˜¯å¹³å¦åŒºåŸŸ</li>\r\n</ul>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dst=cv.cornerHarris(src, blockSize, ksize, k)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>imgï¼šæ•°æ®ç±»å‹ä¸º ï¬‚oat32 çš„è¾“å…¥å›¾åƒã€‚</li>\r\n<li>blockSizeï¼šè§’ç‚¹æ£€æµ‹ä¸­è¦è€ƒè™‘çš„é‚»åŸŸå¤§å°ã€‚</li>\r\n<li>ksizeï¼š<code>sobelç®—å­</code>æ±‚å¯¼ä½¿ç”¨çš„æ ¸å¤§å°ã€‚</li>\r\n<li>kï¼šè§’ç‚¹æ£€æµ‹æ–¹ç¨‹ä¸­çš„è‡ªç”±å‚æ•°ï¼Œå–å€¼å‚æ•°ä¸º [0.04ï¼Œ0.06]ã€‚</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np </span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒï¼Œå¹¶è½¬æ¢æˆç°åº¦å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/chessboard.jpg&#x27;</span>)</span><br><span class=\"line\">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class=\"line\"><span class=\"comment\"># 2 è§’ç‚¹æ£€æµ‹</span></span><br><span class=\"line\"><span class=\"comment\"># 2.1 è¾“å…¥å›¾åƒå¿…é¡»æ˜¯ float32</span></span><br><span class=\"line\">gray = np.float32(gray)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.2 æœ€åä¸€ä¸ªå‚æ•°åœ¨ 0.04 åˆ° 0.05 ä¹‹é—´</span></span><br><span class=\"line\">dst = cv.cornerHarris(gray,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">0.04</span>)</span><br><span class=\"line\"><span class=\"comment\"># 3 è®¾ç½®é˜ˆå€¼ï¼Œå°†è§’ç‚¹ç»˜åˆ¶å‡ºæ¥ï¼Œé˜ˆå€¼æ ¹æ®å›¾åƒè¿›è¡Œé€‰æ‹©</span></span><br><span class=\"line\">img[dst&gt;<span class=\"number\">0.001</span>*dst.<span class=\"built_in\">max</span>()] = [<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">255</span>]</span><br><span class=\"line\"><span class=\"comment\"># 4 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.imshow(img[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;Harrisè§’ç‚¹æ£€æµ‹&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008164344988-1684512767151-13.png\"  style=\"zoom: 33%;\" /></p>\r\n<p>Harrisè§’ç‚¹æ£€æµ‹çš„ä¼˜ç¼ºç‚¹ï¼š</p>\r\n<p>ä¼˜ç‚¹ï¼š</p>\r\n<ul>\r\n<li>æ—‹è½¬ä¸å˜æ€§ï¼Œæ¤­åœ†è½¬è¿‡ä¸€å®šè§’åº¦ä½†æ˜¯å…¶å½¢çŠ¶ä¿æŒä¸å˜ï¼ˆç‰¹å¾å€¼ä¿æŒä¸å˜ï¼‰</li>\r\n<li>å¯¹äºå›¾åƒç°åº¦çš„ä»¿å°„å˜åŒ–å…·æœ‰éƒ¨åˆ†çš„ä¸å˜æ€§ï¼Œç”±äºä»…ä»…ä½¿ç”¨äº†å›¾åƒçš„ä¸€ä»‹å¯¼æ•°ï¼Œå¯¹äºå›¾åƒç°åº¦å¹³ç§»å˜åŒ–ä¸å˜ï¼›å¯¹äºå›¾åƒç°åº¦å°ºåº¦å˜åŒ–ä¸å˜</li>\r\n</ul>\r\n<p>ç¼ºç‚¹ï¼š</p>\r\n<ul>\r\n<li>å¯¹å°ºåº¦å¾ˆæ•æ„Ÿï¼Œä¸å…·å¤‡å‡ ä½•å°ºåº¦ä¸å˜æ€§ã€‚</li>\r\n<li>æå–çš„è§’ç‚¹æ˜¯åƒç´ çº§çš„</li>\r\n</ul>\r\n<h2 id=\"shi-tomasiè§’ç‚¹æ£€æµ‹\">Shi-Tomasiè§’ç‚¹æ£€æµ‹</h2>\r\n<p><code>Shi-Tomasiç®—æ³•</code>æ˜¯å¯¹<code>Harrisç®—æ³•</code>çš„æ”¹è¿›ï¼Œå…·ä½“åœ°ï¼šè‹¥çŸ©é˜µMçš„ä¸¤ä¸ªç‰¹å¾å€¼<span class=\"math inline\">\\(\\lambda_1,\\lambda_2\\)</span>ä¸­è¾ƒå°çš„ä¸€ä¸ªå¤§äºé˜ˆå€¼ï¼Œåˆ™è®¤ä¸ºä»–æ˜¯è§’ç‚¹ï¼Œå³ï¼š <span class=\"math display\">\\[\r\nR=min(\\lambda_1,\\lambda_2)\r\n\\]</span></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">corners = cv2.goodFeaturesToTrack ( image, maxcorners, qualityLevel, minDistance )</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>Imageï¼šè¾“å…¥ç°åº¦å›¾åƒ</li>\r\n<li>maxCornersï¼šè·å–è§’ç‚¹æ•°çš„æ•°ç›®ã€‚</li>\r\n<li>qualityLevelï¼šæŒ‡å‡ºæœ€ä½å¯æ¥å—çš„è§’ç‚¹è´¨é‡æ°´å¹³ï¼Œåœ¨0-1ä¹‹é—´ã€‚</li>\r\n<li>minDistanceï¼šè§’ç‚¹ä¹‹é—´æœ€å°çš„æ¬§å¼è·ç¦»ï¼Œé¿å…å¾—åˆ°ç›¸é‚»ç‰¹å¾ç‚¹ã€‚</li>\r\n</ul>\r\n<p>è¿”å›ï¼š</p>\r\n<ul>\r\n<li>Corners: æœç´¢åˆ°çš„è§’ç‚¹ï¼Œåœ¨è¿™é‡Œæ‰€æœ‰ä½äºè´¨é‡æ°´å¹³çš„è§’ç‚¹è¢«æ’é™¤æ‰ï¼Œç„¶åæŠŠåˆæ ¼çš„è§’ç‚¹æŒ‰è´¨é‡æ’åºï¼Œç„¶åå°†è´¨é‡è¾ƒå¥½çš„è§’ç‚¹é™„è¿‘ï¼ˆå°äºæœ€å°æ¬§å¼è·ç¦»ï¼‰çš„è§’ç‚¹åˆ æ‰ï¼Œæœ€åæ‰¾åˆ°maxCornersä¸ªè§’ç‚¹è¿”å›ã€‚</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -1\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np </span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/tv.jpg&#x27;</span>) </span><br><span class=\"line\">gray = cv.cvtColor(img,cv.COLOR_BGR2GRAY)</span><br><span class=\"line\"><span class=\"comment\"># 2 è§’ç‚¹æ£€æµ‹</span></span><br><span class=\"line\">corners = cv.goodFeaturesToTrack(gray,<span class=\"number\">1000</span>,<span class=\"number\">0.01</span>,<span class=\"number\">10</span>)  </span><br><span class=\"line\"><span class=\"comment\"># 3 ç»˜åˆ¶è§’ç‚¹</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> corners:</span><br><span class=\"line\">    x,y = i.ravel()</span><br><span class=\"line\">    cv.circle(img,(x,y),<span class=\"number\">2</span>,(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">255</span>),-<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\"># 4 å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.imshow(img[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;shi-tomasiè§’ç‚¹æ£€æµ‹&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008174257711.png\"  style=\"zoom: 45%;\" /></p>\r\n<h1 id=\"siftå’Œsurfç®—æ³•\">SIFTå’ŒSURFç®—æ³•</h1>\r\n<h2 id=\"siftç®—æ³•\"><a href=\"https://baike.baidu.com/item/SIFT/1396275?fr=aladdin\">SIFTç®—æ³•</a></h2>\r\n<p><code>Harris</code>å’Œ<code>Shi-Tomasi</code>è§’ç‚¹æ£€æµ‹ç®—æ³•å…·æœ‰æ—‹è½¬ä¸å˜æ€§ï¼Œä½†ä¸å…·æœ‰å°ºåº¦ä¸å˜æ€§ï¼Œä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œåœ¨å·¦ä¾§å°å›¾ä¸­å¯ä»¥æ£€æµ‹åˆ°è§’ç‚¹ï¼Œä½†æ˜¯å›¾åƒè¢«æ”¾å¤§åï¼Œåœ¨ä½¿ç”¨åŒæ ·çš„çª—å£ï¼Œå°±æ£€æµ‹ä¸åˆ°è§’ç‚¹äº†ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008181535222-1684547971195-2.png\"  style=\"zoom: 80%;\" /></p>\r\n<p><strong>å°ºåº¦ä¸å˜ç‰¹å¾è½¬æ¢</strong>ï¼ˆScale-invariant feature transformï¼ŒSIFTï¼‰ã€‚æ­¤ç®—æ³•ç”± David Loweåœ¨1999å¹´æ‰€å‘è¡¨ï¼Œ2004å¹´å®Œå–„æ€»ç»“ã€‚å®ƒçš„å®è´¨æ˜¯åœ¨ä¸åŒçš„å°ºåº¦ç©ºé—´ä¸ŠæŸ¥æ‰¾å…³é”®ç‚¹(ç‰¹å¾ç‚¹)ï¼Œå¹¶è®¡ç®—å‡ºå…³é”®ç‚¹çš„æ–¹å‘ã€‚SIFTæ‰€æŸ¥æ‰¾åˆ°çš„å…³é”®ç‚¹æ˜¯ä¸€äº›ååˆ†çªå‡ºï¼Œä¸ä¼šå› å…‰ç…§ï¼Œä»¿å°„å˜æ¢å’Œå™ªéŸ³ç­‰å› ç´ è€Œå˜åŒ–çš„ç‚¹ï¼Œå¦‚<strong>è§’ç‚¹ã€è¾¹ç¼˜ç‚¹ã€æš—åŒºçš„äº®ç‚¹åŠäº®åŒºçš„æš—ç‚¹</strong>ç­‰ã€‚</p>\r\n<ol type=\"1\">\r\n<li>å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹ï¼šæœç´¢æ‰€æœ‰å°ºåº¦ä¸Šçš„å›¾åƒä½ç½®ã€‚é€šè¿‡é«˜æ–¯å·®åˆ†å‡½æ•°æ¥è¯†åˆ«æ½œåœ¨çš„å¯¹äºå°ºåº¦å’Œæ—‹è½¬ä¸å˜çš„å…³é”®ç‚¹ã€‚</li>\r\n<li>å…³é”®ç‚¹å®šä½ï¼šåœ¨æ¯ä¸ªå€™é€‰çš„ä½ç½®ä¸Šï¼Œé€šè¿‡ä¸€ä¸ªæ‹Ÿåˆç²¾ç»†çš„æ¨¡å‹æ¥ç¡®å®šä½ç½®å’Œå°ºåº¦ã€‚å…³é”®ç‚¹çš„é€‰æ‹©ä¾æ®äºå®ƒä»¬çš„ç¨³å®šç¨‹åº¦ã€‚</li>\r\n<li>å…³é”®ç‚¹æ–¹å‘ç¡®å®šï¼šåŸºäºå›¾åƒå±€éƒ¨çš„æ¢¯åº¦æ–¹å‘ï¼Œåˆ†é…ç»™æ¯ä¸ªå…³é”®ç‚¹ä½ç½®ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹å‘ã€‚æ‰€æœ‰åé¢çš„å¯¹å›¾åƒæ•°æ®çš„æ“ä½œéƒ½ç›¸å¯¹äºå…³é”®ç‚¹çš„æ–¹å‘ã€å°ºåº¦å’Œä½ç½®è¿›è¡Œå˜æ¢ï¼Œä»è€Œä¿è¯äº†å¯¹äºè¿™äº›å˜æ¢çš„ä¸å˜æ€§ã€‚</li>\r\n<li>å…³é”®ç‚¹æè¿°ï¼šåœ¨æ¯ä¸ªå…³é”®ç‚¹å‘¨å›´çš„é‚»åŸŸå†…ï¼Œåœ¨é€‰å®šçš„å°ºåº¦ä¸Šæµ‹é‡å›¾åƒå±€éƒ¨çš„æ¢¯åº¦ã€‚è¿™äº›æ¢¯åº¦ä½œä¸ºå…³é”®ç‚¹çš„æè¿°ç¬¦ï¼Œå®ƒå…è®¸æ¯”è¾ƒå¤§çš„å±€éƒ¨å½¢çŠ¶çš„å˜å½¢æˆ–å…‰ç…§å˜åŒ–ã€‚</li>\r\n</ol>\r\n<h3 id=\"å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹\">å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹</h3>\r\n<p>åœ¨ä¸åŒçš„å°ºåº¦ç©ºé—´æ˜¯ä¸èƒ½ä½¿ç”¨ç›¸åŒçš„çª—å£æ£€æµ‹æå€¼ç‚¹ï¼Œå¯¹å°çš„å…³é”®ç‚¹ä½¿ç”¨å°çš„çª—å£ï¼Œå¯¹å¤§çš„å…³é”®ç‚¹ä½¿ç”¨å¤§çš„çª—å£ï¼Œä¸ºäº†è¾¾åˆ°ä¸Šè¿°ç›®çš„ï¼Œä½¿ç”¨<strong>å°ºåº¦ç©ºé—´æ»¤æ³¢å™¨</strong>ã€‚ï¼ˆé«˜æ–¯æ ¸æ˜¯å”¯ä¸€å¯ä»¥äº§ç”Ÿå¤šå°ºåº¦ç©ºé—´çš„æ ¸å‡½æ•°ï¼‰</p>\r\n<p>ä¸€ä¸ªå›¾åƒçš„å°ºåº¦ç©ºé—´<span class=\"math inline\">\\(L(x,y,\\sigma)\\)</span>å®šä¹‰ä¸ºåŸå§‹å›¾åƒ<span class=\"math inline\">\\(I(x,y)\\)</span>ä¸ä¸€ä¸ªå¯å˜å°ºåº¦çš„2ç»´é«˜æ–¯å‡½æ•°<span class=\"math inline\">\\(G(x,y,\\sigma)\\)</span><strong>å·ç§¯è¿ç®—</strong> ï¼Œå³ï¼š <span class=\"math display\">\\[\r\nL(x,y,\\sigma)=G(x,y,\\sigma)*I(x,y)\r\n\\]</span> å…¶ä¸­<span class=\"math inline\">\\(\\sigma\\)</span>æ˜¯å°ºåº¦ç©ºé—´å› å­ï¼Œå®ƒå†³å®šå›¾åƒçš„æ¨¡ç³Šç¨‹åº¦ã€‚åœ¨å¤§å°ºåº¦ä¸‹(<span class=\"math inline\">\\(\\sigma\\)</span>å€¼å¤§)è¡¨ç°çš„æ˜¯å›¾åƒçš„æ¦‚è²Œä¿¡æ¯ï¼Œåœ¨å°å°ºåº¦ä¸‹(<span class=\"math inline\">\\(\\sigma\\)</span>å€¼å°)è¡¨ç°çš„æ˜¯å›¾åƒçš„ç»†èŠ‚ä¿¡æ¯ã€‚</p>\r\n<p>åœ¨è®¡ç®—é«˜æ–¯å‡½æ•°çš„ç¦»æ•£è¿‘ä¼¼æ—¶ï¼Œåœ¨å¤§æ¦‚<span class=\"math inline\">\\(3\\sigma\\)</span>è·ç¦»ä¹‹å¤–çš„åƒç´ éƒ½å¯ä»¥çœ‹ä½œä¸èµ·ä½œç”¨ï¼Œè¿™äº›åƒç´ çš„è®¡ç®—ä¹Ÿå°±å¯ä»¥å¿½ç•¥ã€‚æ‰€ä»¥ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œåªè®¡ç®—<span class=\"math inline\">\\((6\\sigma+1)\\times(6\\sigma+1)\\)</span>çš„é«˜æ–¯å·ç§¯æ ¸å°±å¯ä»¥ä¿è¯ç›¸å…³åƒç´ å½±å“ã€‚</p>\r\n<p>ä¸‹é¢æ„å»ºå›¾åƒçš„é«˜æ–¯é‡‘å­—å¡”ï¼Œå®ƒé‡‡ç”¨é«˜æ–¯å‡½æ•°å¯¹å›¾åƒè¿›è¡Œæ¨¡ç³Šä»¥åŠé™é‡‡æ ·å¤„ç†å¾—åˆ°çš„ï¼Œ 1. å°†å›¾åƒæ‰©å¤§ä¸€å€ï¼Œåœ¨æ‰©å¤§çš„å›¾åƒçš„åŸºç¡€ä¹‹ä¸Šæ„å»ºé«˜æ–¯é‡‘å­—å¡”ï¼Œ 2. å¯¹è¯¥å°ºå¯¸ä¸‹å›¾åƒè¿›è¡Œé«˜æ–¯æ¨¡ç³Šï¼Œå‡ å¹…æ¨¡ç³Šä¹‹åçš„å›¾åƒé›†åˆæ„æˆäº†ä¸€ä¸ªOctaveï¼Œ 3. å¯¹è¯¥Octaveä¸‹é€‰æ‹©ä¸€å¹…å›¾åƒè¿›è¡Œä¸‹é‡‡æ ·ï¼Œé•¿å’Œå®½åˆ†åˆ«ç¼©çŸ­ä¸€å€ï¼Œå›¾åƒé¢ç§¯å˜ä¸ºåŸæ¥å››åˆ†ä¹‹ä¸€ã€‚è¿™å¹…å›¾åƒå°±æ˜¯ä¸‹ä¸€ä¸ªOctaveçš„åˆå§‹å›¾åƒï¼Œåœ¨åˆå§‹å›¾åƒçš„åŸºç¡€ä¸Šå®Œæˆå±äºè¿™ä¸ªOctaveçš„é«˜æ–¯æ¨¡ç³Šå¤„ç†ï¼Œ 4. ä»¥æ­¤ç±»æ¨ï¼Œå®Œæˆæ•´ä¸ªç®—æ³•ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191009110944907-1684549584975-4.png\"  style=\"zoom: 40%;\" /></p>\r\n<p>åˆ©ç”¨é«˜æ–¯æ‹‰æ™®æ‹‰æ–¯ç®—å­(Laplacian of Gaussian, <code>LoG</code>)ï¼Œå³å›¾åƒçš„äºŒé˜¶å¯¼æ•°ï¼Œå¯ä»¥åœ¨ä¸åŒçš„å°ºåº¦ä¸‹æ£€æµ‹å›¾åƒçš„å…³é”®ç‚¹ä¿¡æ¯ï¼Œä»è€Œç¡®å®šå›¾åƒçš„ç‰¹å¾ç‚¹ã€‚ä½†<code>LoG</code>çš„è®¡ç®—é‡å¤§ï¼Œæ•ˆç‡ä½ã€‚æ‰€ä»¥é€šè¿‡ä¸¤ä¸ªç›¸é‚»é«˜æ–¯å°ºåº¦ç©ºé—´çš„å›¾åƒç›¸å‡ï¼Œå¾—åˆ°é«˜æ–¯å·®åˆ†(Difference of Gaussiansï¼Œ<a href=\"https://baike.baidu.com/item/%E9%AB%98%E6%96%AF%E5%B7%AE%E5%88%86%E5%87%BD%E6%95%B0/1597793?fr=aladdin\">DOG</a>)æ¥è¿‘ä¼¼<code>LoG</code>ã€‚</p>\r\n<ol type=\"1\">\r\n<li>æ„å»º<strong>é«˜æ–¯å·®åˆ†é‡‘å­—å¡”</strong>\r\n<ul>\r\n<li>å°†<strong>é«˜æ–¯é‡‘å­—å¡”</strong>ä¸­æ¯ä¸ªOctaveä¸­ç›¸é‚»ä¸¤å±‚ç›¸å‡å°±æ„æˆäº†é«˜æ–¯å·®åˆ†é‡‘å­—å¡”ã€‚</li>\r\n<li>é«˜æ–¯å·®åˆ†é‡‘å­—å¡”çš„<strong>ç¬¬oç»„ç¬¬iå±‚å›¾</strong>åƒæ˜¯ç”±é«˜æ–¯é‡‘å­—å¡”çš„<strong>ç¬¬oç»„ç¬¬i+1å±‚å‡ç¬¬oç»„ç¬¬iå±‚</strong>å¾—åˆ°çš„ã€‚</li>\r\n</ul></li>\r\n</ol>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191009113953721-1684549912508-6.png\"  style=\"zoom: 33%;\" /></p>\r\n<ol start=\"2\" type=\"1\">\r\n<li>åœ¨ä¸åŒçš„å°ºåº¦ç©ºé—´ä¸­æœç´¢å±€éƒ¨æœ€å¤§å€¼\r\n<ul>\r\n<li>å¯¹äºå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ ç‚¹è€Œè¨€ï¼Œå®ƒéœ€è¦ä¸è‡ªå·±å‘¨å›´çš„<span class=\"math inline\">\\(8\\)</span>é‚»åŸŸï¼Œä»¥åŠå°ºåº¦ç©ºé—´ä¸­ä¸Šä¸‹ä¸¤å±‚ä¸­çš„ç›¸é‚»çš„<span class=\"math inline\">\\(18(2\\times9)\\)</span>ä¸ªç‚¹ç›¸æ¯”ã€‚</li>\r\n<li>å¦‚æœæ˜¯å±€éƒ¨æœ€å¤§å€¼ï¼Œå®ƒå°±å¯èƒ½æ˜¯ä¸€ä¸ªå…³é”®ç‚¹ã€‚ <img src=\"/imgs/$%7Bfiilename%7D/image-20191009115023016-1684549955480-8.png\" style=\"zoom:50%;\" /></li>\r\n<li>æœç´¢è¿‡ç¨‹ä»æ¯ç»„çš„ç¬¬äºŒå±‚å¼€å§‹ï¼Œä»¥ç¬¬äºŒå±‚ä¸ºå½“å‰å±‚ï¼Œå¯¹ç¬¬äºŒå±‚çš„<code>DoG</code>å›¾åƒä¸­çš„æ¯ä¸ªç‚¹å–ä¸€ä¸ª<span class=\"math inline\">\\(3\\times3\\)</span>çš„ç«‹æ–¹ä½“ï¼Œç«‹æ–¹ä½“ä¸Šä¸‹å±‚ä¸ºç¬¬ä¸€å±‚ä¸ç¬¬ä¸‰å±‚ã€‚æœç´¢å¾—åˆ°çš„æå€¼ç‚¹æ—¢æœ‰ä½ç½®åæ ‡(<code>DoG</code>çš„å›¾åƒåæ ‡)ï¼Œåˆæœ‰ç©ºé—´å°ºåº¦åæ ‡(å±‚åæ ‡)ã€‚</li>\r\n<li>å½“ç¬¬äºŒå±‚æœç´¢å®Œæˆåï¼Œå†ä»¥ç¬¬ä¸‰å±‚ä½œä¸ºå½“å‰å±‚ï¼Œå…¶è¿‡ç¨‹ä¸ç¬¬äºŒå±‚çš„æœç´¢ç±»ä¼¼ã€‚</li>\r\n<li>å½“<span class=\"math inline\">\\(S=3\\)</span>æ—¶ï¼Œæ¯ç»„é‡Œé¢è¦æœç´¢3å±‚ï¼Œæ‰€ä»¥åœ¨é«˜æ–¯å·®åˆ†é‡‘å­—å¡”ä¸­å°±æœ‰<span class=\"math inline\">\\(S+2\\)</span>å±‚ï¼Œåœ¨é«˜æ–¯é‡‘å­—å¡”ä¸­æ¯ç»„æœ‰<span class=\"math inline\">\\(S+3\\)</span>å±‚ã€‚</li>\r\n</ul></li>\r\n</ol>\r\n<h3 id=\"å…³é”®ç‚¹å®šä½\">å…³é”®ç‚¹å®šä½</h3>\r\n<p>ç”±äº<code>DoG</code>å¯¹å™ªå£°å’Œè¾¹ç¼˜æ¯”è¾ƒæ•æ„Ÿï¼Œå› æ­¤åœ¨é«˜æ–¯å·®åˆ†é‡‘å­—å¡”ä¸­æ£€æµ‹åˆ°çš„å±€éƒ¨æå€¼ç‚¹éœ€ç»è¿‡è¿›ä¸€æ­¥çš„æ£€éªŒæ‰èƒ½ç²¾ç¡®å®šä½ä¸ºç‰¹å¾ç‚¹ã€‚</p>\r\n<p>ä½¿ç”¨å°ºåº¦ç©ºé—´çš„æ³°å‹’çº§æ•°å±•å¼€æ¥è·å¾—æå€¼çš„å‡†ç¡®ä½ç½®ï¼Œ å¦‚æœ<strong>æå€¼ç‚¹çš„ç°åº¦å€¼å°äºé˜ˆå€¼</strong>ï¼ˆä¸€èˆ¬ä¸º0.03æˆ–0.04ï¼‰å°±ä¼šè¢«å¿½ç•¥æ‰ã€‚ åœ¨ OpenCV ä¸­è¿™ç§é˜ˆå€¼è¢«ç§°ä¸º contrastThresholdã€‚</p>\r\n<p>æ¬ ä½³çš„å…³é”®ç‚¹åœ¨å¹³è¡Œè¾¹ç¼˜çš„æ–¹å‘æœ‰è¾ƒå¤§çš„ä¸»æ›²ç‡ï¼Œè€Œåœ¨å‚ç›´äºè¾¹ç¼˜çš„æ–¹å‘æœ‰è¾ƒå°çš„æ›²ç‡ï¼Œä¸¤è€…çš„æ¯”å€¼å¦‚æœé«˜äºæŸä¸ªé˜ˆå€¼ï¼ˆåœ¨OpenCVä¸­å«åšè¾¹ç•Œé˜ˆå€¼ï¼‰ï¼Œå°±è®¤ä¸ºè¯¥å…³é”®ç‚¹ä¸ºè¾¹ç•Œï¼Œå°†è¢«å¿½ç•¥ï¼Œä¸€èˆ¬è¯¥é˜ˆå€¼ä¸º10ã€‚</p>\r\n<p>å°†ä½å¯¹æ¯”åº¦å’Œè¾¹ç•Œçš„å…³é”®ç‚¹å»é™¤ï¼Œå¾—åˆ°çš„å°±æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„å…³é”®ç‚¹ã€‚</p>\r\n<h3 id=\"å…³é”®ç‚¹æ–¹å‘ç¡®å®š\">å…³é”®ç‚¹æ–¹å‘ç¡®å®š</h3>\r\n<p>ä¸ºäº†å®ç°æ—‹è½¬ä¸å˜æ€§ï¼Œè¿˜éœ€è¦ä¸ºæ¯ä¸ªå…³é”®ç‚¹åˆ†é…ä¸€ä¸ªæ–¹å‘è§’åº¦ï¼Œä¹Ÿå°±æ˜¯åœ¨é«˜æ–¯å°ºåº¦å›¾åƒçš„é‚»åŸŸç»“æ„ä¸­æ±‚å¾—ä¸€ä¸ªæ–¹å‘åŸºå‡†ã€‚</p>\r\n<p>å¯¹äºä»»ä¸€å…³é”®ç‚¹ï¼Œé‡‡é›†å…¶æ‰€åœ¨é«˜æ–¯é‡‘å­—å¡”å›¾åƒä»¥<span class=\"math inline\">\\(r\\)</span>ä¸ºåŠå¾„çš„åŒºåŸŸå†…æ‰€æœ‰åƒç´ çš„æ¢¯åº¦ç‰¹å¾ï¼ˆå¹…å€¼å’Œå¹…è§’ï¼‰ï¼Œ<span class=\"math inline\">\\(r=3\\times1.5\\sigma\\)</span>ï¼Œå…¶ä¸­<span class=\"math inline\">\\(\\sigma\\)</span>æ˜¯å…³é”®ç‚¹æ‰€åœ¨octaveçš„å›¾åƒçš„å°ºåº¦ï¼Œå¯ä»¥å¾—åˆ°å¯¹åº”çš„å°ºåº¦å›¾åƒã€‚</p>\r\n<p>æ¢¯åº¦çš„å¹…å€¼å’Œæ–¹å‘çš„è®¡ç®—å…¬å¼ä¸ºï¼š <span class=\"math display\">\\[\r\nm(x,y)=\\sqrt{(L(x+1,y)-L(x-1,y))^2+(L(x,y+1)-L(x,y-1))^2}\r\n\\]</span> <span class=\"math display\">\\[\r\n\\theta(x,y)=\\arctan(\\frac{L(x,y+1)-L(x,y-1)}{L(x+1,y)-L(x-1,y)}\r\n\\]</span> é‚»åŸŸåƒç´ æ¢¯åº¦çš„è®¡ç®—ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191009143818527-1684552168908-10.png\"  style=\"zoom:50%;\" /></p>\r\n<p>ä½¿ç”¨ç›´æ–¹å›¾ç»Ÿè®¡å…³é”®ç‚¹é‚»åŸŸå†…åƒç´ çš„æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ã€‚</p>\r\n<ol type=\"1\">\r\n<li><p>å°†<span class=\"math inline\">\\(360^\\circ\\)</span>åˆ†ä¸º<span class=\"math inline\">\\(36\\)</span>æŸ±ï¼Œæ¯<span class=\"math inline\">\\(10^\\circ\\)</span>ä¸ºä¸€æŸ±ï¼Œç„¶ååœ¨ä»¥<span class=\"math inline\">\\(r\\)</span>ä¸ºåŠå¾„çš„åŒºåŸŸå†…ï¼Œå°†æ¢¯åº¦æ–¹å‘åœ¨æŸä¸€ä¸ªæŸ±å†…çš„åƒç´ æ‰¾å‡ºæ¥ã€‚</p></li>\r\n<li><p>å°†ä»–ä»¬çš„å¹…å€¼ç›¸åŠ åœ¨ä¸€èµ·ä½œä¸ºæŸ±çš„é«˜åº¦ã€‚å› ä¸ºåœ¨rä¸ºåŠå¾„çš„åŒºåŸŸå†…åƒç´ çš„æ¢¯åº¦å¹…å€¼å¯¹ä¸­å¿ƒåƒç´ çš„è´¡çŒ®æ˜¯ä¸åŒçš„ï¼Œå› æ­¤è¿˜éœ€è¦å¯¹å¹…å€¼è¿›è¡ŒåŠ æƒå¤„ç†ï¼Œé‡‡ç”¨é«˜æ–¯åŠ æƒï¼Œæ–¹å·®ä¸º<span class=\"math inline\">\\(1.5\\sigma\\)</span>ã€‚ <img src=\"/imgs/$%7Bfiilename%7D/image-20191009144726492-1684552637576-16.png\"  style=\"zoom:33%;\" /></p></li>\r\n<li><p>æ¯ä¸ªç‰¹å¾ç‚¹å¿…é¡»åˆ†é…ä¸€ä¸ªä¸»æ–¹å‘ï¼Œè¿˜éœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ªè¾…æ–¹å‘ï¼Œå¢åŠ è¾…æ–¹å‘çš„ç›®çš„æ˜¯ä¸ºäº†å¢å¼ºå›¾åƒåŒ¹é…çš„é²æ£’æ€§ã€‚è¾…æ–¹å‘çš„å®šä¹‰æ˜¯ï¼Œå½“ä¸€ä¸ªæŸ±ä½“çš„é«˜åº¦å¤§äºä¸»æ–¹å‘æŸ±ä½“é«˜åº¦çš„<span class=\"math inline\">\\(80\\%\\)</span>æ—¶ï¼Œåˆ™è¯¥æŸ±ä½“æ‰€ä»£è¡¨çš„çš„æ–¹å‘å°±æ˜¯ç»™ç‰¹å¾ç‚¹çš„è¾…æ–¹å‘ã€‚</p></li>\r\n<li><p>ç›´æ–¹å›¾çš„å³°å€¼ï¼Œå³æœ€é«˜çš„æŸ±ä»£è¡¨çš„æ–¹å‘æ˜¯ç‰¹å¾ç‚¹é‚»åŸŸèŒƒå›´å†…å›¾åƒæ¢¯åº¦çš„ä¸»æ–¹å‘ï¼Œä½†è¯¥æŸ±ä½“ä»£è¡¨çš„è§’åº¦æ˜¯ä¸€ä¸ªèŒƒå›´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦å¯¹ç¦»æ•£çš„ç›´æ–¹å›¾è¿›è¡Œæ’å€¼æ‹Ÿåˆï¼Œä»¥å¾—åˆ°æ›´ç²¾ç¡®çš„æ–¹å‘è§’åº¦å€¼ã€‚åˆ©ç”¨æŠ›ç‰©çº¿å¯¹ç¦»æ•£çš„ç›´æ–¹å›¾è¿›è¡Œæ‹Ÿåˆã€‚ <img src=\"/imgs/$%7Bfiilename%7D/image-20191009150008701-1684552598604-14.png\" style=\"zoom: 40%;\" /></p></li>\r\n</ol>\r\n<p>è·å¾—å›¾åƒå…³é”®ç‚¹ä¸»æ–¹å‘åï¼Œä½¿ç”¨ä¸€ä¸ªå¸¦ç®­å¤´çš„åœ†æˆ–ç›´æ¥ä½¿ç”¨ç®­å¤´è¡¨ç¤ºSIFTåŒºåŸŸçš„ä¸‰ä¸ªå€¼ï¼šä¸­å¿ƒè¡¨ç¤ºç‰¹å¾ç‚¹ä½ç½®<span class=\"math inline\">\\((x,y)\\)</span>ï¼ŒåŠå¾„è¡¨ç¤ºå…³é”®ç‚¹å°ºåº¦<span class=\"math inline\">\\((\\sigma)\\)</span>ï¼Œç®­å¤´è¡¨ç¤ºæ–¹å‘<span class=\"math inline\">\\((\\theta)\\)</span>ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191025112522974-1684552568027-12.png\"  style=\"zoom:50%;\" /></p>\r\n<h3 id=\"å…³é”®ç‚¹æè¿°\">å…³é”®ç‚¹æè¿°</h3>\r\n<p>ä¸ºæ¯ä¸ªå…³é”®ç‚¹å»ºç«‹ä¸€ä¸ªæè¿°ç¬¦ï¼Œè¯¥æè¿°ç¬¦æ—¢å…·æœ‰å¯åŒºåˆ†æ€§ï¼Œåˆå…·æœ‰å¯¹æŸäº›å˜é‡çš„ä¸å˜æ€§ï¼Œå¦‚å…‰ç…§ï¼Œè§†è§’ç­‰ã€‚è€Œä¸”æè¿°ç¬¦ä¸ä»…ä»…åŒ…å«å…³é”®ç‚¹ï¼Œä¹ŸåŒ…æ‹¬å…³é”®ç‚¹å‘¨å›´å¯¹å…¶æœ‰è´¡çŒ®çš„çš„åƒç´ ç‚¹ã€‚</p>\r\n<p>åœ¨å…³é”®ç‚¹æ‰€åœ¨çš„é«˜æ–¯å°ºåº¦å›¾åƒä¸Šç”Ÿæˆå¯¹åº”çš„æè¿°ç¬¦ã€‚ä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒï¼Œå°†å…¶é™„è¿‘é‚»åŸŸåˆ’åˆ†ä¸º<span class=\"math inline\">\\(d\\times d\\)</span>ä¸ªå­åŒºåŸŸï¼ˆä¸€èˆ¬å–<span class=\"math inline\">\\(d=4\\)</span>)ï¼Œæ¯ä¸ªå­åŒºåŸŸéƒ½æ˜¯ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œè¾¹é•¿ä¸º<span class=\"math inline\">\\(3\\sigma\\)</span>ï¼Œè€ƒè™‘åˆ°å®é™…è®¡ç®—æ—¶ï¼Œéœ€è¿›è¡Œä¸‰æ¬¡çº¿æ€§æ’å€¼ï¼Œæ‰€ä»¥ç‰¹å¾ç‚¹é‚»åŸŸçš„ä¸º<span class=\"math inline\">\\(3\\sigma(d+1)\\times3\\sigma(d+1)\\)</span>çš„èŒƒå›´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191009161647267-1684552834400-18.png\"  style=\"zoom: 67%;\" /></p>\r\n<p>ä¸ºäº†ä¿è¯ç‰¹å¾ç‚¹çš„æ—‹è½¬ä¸å˜æ€§ï¼Œä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒï¼Œå°†åæ ‡è½´æ—‹è½¬ä¸ºå…³é”®ç‚¹çš„ä¸»æ–¹å‘ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191009161756423-1684552865043-20.png\"  style=\"zoom:67%;\" /></p>\r\n<p>è®¡ç®—å­åŒºåŸŸå†…çš„åƒç´ çš„æ¢¯åº¦ï¼Œå¹¶æŒ‰ç…§<span class=\"math inline\">\\(\\sigma=0.5d\\)</span>è¿›è¡Œé«˜æ–¯åŠ æƒï¼Œç„¶åæ’å€¼è®¡ç®—å¾—åˆ°æ¯ä¸ªç§å­ç‚¹çš„å…«ä¸ªæ–¹å‘çš„æ¢¯åº¦ï¼Œæ’å€¼æ–¹æ³•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191009162914982-1684552898801-22.png\"  style=\"zoom:67%;\" /></p>\r\n<p>æ¯ä¸ªç§å­ç‚¹çš„æ¢¯åº¦éƒ½æ˜¯ç”±è¦†ç›–å…¶çš„<span class=\"math inline\">\\(4\\)</span>ä¸ªå­åŒºåŸŸæ’å€¼è€Œå¾—çš„ã€‚å¦‚å›¾ä¸­çš„çº¢è‰²ç‚¹ï¼Œè½åœ¨ç¬¬<span class=\"math inline\">\\(0\\)</span>è¡Œå’Œç¬¬<span class=\"math inline\">\\(1\\)</span>è¡Œä¹‹é—´ï¼Œå¯¹è¿™ä¸¤è¡Œéƒ½æœ‰è´¡çŒ®ã€‚</p>\r\n<ul>\r\n<li>å¯¹ç¬¬<span class=\"math inline\">\\(0\\)</span>è¡Œç¬¬<span class=\"math inline\">\\(3\\)</span>åˆ—ç§å­ç‚¹çš„è´¡çŒ®å› å­ä¸º<span class=\"math inline\">\\(dr\\)</span>ï¼Œå¯¹ç¬¬<span class=\"math inline\">\\(1\\)</span>è¡Œç¬¬<span class=\"math inline\">\\(3\\)</span>åˆ—çš„è´¡çŒ®å› å­ä¸º<span class=\"math inline\">\\(1-dr\\)</span>ï¼Œ</li>\r\n<li>å¯¹é‚»è¿‘ä¸¤åˆ—çš„è´¡çŒ®å› å­ä¸º<span class=\"math inline\">\\(dc\\)</span>å’Œ<span class=\"math inline\">\\(1-dc\\)</span></li>\r\n<li>å¯¹é‚»è¿‘ä¸¤ä¸ªæ–¹å‘çš„è´¡çŒ®å› å­ä¸º<span class=\"math inline\">\\(do\\)</span>å’Œ<span class=\"math inline\">\\(1-do\\)</span>ã€‚</li>\r\n</ul>\r\n<p>æœ€ç»ˆç´¯åŠ åœ¨æ¯ä¸ªæ–¹å‘ä¸Šçš„æ¢¯åº¦å¤§å°ä¸ºï¼š <span class=\"math display\">\\[\r\nweight=w*dr^k(1-dr)^{(1-k)}dc^m(1-dc)^{1-m}do^n(1-do^{1-n})\r\n\\]</span> å…¶ä¸­<span class=\"math inline\">\\(k,m,n\\)</span>ä¸º0æˆ–ä¸º1ã€‚ å¦‚ä¸Šç»Ÿè®¡<span class=\"math inline\">\\(4\\times4\\times8=128\\)</span>ä¸ªæ¢¯åº¦ä¿¡æ¯å³ä¸ºè¯¥å…³é”®ç‚¹çš„ç‰¹å¾å‘é‡ï¼ŒæŒ‰ç…§ç‰¹å¾ç‚¹çš„å¯¹æ¯ä¸ªå…³é”®ç‚¹çš„ç‰¹å¾å‘é‡è¿›è¡Œæ’åºï¼Œå°±å¾—åˆ°äº†SIFTç‰¹å¾æè¿°å‘é‡ã€‚</p>\r\n<p><strong>å®ä¾‹åŒ–sift</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sift = cv.xfeatures2d.SIFT_create()</span><br></pre></td></tr></table></figure>\r\n<p><strong>åˆ©ç”¨<code>sift.detectAndCompute()</code>æ£€æµ‹å…³é”®ç‚¹å¹¶è®¡ç®—</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kp,des = sift.detectAndCompute(gray,<span class=\"literal\">None</span>)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>grayï¼šè¿›è¡Œå…³é”®ç‚¹æ£€æµ‹çš„å›¾åƒï¼Œæ³¨æ„æ˜¯ç°åº¦å›¾åƒ</li>\r\n</ul>\r\n<p>è¿”å›ï¼š</p>\r\n<ul>\r\n<li>kpï¼šå…³é”®ç‚¹ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½ç½®ï¼Œå°ºåº¦ï¼Œæ–¹å‘ä¿¡æ¯</li>\r\n<li>desï¼šå…³é”®ç‚¹æè¿°ç¬¦ï¼Œæ¯ä¸ªå…³é”®ç‚¹å¯¹åº”128ä¸ªæ¢¯åº¦ä¿¡æ¯çš„ç‰¹å¾å‘é‡</li>\r\n</ul>\r\n<p><strong>å°†å…³é”®ç‚¹æ£€æµ‹ç»“æœç»˜åˆ¶åœ¨å›¾åƒä¸Š</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.drawKeypoints(image, keypoints, outputimage, color, flags)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>image: åŸå§‹å›¾åƒ</p></li>\r\n<li><p>keypointsï¼šå…³é”®ç‚¹ä¿¡æ¯ï¼Œå°†å…¶ç»˜åˆ¶åœ¨å›¾åƒä¸Š</p></li>\r\n<li><p>outputimageï¼šè¾“å‡ºå›¾ç‰‡ï¼Œå¯ä»¥æ˜¯åŸå§‹å›¾åƒ</p></li>\r\n<li><p>colorï¼šé¢œè‰²è®¾ç½®ï¼Œé€šè¿‡ä¿®æ”¹bã€gã€rçš„å€¼,æ›´æ”¹ç”»ç¬”çš„é¢œè‰²</p></li>\r\n<li><p>flagsï¼šç»˜å›¾åŠŸèƒ½çš„æ ‡è¯†è®¾ç½®</p>\r\n<ul>\r\n<li><p>cv2.DRAW_MATCHES_FLAGS_DEFAULTï¼šåˆ›å»ºè¾“å‡ºå›¾åƒçŸ©é˜µï¼Œä½¿ç”¨ç°å­˜çš„è¾“å‡ºå›¾åƒç»˜åˆ¶åŒ¹é…å¯¹å’Œç‰¹å¾ç‚¹ï¼Œå¯¹æ¯ä¸€ä¸ªå…³é”®ç‚¹åªç»˜åˆ¶ä¸­é—´ç‚¹</p></li>\r\n<li><p>cv2.DRAW_MATCHES_FLAGS_DRAW_OVER_OUTIMGï¼šä¸åˆ›å»ºè¾“å‡ºå›¾åƒçŸ©é˜µï¼Œè€Œæ˜¯åœ¨è¾“å‡ºå›¾åƒä¸Šç»˜åˆ¶åŒ¹é…å¯¹</p></li>\r\n<li><p>cv2.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTSï¼šå¯¹æ¯ä¸€ä¸ªç‰¹å¾ç‚¹ç»˜åˆ¶å¸¦å¤§å°å’Œæ–¹å‘çš„å…³é”®ç‚¹å›¾å½¢</p></li>\r\n<li><p>cv2.DRAW_MATCHES_FLAGS_NOT_DRAW_SINGLE_POINTSï¼šå•ç‚¹çš„ç‰¹å¾ç‚¹ä¸è¢«ç»˜åˆ¶</p></li>\r\n</ul></li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -2\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<p>åˆ©ç”¨SIFTç®—æ³•åœ¨ä¸­å¤®ç”µè§†å°çš„å›¾ç‰‡ä¸Šæ£€æµ‹å…³é”®ç‚¹ï¼Œå¹¶å°†å…¶ç»˜åˆ¶å‡ºæ¥ï¼š</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv </span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/tv.jpg&#x27;</span>)</span><br><span class=\"line\">gray= cv.cvtColor(img,cv.COLOR_BGR2GRAY)</span><br><span class=\"line\"><span class=\"comment\"># 2 siftå…³é”®ç‚¹æ£€æµ‹</span></span><br><span class=\"line\"><span class=\"comment\"># 2.1 å®ä¾‹åŒ–siftå¯¹è±¡</span></span><br><span class=\"line\">sift = cv.xfeatures2d.SIFT_create()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.2 å…³é”®ç‚¹æ£€æµ‹ï¼škpå…³é”®ç‚¹ä¿¡æ¯åŒ…æ‹¬æ–¹å‘ï¼Œå°ºåº¦ï¼Œä½ç½®ä¿¡æ¯ï¼Œdesæ˜¯å…³é”®ç‚¹çš„æè¿°ç¬¦</span></span><br><span class=\"line\">kp,des=sift.detectAndCompute(gray,<span class=\"literal\">None</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2.3 åœ¨å›¾åƒä¸Šç»˜åˆ¶å…³é”®ç‚¹çš„æ£€æµ‹ç»“æœ</span></span><br><span class=\"line\">cv.drawKeypoints(img,kp,img,flags=cv.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS)</span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">8</span>,<span class=\"number\">6</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.imshow(img[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;siftæ£€æµ‹&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191009181525538-1684553395070-26.png\"  style=\"zoom: 50%;\" /></p>\r\n<h2 id=\"surfç®—æ³•\">SURFç®—æ³•</h2>\r\n<p>ä½¿ç”¨ SIFT ç®—æ³•è¿›è¡Œå…³é”®ç‚¹æ£€æµ‹å’Œæè¿°çš„æ‰§è¡Œé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œ éœ€è¦é€Ÿåº¦æ›´å¿«çš„ç®—æ³•ã€‚ 2006 å¹´ Bayæå‡ºäº† SURF ç®—æ³•ï¼Œæ˜¯SIFTç®—æ³•çš„å¢å¼ºç‰ˆï¼Œå®ƒçš„è®¡ç®—é‡å°ï¼Œè¿ç®—é€Ÿåº¦å¿«ï¼Œæå–çš„ç‰¹å¾ä¸SIFTå‡ ä¹ç›¸åŒï¼Œå°†å…¶ä¸SIFTç®—æ³•å¯¹æ¯”å¦‚ä¸‹ï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191016163330835-1684553312569-24.png\"  style=\"zoom:67%;\" /></p>\r\n<h1 id=\"fastå’Œorbç®—æ³•\">Fastå’ŒORBç®—æ³•</h1>\r\n<h2 id=\"fastç®—æ³•\"><a href=\"https://en.wikipedia.org/wiki/Features_from_accelerated_segment_test\">Fastç®—æ³•</a></h2>\r\n<p>Fast(Features from accelerated segment test)æ˜¯ä¸€ç§è§’ç‚¹æ£€æµ‹ç®—æ³•ï¼ŒEdward Rostenå’ŒTom Drummondåœ¨2006å¹´æå‡ºäº†FASTç®—æ³•ï¼Œå¹¶åœ¨2010å¹´å¯¹å…¶è¿›è¡Œäº†ä¿®æ­£ã€‚è¯¥ç®—æ³•çš„åŸç†æ˜¯å–å›¾åƒä¸­æ£€æµ‹ç‚¹ï¼Œä»¥è¯¥ç‚¹ä¸ºåœ†å¿ƒçš„å‘¨å›´é‚»åŸŸå†…åƒç´ ç‚¹åˆ¤æ–­æ£€æµ‹ç‚¹æ˜¯å¦ä¸ºè§’ç‚¹ï¼Œé€šä¿—çš„è®²å°±æ˜¯<strong>è‹¥ä¸€ä¸ªåƒç´ å‘¨å›´æœ‰ä¸€å®šæ•°é‡çš„åƒç´ ä¸è¯¥ç‚¹åƒç´ å€¼ä¸åŒï¼Œåˆ™è®¤ä¸ºå…¶ä¸ºè§’ç‚¹</strong>ã€‚</p>\r\n<ol type=\"1\">\r\n<li><p>åœ¨å›¾åƒä¸­é€‰å–ä¸€ä¸ªåƒç´ ç‚¹<span class=\"math inline\">\\(p\\)</span>ï¼Œæ¥åˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯å…³é”®ç‚¹ã€‚<span class=\"math display\">\\[I_p\\]</span>ç­‰äºåƒç´ ç‚¹<span class=\"math inline\">\\(p\\)</span>çš„ç°åº¦å€¼ã€‚</p></li>\r\n<li><p>ä»¥<span class=\"math inline\">\\(r\\)</span>ä¸ºåŠå¾„ç”»åœ†ï¼Œè¦†ç›–<span class=\"math inline\">\\(p\\)</span>ç‚¹å‘¨å›´çš„<span class=\"math inline\">\\(M\\)</span>ä¸ªåƒç´ ï¼Œé€šå¸¸æƒ…å†µè®¾ç½®<span class=\"math inline\">\\(r=3\\)</span>ï¼Œåˆ™<span class=\"math inline\">\\(M=16\\)</span>ã€‚ <img src=\"/imgs/$%7Bfiilename%7D/image17-1684555943527-30.jpg\"  style=\"zoom: 67%;\" /></p></li>\r\n<li><p>è®¾ç½®é˜ˆå€¼<span class=\"math inline\">\\(t\\)</span>ï¼Œå¦‚æœåœ¨è¿™<span class=\"math inline\">\\(16\\)</span>ä¸ªåƒç´ ç‚¹ä¸­å­˜åœ¨<span class=\"math inline\">\\(n\\)</span>ä¸ªè¿ç»­åƒç´ ç‚¹çš„ç°åº¦å€¼éƒ½é«˜äº<span class=\"math inline\">\\(I_p+t\\)</span>ï¼Œæˆ–è€…ä½äº<span class=\"math inline\">\\(I_p-t\\)</span>ï¼Œé‚£ä¹ˆåƒç´ ç‚¹<span class=\"math inline\">\\(p\\)</span>å°±è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªè§’ç‚¹ã€‚å¦‚ä¸Šå›¾ä¸­çš„è™šçº¿æ‰€ç¤ºï¼Œä¸€èˆ¬å–å€¼ä¸º<span class=\"math inline\">\\(n=12\\)</span>ã€‚</p></li>\r\n<li><p>é‡‡ç”¨ä¸€ç§<strong>éç‰¹å¾ç‚¹åˆ¤åˆ«</strong>çš„æ–¹æ³•ï¼šé¦–å…ˆå¯¹å€™é€‰ç‚¹çš„å‘¨å›´æ¯ä¸ª<span class=\"math inline\">\\(90^\\circ\\)</span>çš„ç‚¹ï¼ˆ<span class=\"math inline\">\\(1,9,5,13\\)</span>ï¼‰è¿›è¡Œæµ‹è¯•(å…ˆæµ‹è¯•<span class=\"math inline\">\\(1\\)</span>å’Œ<span class=\"math inline\">\\(9\\)</span>ï¼Œå¦‚æœå®ƒä»¬ç¬¦åˆé˜ˆå€¼è¦æ±‚å†æµ‹è¯•<span class=\"math inline\">\\(5\\)</span>å’Œ<span class=\"math inline\">\\(13\\)</span>)ã€‚å¦‚æœ<span class=\"math inline\">\\(p\\)</span>æ˜¯è§’ç‚¹ï¼Œé‚£ä¹ˆè¿™å››ä¸ªç‚¹ä¸­è‡³å°‘æœ‰ 3 ä¸ªè¦ç¬¦åˆé˜ˆå€¼è¦æ±‚ï¼Œå¦åˆ™ç›´æ¥å‰”é™¤ã€‚å¯¹ä¿ç•™ä¸‹æ¥çš„ç‚¹å†ç»§ç»­è¿›è¡Œæµ‹è¯•ã€‚</p></li>\r\n</ol>\r\n<h3 id=\"æœºå™¨å­¦ä¹ çš„è§’ç‚¹æ£€æµ‹å™¨\">æœºå™¨å­¦ä¹ çš„è§’ç‚¹æ£€æµ‹å™¨</h3>\r\n<ol type=\"1\">\r\n<li><p>é€‰æ‹©ä¸€ç»„è®­ç»ƒå›¾ç‰‡</p></li>\r\n<li><p>ä½¿ç”¨<code>FASTç®—æ³•</code>æ‰¾å‡ºæ¯å¹…å›¾åƒçš„ç‰¹å¾ç‚¹ï¼Œå¯¹å›¾åƒä¸­çš„æ¯ä¸€ä¸ªç‰¹å¾ç‚¹ï¼Œå°†å…¶å‘¨å›´çš„<span class=\"math inline\">\\(16\\)</span>ä¸ªåƒç´ å­˜å‚¨æ„æˆä¸€ä¸ªå‘é‡<span class=\"math inline\">\\(P\\)</span>ã€‚ <img src=\"/imgs/$%7Bfiilename%7D/image-20191010114459269-1684556434454-32.png\"  style=\"zoom:67%;\" /></p></li>\r\n<li><p>æ¯ä¸€ä¸ªç‰¹å¾ç‚¹çš„ 16 åƒç´ ç‚¹éƒ½å±äºä¸‹åˆ—ä¸‰ç±»ä¸­çš„ä¸€ç§ $$ S_{px}=</p>\r\n<span class=\"math display\">\\[\\begin{cases}\r\nd\\quad I_{p\\rightarrow x}\\leq I_{p}-t\\quad (darker)\\\\\r\ns\\quad I_{p}-t\\leq I_{p\\rightarrow x}\\leq I_{p}+t\\quad (similar)\\\\\r\nb\\quad I_{p}+t\\leq I_{p\\rightarrow x}\\quad (brighter)\\\\\r\n\r\n\\end{cases}\\]</span>\r\n<p>$$</p></li>\r\n<li><p>æ ¹æ®è¿™äº›åƒç´ ç‚¹çš„åˆ†ç±»ï¼Œç‰¹å¾å‘é‡<span class=\"math inline\">\\(P\\)</span>ä¹Ÿè¢«åˆ†ä¸º<span class=\"math inline\">\\(3\\)</span>ä¸ªå­é›†(<span class=\"math inline\">\\(P_d,P_s,P_b\\)</span>)ï¼Œ</p></li>\r\n<li><p>å®šä¹‰ä¸€ä¸ªæ–°çš„å¸ƒå°”å˜é‡<span class=\"math inline\">\\(K_p\\)</span>ï¼Œå¦‚æœ<span class=\"math inline\">\\(p\\)</span>æ˜¯è§’ç‚¹å°±è®¾ç½®ä¸º<span class=\"math inline\">\\(True\\)</span>ï¼Œå¦‚æœä¸æ˜¯å°±è®¾ç½®ä¸º<span class=\"math inline\">\\(False\\)</span>ã€‚</p></li>\r\n<li><p>åˆ©ç”¨ç‰¹å¾å€¼å‘é‡<span class=\"math inline\">\\(p\\)</span>ï¼Œç›®æ ‡å€¼æ˜¯<span class=\"math inline\">\\(K_p\\)</span>ï¼Œè®­ç»ƒ<span class=\"math inline\">\\(ID3\\)</span>æ ‘ï¼ˆå†³ç­–æ ‘åˆ†ç±»å™¨ï¼‰ã€‚</p></li>\r\n<li><p>å°†æ„å»ºå¥½çš„å†³ç­–æ ‘è¿ç”¨äºå…¶ä»–å›¾åƒçš„å¿«é€Ÿæ£€æµ‹ã€‚</p></li>\r\n</ol>\r\n<h3 id=\"éæå¤§å€¼æŠ‘åˆ¶\">éæå¤§å€¼æŠ‘åˆ¶</h3>\r\n<p><strong>åœ¨ç­›é€‰å‡ºæ¥çš„å€™é€‰è§’ç‚¹ä¸­æœ‰å¾ˆå¤šæ˜¯ç´§æŒ¨åœ¨ä¸€èµ·çš„ï¼Œéœ€è¦é€šè¿‡éæå¤§å€¼æŠ‘åˆ¶æ¥æ¶ˆé™¤è¿™ç§å½±å“ã€‚</strong></p>\r\n<p>ä¸ºæ‰€æœ‰çš„å€™é€‰è§’ç‚¹ç¡®å®šä¸€ä¸ªæ‰“åˆ†å‡½æ•°<span class=\"math inline\">\\(V\\)</span></p>\r\n<ol type=\"1\">\r\n<li><p>åˆ†åˆ«è®¡ç®—<span class=\"math inline\">\\(I_p\\)</span>ä¸åœ†ä¸Š<span class=\"math inline\">\\(16\\)</span>ä¸ªç‚¹çš„åƒç´ å€¼å·®å€¼ï¼Œå–ç»å¯¹å€¼ï¼Œ</p></li>\r\n<li><p>å°†è¿™16ä¸ªç»å¯¹å€¼ç›¸åŠ ï¼Œå°±å¾—åˆ°äº†<span class=\"math inline\">\\(V\\)</span>çš„å€¼ <span class=\"math display\">\\[\r\nV = \\sum_{i}^{16}|I_p-I_i|\r\n\\]</span></p></li>\r\n<li><p>æ¯”è¾ƒæ¯—é‚»å€™é€‰è§’ç‚¹çš„<span class=\"math inline\">\\(V\\)</span>å€¼ï¼ŒæŠŠ<span class=\"math inline\">\\(V\\)</span>å€¼è¾ƒå°çš„å€™é€‰è§’ç‚¹å»é™¤æ‰ã€‚</p></li>\r\n</ol>\r\n<p><strong>å®ä¾‹åŒ–Fast</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fast = =cv.FastFeatureDetector_create( threshold, nonmaxSuppression)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>thresholdï¼šé˜ˆå€¼tï¼Œé»˜è®¤å€¼10</li>\r\n<li>nonmaxSuppressionï¼šæ˜¯å¦è¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œé»˜è®¤å€¼True</li>\r\n</ul>\r\n<p>è¿”å›ï¼š</p>\r\n<ul>\r\n<li>Fastï¼šåˆ›å»ºçš„FastFeatureDetectorå¯¹è±¡</li>\r\n</ul>\r\n<p><strong>åˆ©ç”¨<code>fast.detect()</code>æ£€æµ‹å…³é”®ç‚¹ï¼Œæ²¡æœ‰å¯¹åº”çš„å…³é”®ç‚¹æè¿°</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kp = fast.detect(grayImg, <span class=\"literal\">None</span>)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>gray: è¿›è¡Œå…³é”®ç‚¹æ£€æµ‹çš„å›¾åƒï¼Œæ³¨æ„æ˜¯ç°åº¦å›¾åƒ</li>\r\n</ul>\r\n<p>è¿”å›ï¼š</p>\r\n<ul>\r\n<li>kp: å…³é”®ç‚¹ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½ç½®ï¼Œå°ºåº¦ï¼Œæ–¹å‘ä¿¡æ¯</li>\r\n</ul>\r\n<p><strong>å°†å…³é”®ç‚¹æ£€æµ‹ç»“æœç»˜åˆ¶åœ¨å›¾åƒä¸Š</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.drawKeypoints(image, keypoints, outputimage, color, flags)</span><br></pre></td></tr></table></figure>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -3\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/tv.jpg&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 Fastè§’ç‚¹æ£€æµ‹</span></span><br><span class=\"line\"><span class=\"comment\"># 2.1 åˆ›å»ºä¸€ä¸ªFastå¯¹è±¡ï¼Œä¼ å…¥é˜ˆå€¼ï¼Œæ³¨æ„ï¼šå¯ä»¥å¤„ç†å½©è‰²ç©ºé—´å›¾åƒ</span></span><br><span class=\"line\">fast = cv.FastFeatureDetector_create(threshold=<span class=\"number\">30</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.2 æ£€æµ‹å›¾åƒä¸Šçš„å…³é”®ç‚¹</span></span><br><span class=\"line\">kp = fast.detect(img,<span class=\"literal\">None</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2.3 åœ¨å›¾åƒä¸Šç»˜åˆ¶å…³é”®ç‚¹</span></span><br><span class=\"line\">img2 = cv.drawKeypoints(img, kp, <span class=\"literal\">None</span>, color=(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">255</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.4 è¾“å‡ºé»˜è®¤å‚æ•°</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>( <span class=\"string\">&quot;Threshold: &#123;&#125;&quot;</span>.<span class=\"built_in\">format</span>(fast.getThreshold()) )</span><br><span class=\"line\"><span class=\"built_in\">print</span>( <span class=\"string\">&quot;nonmaxSuppression:&#123;&#125;&quot;</span>.<span class=\"built_in\">format</span>(fast.getNonmaxSuppression()) )</span><br><span class=\"line\"><span class=\"built_in\">print</span>( <span class=\"string\">&quot;neighborhood: &#123;&#125;&quot;</span>.<span class=\"built_in\">format</span>(fast.getType()) )</span><br><span class=\"line\"><span class=\"built_in\">print</span>( <span class=\"string\">&quot;Total Keypoints with nonmaxSuppression: &#123;&#125;&quot;</span>.<span class=\"built_in\">format</span>(<span class=\"built_in\">len</span>(kp)) )</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.5 å…³é—­éæå¤§å€¼æŠ‘åˆ¶</span></span><br><span class=\"line\">fast.setNonmaxSuppression(<span class=\"number\">0</span>)</span><br><span class=\"line\">kp = fast.detect(img,<span class=\"literal\">None</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>( <span class=\"string\">&quot;Total Keypoints without nonmaxSuppression: &#123;&#125;&quot;</span>.<span class=\"built_in\">format</span>(<span class=\"built_in\">len</span>(kp)) )</span><br><span class=\"line\"><span class=\"comment\"># 2.6 ç»˜åˆ¶ä¸ºè¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶çš„ç»“æœ</span></span><br><span class=\"line\">img3 = cv.drawKeypoints(img, kp, <span class=\"literal\">None</span>, color=(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">255</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 ç»˜åˆ¶å›¾åƒ</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">1</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(img2[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŠ å…¥éæå¤§å€¼æŠ‘åˆ¶&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(img3[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;æœªåŠ å…¥éæå¤§å€¼æŠ‘åˆ¶&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191010120822413-1684557401983-34.png\"  style=\"zoom: 50%;\" /></p>\r\n<h2 id=\"orb-ç®—æ³•\"><a href=\"https://medium.com/data-breach/introduction-to-orb-oriented-fast-and-rotated-brief-4220e8ec40cf\">ORB ç®—æ³•</a></h2>\r\n<p>ORBï¼ˆOriented Fast and Rotated Briefï¼‰å¯ä»¥ç”¨æ¥å¯¹å›¾åƒä¸­çš„å…³é”®ç‚¹å¿«é€Ÿåˆ›å»ºç‰¹å¾å‘é‡ï¼Œå¹¶ç”¨è¿™äº›ç‰¹å¾å‘é‡æ¥è¯†åˆ«å›¾åƒä¸­çš„å¯¹è±¡ã€‚</p>\r\n<p>ORBç®—æ³•ç»“åˆäº†Fastå’ŒBriefç®—æ³•ï¼Œæå‡ºäº†æ„é€ é‡‘å­—å¡”ï¼Œä¸ºFastç‰¹å¾ç‚¹æ·»åŠ äº†æ–¹å‘ï¼Œä»è€Œä½¿å¾—å…³é”®ç‚¹å…·æœ‰äº†å°ºåº¦ä¸å˜æ€§å’Œæ—‹è½¬ä¸å˜æ€§ã€‚</p>\r\n<ol type=\"1\">\r\n<li>æ„é€ å°ºåº¦é‡‘å­—å¡”\r\n<ul>\r\n<li>é‡‘å­—å¡”å…±æœ‰<span class=\"math inline\">\\(n\\)</span>å±‚ï¼Œä¸SIFTä¸åŒçš„æ˜¯ï¼Œæ¯ä¸€å±‚ä»…æœ‰ä¸€å¹…å›¾åƒã€‚ç¬¬<span class=\"math inline\">\\(s\\)</span>å±‚çš„å°ºåº¦ä¸º<span class=\"math inline\">\\(\\sigma_s=\\sigma_0^s\\)</span>ï¼Œ <span class=\"math inline\">\\(\\sigma_0\\)</span>æ˜¯åˆå§‹å°ºåº¦ï¼Œé»˜è®¤ä¸º<span class=\"math inline\">\\(1.2\\)</span>ï¼ŒåŸå›¾åœ¨ç¬¬<span class=\"math inline\">\\(0\\)</span>å±‚ã€‚ç¬¬<span class=\"math inline\">\\(s\\)</span>å±‚å›¾åƒçš„å¤§å°<span class=\"math inline\">\\(Size = (H*\\frac{1}{\\sigma_s})\\times(W*\\frac{1}{\\sigma_s})\\)</span></li>\r\n</ul></li>\r\n<li>åœ¨ä¸åŒçš„å°ºåº¦ä¸Šåˆ©ç”¨<code>Fastç®—æ³•</code>æ£€æµ‹ç‰¹å¾ç‚¹\r\n<ul>\r\n<li>é‡‡ç”¨Harrisè§’ç‚¹å“åº”å‡½æ•°ï¼Œæ ¹æ®è§’ç‚¹çš„å“åº”å€¼æ’åºï¼Œé€‰å–å‰<span class=\"math inline\">\\(N\\)</span>ä¸ªç‰¹å¾ç‚¹ï¼Œä½œä¸ºæœ¬å°ºåº¦çš„ç‰¹å¾ç‚¹ã€‚</li>\r\n</ul></li>\r\n<li>è®¡ç®—ç‰¹å¾ç‚¹çš„ä¸»æ–¹å‘\r\n<ul>\r\n<li><p>è®¡ç®—ä»¥ç‰¹å¾ç‚¹ä¸ºåœ†å¿ƒï¼ŒåŠå¾„ä¸º<span class=\"math inline\">\\(r\\)</span>çš„åœ†å½¢é‚»åŸŸå†…çš„ç°åº¦è´¨å¿ƒä½ç½®ï¼Œå°†ä»ç‰¹å¾ç‚¹ä½ç½®åˆ°è´¨å¿ƒä½ç½®çš„æ–¹å‘åšç‰¹å¾ç‚¹çš„ä¸»æ–¹å‘ã€‚ <span class=\"math display\">\\[\r\nm_{pq}=\\sum_{x,y}x^py^qI(x,y)\r\n\\]</span> è´¨å¿ƒä½ç½®ï¼š <span class=\"math inline\">\\(C=(\\frac{m_{10}}{m_{00}},\\frac{m_{01}}{m_{10}})\\)</span></p>\r\n<p>ä¸»æ–¹å‘ï¼š <span class=\"math inline\">\\(\\theta = arctan(m_{01},m_{10})\\)</span></p></li>\r\n</ul></li>\r\n</ol>\r\n<h3 id=\"briefç®—æ³•\">BRIEFç®—æ³•</h3>\r\n<p>äº†è§£å†³æ—‹è½¬ä¸å˜æ€§ï¼Œå°†ç‰¹å¾ç‚¹çš„é‚»åŸŸæ—‹è½¬åˆ°ä¸»æ–¹å‘ä¸Šåˆ©ç”¨<code>Briefç®—æ³•</code>æ„å»ºç‰¹å¾æè¿°ç¬¦ï¼Œè‡³æ­¤å°±å¾—åˆ°äº†ORBçš„ç‰¹å¾æè¿°å‘é‡ã€‚</p>\r\n<p><code>Briefç®—æ³•</code>æ˜¯ä¸€ç§ç‰¹å¾æè¿°å­æå–ç®—æ³•ï¼Œå¹¶éç‰¹å¾ç‚¹çš„æå–ç®—æ³•ï¼ŒåŒ¹é…åªéœ€è¦ä½¿ç”¨ç®€å•çš„æ±‰æ˜è·ç¦»(Hamming Distance)åˆ©ç”¨æ¯”ç‰¹ä¹‹é—´çš„å¼‚æˆ–æ“ä½œå°±å¯ä»¥å®Œæˆã€‚</p>\r\n<ol type=\"1\">\r\n<li>å›¾åƒæ»¤æ³¢\r\n<ul>\r\n<li>åŸå§‹å›¾åƒä¸­å­˜åœ¨å™ªå£°æ—¶ï¼Œä¼šå¯¹ç»“æœäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥éœ€è¦å¯¹å›¾åƒè¿›è¡Œæ»¤æ³¢ï¼Œå»é™¤éƒ¨åˆ†å™ªå£°ã€‚</li>\r\n</ul></li>\r\n<li>é€‰å–ç‚¹å¯¹\r\n<ul>\r\n<li><p>ä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒï¼Œå–<span class=\"math inline\">\\(S\\times S\\)</span>çš„é‚»åŸŸçª—å£ï¼Œåœ¨çª—å£å†…éšæœºé€‰å–<span class=\"math inline\">\\(N\\)</span>ç»„ç‚¹å¯¹ï¼Œä¸€èˆ¬<span class=\"math inline\">\\(N=128,256,512\\)</span>ï¼Œé»˜è®¤æ˜¯<span class=\"math inline\">\\(256\\)</span>ï¼Œå…³äºé€‰å–éšæœºç‚¹å¯¹ï¼Œæä¾›äº†äº”ç§å½¢å¼</p>\r\n<ul>\r\n<li><span class=\"math inline\">\\(x,y\\)</span>æ–¹å‘å¹³å‡åˆ†å¸ƒé‡‡æ ·</li>\r\n<li><span class=\"math inline\">\\(x,y\\)</span>å‡æœä»<span class=\"math inline\">\\(Gauss(0,\\frac{S^2}{25})\\)</span>å„å‘åŒæ€§é‡‡æ ·</li>\r\n<li><span class=\"math inline\">\\(x\\)</span>æœä»<span class=\"math inline\">\\(Gauss(0,\\frac{S^2}{25})\\)</span>ï¼Œ<span class=\"math inline\">\\(y\\)</span>æœä»<span class=\"math inline\">\\(Gauss(0,\\frac{S^2}{100})\\)</span>é‡‡æ ·</li>\r\n<li><span class=\"math inline\">\\(x,y\\)</span>ä»ç½‘æ ¼ä¸­éšæœºè·å–</li>\r\n<li><span class=\"math inline\">\\(x\\)</span>ä¸€ç›´åœ¨<span class=\"math inline\">\\((0,0)\\)</span>ï¼Œ<span class=\"math inline\">\\(y\\)</span>ä»ç½‘æ ¼ä¸­éšæœºé€‰å–</li>\r\n</ul>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191010153907973-1684559140937-36.png\"  style=\"zoom:67%;\" /></p></li>\r\n<li><p>å›¾ä¸­ä¸€æ¡çº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹å°±æ˜¯ä¸€ç»„ç‚¹å¯¹ï¼Œå…¶ä¸­ç¬¬äºŒç§æ–¹æ³•çš„ç»“æœæ¯”è¾ƒå¥½ã€‚</p></li>\r\n</ul></li>\r\n<li>æ„å»ºæè¿°ç¬¦\r\n<ul>\r\n<li><p>å‡è®¾<span class=\"math inline\">\\(x,y\\)</span>æ˜¯æŸä¸ªç‚¹å¯¹çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œ<span class=\"math inline\">\\(p(x),p(y)\\)</span>æ˜¯ä¸¤ç‚¹å¯¹åº”çš„åƒç´ å€¼ï¼Œ <span class=\"math display\">\\[\r\nt(x,y)=\\begin{cases}1 &amp;if&amp;p(x)&gt;p(y)\\\\ 0&amp; else\\end{cases}\r\n\\]</span></p></li>\r\n<li><p>å¯¹æ¯ä¸€ä¸ªç‚¹å¯¹éƒ½è¿›è¡Œä¸Šè¿°çš„äºŒè¿›åˆ¶èµ‹å€¼ï¼Œå½¢æˆ<code>Brief</code>çš„å…³é”®ç‚¹çš„æè¿°ç‰¹å¾å‘é‡ï¼Œè¯¥å‘é‡ä¸€èˆ¬ä¸º<span class=\"math inline\">\\(128-512\\)</span>ä½çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ä»…åŒ…å«<span class=\"math inline\">\\(1\\)</span>å’Œ<span class=\"math inline\">\\(0\\)</span></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191010161944491-1684559749207-38.png\" style=\"zoom: 50%;\" /></p></li>\r\n</ul></li>\r\n</ol>\r\n<p><strong>å®ä¾‹åŒ–ORB</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">orb = cv.xfeatures2d.orb_create(nfeatures)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>nfeatures: ç‰¹å¾ç‚¹çš„æœ€å¤§æ•°é‡</li>\r\n</ul>\r\n<p><strong>åˆ©ç”¨<code>orb.detectAndCompute()</code>æ£€æµ‹å…³é”®ç‚¹å¹¶è®¡ç®—</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kp,des = orb.detectAndCompute(gray,<span class=\"literal\">None</span>)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>gray: è¿›è¡Œå…³é”®ç‚¹æ£€æµ‹çš„å›¾åƒï¼Œæ³¨æ„æ˜¯ç°åº¦å›¾åƒ</li>\r\n</ul>\r\n<p>è¿”å›ï¼š</p>\r\n<ul>\r\n<li>kp: å…³é”®ç‚¹ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½ç½®ï¼Œå°ºåº¦ï¼Œæ–¹å‘ä¿¡æ¯</li>\r\n<li>des: å…³é”®ç‚¹æè¿°ç¬¦ï¼Œæ¯ä¸ªå…³é”®ç‚¹BRIEFç‰¹å¾å‘é‡ï¼ŒäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œ</li>\r\n</ul>\r\n<p><strong>å°†å…³é”®ç‚¹æ£€æµ‹ç»“æœç»˜åˆ¶åœ¨å›¾åƒä¸Š</strong></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.drawKeypoints(image, keypoints, outputimage, color, flags)</span><br></pre></td></tr></table></figure>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -4\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 å›¾åƒè¯»å–</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/tv.jpg&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2 ORBè§’ç‚¹æ£€æµ‹</span></span><br><span class=\"line\"><span class=\"comment\"># 2.1 å®ä¾‹åŒ–ORBå¯¹è±¡</span></span><br><span class=\"line\">orb = cv.ORB_create(nfeatures=<span class=\"number\">500</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2.2 æ£€æµ‹å…³é”®ç‚¹,å¹¶è®¡ç®—ç‰¹å¾æè¿°ç¬¦</span></span><br><span class=\"line\">kp,des = orb.detectAndCompute(img,<span class=\"literal\">None</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(des.shape)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 å°†å…³é”®ç‚¹ç»˜åˆ¶åœ¨å›¾åƒä¸Š</span></span><br><span class=\"line\">img2 = cv.drawKeypoints(img, kp, <span class=\"literal\">None</span>, color=(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">255</span>), flags=<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4. ç»˜åˆ¶å›¾åƒ</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.imshow(img2[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191010162532196-1684559841023-40.png\"  style=\"zoom: 45%;\" /></p>\r\n",
            "tags": [
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/OpenCV/OpenCV%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86-%E4%B8%8B/",
            "url": "https://liujk6525.github.io/OpenCV/OpenCV%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86-%E4%B8%8B/",
            "title": "OpenCVå›¾åƒå¤„ç†(ä¸‹)",
            "date_published": "2023-05-19T00:30:52.000Z",
            "content_html": "<h1 id=\"ç›´æ–¹å›¾\">ç›´æ–¹å›¾</h1>\r\n<h2 id=\"å›¾åƒç›´æ–¹å›¾\">å›¾åƒç›´æ–¹å›¾</h2>\r\n<p>åœ¨ç»Ÿè®¡å­¦ä¸­ï¼Œ<a href=\"https://zh.wikipedia.org/wiki/%E7%9B%B4%E6%96%B9%E5%9B%BE\">ç›´æ–¹å›¾</a>æ˜¯ä¸€ç§å¯¹æ•°æ®åˆ†å¸ƒæƒ…å†µçš„å›¾å½¢è¡¨ç¤ºï¼Œæ˜¯ä¸€ç§äºŒç»´ç»Ÿè®¡å›¾è¡¨ï¼Œå®ƒçš„ä¸¤ä¸ª åæ ‡åˆ†åˆ«æ˜¯ç»Ÿè®¡æ ·æœ¬å’Œè¯¥æ ·æœ¬å¯¹åº”çš„æŸä¸ªå±æ€§çš„åº¦é‡ï¼Œä»¥é•¿æ¡å›¾(bar)çš„å½¢å¼å…·ä½“è¡¨ç°ã€‚å› ä¸ºç›´æ–¹å›¾çš„é•¿åº¦åŠå®½åº¦å¾ˆé€‚åˆç”¨æ¥è¡¨ç°æ•°é‡ä¸Šçš„å˜åŒ–ï¼Œæ‰€ä»¥è¾ƒå®¹æ˜“è§£è¯»å·®å¼‚å°çš„æ•°å€¼ã€‚</p>\r\n<span id=\"more\"></span>\r\n<p>å›¾åƒç›´æ–¹å›¾ï¼ˆImage Histogramï¼‰æ˜¯ç”¨ä»¥è¡¨ç¤ºæ•°å­—å›¾åƒä¸­äº®åº¦åˆ†å¸ƒçš„ç›´æ–¹å›¾ï¼Œæ ‡ç»˜äº†å›¾åƒä¸­æ¯ä¸ªäº®åº¦å€¼çš„åƒç´ ä¸ªæ•°ã€‚è¿™ç§ç›´æ–¹å›¾ä¸­ï¼Œæ¨ªåæ ‡çš„å·¦ä¾§ä¸ºè¾ƒæš—çš„åŒºåŸŸï¼Œè€Œå³ä¾§ä¸ºè¾ƒäº®çš„åŒºåŸŸã€‚å› æ­¤ä¸€å¼ è¾ƒæš—å›¾ç‰‡çš„ç›´æ–¹å›¾ä¸­çš„æ•°æ®å¤šé›†ä¸­äºå·¦ä¾§å’Œä¸­é—´éƒ¨åˆ†ï¼Œè€Œæ•´ä½“æ˜äº®ã€åªæœ‰å°‘é‡é˜´å½±çš„å›¾åƒåˆ™ç›¸åã€‚</p>\r\n<p>å‡è®¾æœ‰ä¸€å¼ å›¾åƒçš„ä¿¡æ¯ï¼ˆç°åº¦å€¼<span class=\"math inline\">\\(0-255\\)</span>ï¼‰ï¼ŒæŒ‰ä¸€å®šè§„å¾‹å°†è¿™ä¸ªèŒƒå›´åˆ†å‰²æˆå­åŒºåŸŸï¼ˆä¹Ÿå°±æ˜¯ binsï¼‰ã€‚å¦‚ä¸‹æŒ‰<span class=\"math inline\">\\(bin=16\\)</span>åˆ†å‰² <span class=\"math display\">\\[\r\n[0,255]=\\underbrace{[0,15]}_{b_{1}}\\cup\\underbrace{[16,30]}_{b_{2}}\\cdots\\cup\\underbrace{[240,255]}_{b_{16}}\r\n\\]</span> å†ç»Ÿè®¡<span class=\"math inline\">\\(bin(i)\\)</span> çš„åƒç´ æ•°ç›®ã€‚å¾—åˆ°ä»¥<span class=\"math inline\">\\(x\\)</span>è½´è¡¨ç¤º<span class=\"math inline\">\\(bin\\)</span>ï¼Œ<span class=\"math inline\">\\(y\\)</span> è½´è¡¨ç¤ºå„ä¸ª<span class=\"math inline\">\\(bin\\)</span>ä¸­çš„åƒç´ ä¸ªæ•°çš„å›¾åƒç›´æ–¹å›¾</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190928144352467-1684457137421-1.png\"  style=\"zoom:67%;\" /></p>\r\n<p><strong>æ³¨æ„ï¼š</strong></p>\r\n<ul>\r\n<li><p>ç›´æ–¹å›¾æ˜¯æ ¹æ®ç°åº¦å›¾è¿›è¡Œç»˜åˆ¶çš„ï¼Œè€Œä¸æ˜¯å½©è‰²å›¾åƒã€‚</p></li>\r\n<li><p>ç›´æ–¹å›¾æ˜¯å›¾åƒä¸­åƒç´ å¼ºåº¦åˆ†å¸ƒçš„å›¾å½¢è¡¨è¾¾æ–¹å¼ã€‚ â€ƒâ€ƒ</p></li>\r\n<li><p>å®ƒç»Ÿè®¡äº†æ¯ä¸€ä¸ªå¼ºåº¦å€¼æ‰€å…·æœ‰çš„åƒç´ ä¸ªæ•°ã€‚</p></li>\r\n<li><p>ä¸åŒçš„å›¾åƒçš„ç›´æ–¹å›¾å¯èƒ½æ˜¯ç›¸åŒçš„</p></li>\r\n</ul>\r\n<h2 id=\"ç›´æ–¹å›¾çš„è®¡ç®—å’Œç»˜åˆ¶\">ç›´æ–¹å›¾çš„è®¡ç®—å’Œç»˜åˆ¶</h2>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv2.calcHist(images,channels,mask,histSize,ranges[,hist[,accumulate]])</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>imagesï¼šåŸå›¾åƒã€‚å½“ä¼ å…¥å‡½æ•°æ—¶åº”è¯¥ç”¨ä¸­æ‹¬å·[]æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ï¼š[img]ã€‚</li>\r\n<li>channelsï¼šå¦‚æœè¾“å…¥å›¾åƒæ˜¯ç°åº¦å›¾ï¼Œå®ƒçš„å€¼å°±æ˜¯[0]ï¼›å¦‚æœæ˜¯å½©è‰²å›¾åƒçš„è¯ï¼Œä¼ å…¥çš„å‚æ•°å¯ä»¥æ˜¯[0]ï¼Œ[1]ï¼Œ[2]ã€‚å®ƒä»¬åˆ†åˆ«å¯¹åº”ç€Bï¼ŒGï¼ŒRé€šé“ã€‚ ã€€ã€€</li>\r\n<li>mask: æ©æ¨¡å›¾åƒã€‚è¦ç»Ÿè®¡æ•´å¹…å›¾åƒçš„ç›´æ–¹å›¾å°±æŠŠå®ƒè®¾ä¸º Noneã€‚ä½†æ˜¯å¦‚æœä½ æƒ³ç»Ÿè®¡å›¾åƒæŸä¸€éƒ¨åˆ†çš„ç›´æ–¹å›¾çš„è¯ï¼Œä½ å°±éœ€è¦åˆ¶ä½œä¸€ä¸ªæ©æ¨¡å›¾åƒï¼Œå¹¶ä½¿ç”¨å®ƒã€‚ã€€ã€€</li>\r\n<li>histsizeï¼š<span class=\"math inline\">\\(bin\\)</span>çš„æ•°ç›®ã€‚ä¹Ÿåº”è¯¥ç”¨ä¸­æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ï¼š[256]ã€‚ ã€€ã€€</li>\r\n<li>rangesï¼šåƒç´ å€¼èŒƒå›´ï¼Œé€šå¸¸ä¸º[0ï¼Œ256]</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç </h3>\r\n<p>ç»˜åˆ¶ç›´æ–¹å›¾</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 ç›´æ¥ä»¥ç°åº¦å›¾çš„æ–¹å¼è¯»å…¥</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/cat.jpeg&#x27;</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 ç»Ÿè®¡ç°åº¦å›¾</span></span><br><span class=\"line\">histr = cv.calcHist([img],[<span class=\"number\">0</span>],<span class=\"literal\">None</span>,[<span class=\"number\">256</span>],[<span class=\"number\">0</span>,<span class=\"number\">256</span>])</span><br><span class=\"line\"><span class=\"comment\"># 3 ç»˜åˆ¶ç°åº¦å›¾</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">6</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.plot(histr)</span><br><span class=\"line\">plt.grid()</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190928155000064-1684458391504-3.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"æ©è†œ\">æ©è†œ</h2>\r\n<p>æ©è†œæ˜¯ç”¨é€‰å®šçš„å›¾åƒã€å›¾å½¢æˆ–ç‰©ä½“ï¼Œå¯¹è¦å¤„ç†çš„å›¾åƒè¿›è¡Œé®æŒ¡ï¼Œæ¥æ§åˆ¶å›¾åƒå¤„ç†çš„åŒºåŸŸã€‚</p>\r\n<p>åœ¨æ•°å­—å›¾åƒå¤„ç†ä¸­ï¼Œé€šå¸¸ä½¿ç”¨äºŒç»´çŸ©é˜µæ•°ç»„è¿›è¡Œæ©è†œã€‚æ©è†œæ˜¯ç”±0å’Œ1ç»„æˆä¸€ä¸ªäºŒè¿›åˆ¶å›¾åƒï¼Œåˆ©ç”¨è¯¥æ©è†œå›¾åƒè¦å¤„ç†çš„å›¾åƒè¿›è¡Œæ©è†œï¼Œå…¶ä¸­1å€¼çš„åŒºåŸŸè¢«å¤„ç†ï¼Œ0 å€¼åŒºåŸŸè¢«å±è”½ï¼Œä¸ä¼šå¤„ç†ã€‚</p>\r\n<p>ä½¿ç”¨<code>cv.calcHist()</code>æ¥æŸ¥æ‰¾å®Œæ•´å›¾åƒçš„ç›´æ–¹å›¾ã€‚</p>\r\n<p>å¦‚æœè¦æŸ¥æ‰¾å›¾åƒæŸäº›åŒºåŸŸçš„ç›´æ–¹å›¾ï¼Œ åªéœ€åœ¨è¦æŸ¥æ‰¾ç›´æ–¹å›¾çš„åŒºåŸŸä¸Šåˆ›å»ºä¸€ä¸ªç™½è‰²çš„æ©è†œå›¾åƒï¼Œå¦åˆ™åˆ›å»ºé»‘è‰²ï¼Œ ç„¶åå°†å…¶ä½œä¸ºæ©ç maskä¼ é€’å³å¯ã€‚</p>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -1\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1. ç›´æ¥ä»¥ç°åº¦å›¾çš„æ–¹å¼è¯»å…¥</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/cat.jpeg&#x27;</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2. åˆ›å»ºè’™ç‰ˆ</span></span><br><span class=\"line\">mask = np.zeros(img.shape[:<span class=\"number\">2</span>], np.uint8)</span><br><span class=\"line\">mask[<span class=\"number\">400</span>:<span class=\"number\">650</span>, <span class=\"number\">200</span>:<span class=\"number\">500</span>] = <span class=\"number\">255</span></span><br><span class=\"line\"><span class=\"comment\"># 3.æ©æ¨¡</span></span><br><span class=\"line\">masked_img = cv.bitwise_and(img,img,mask = mask)</span><br><span class=\"line\"><span class=\"comment\"># 4. ç»Ÿè®¡æ©è†œåå›¾åƒçš„ç°åº¦å›¾</span></span><br><span class=\"line\">mask_histr = cv.calcHist([img],[<span class=\"number\">0</span>],mask,[<span class=\"number\">256</span>],[<span class=\"number\">1</span>,<span class=\"number\">256</span>])</span><br><span class=\"line\"><span class=\"comment\"># 5. å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">2</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>))</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">0</span>].imshow(img,cmap=plt.cm.gray)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">1</span>].imshow(mask,cmap=plt.cm.gray)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;è’™ç‰ˆæ•°æ®&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">0</span>].imshow(masked_img,cmap=plt.cm.gray)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;æ©è†œåæ•°æ®&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">1</span>].plot(mask_histr)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">1</span>].grid()</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;ç°åº¦ç›´æ–¹å›¾&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190928160241831-1684458631460-5.png\"  style=\"zoom:67%;\" /></p>\r\n<h1 id=\"ç›´æ–¹å›¾å‡è¡¡åŒ–\">ç›´æ–¹å›¾å‡è¡¡åŒ–</h1>\r\n<p><a href=\"https://baike.baidu.com/item/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1/4950487\">ç›´æ–¹å›¾å‡è¡¡åŒ–</a>æ˜¯æŠŠåŸå§‹å›¾åƒçš„ç°åº¦ç›´æ–¹å›¾ä»æ¯”è¾ƒé›†ä¸­çš„æŸä¸ªç°åº¦åŒºé—´å˜æˆåœ¨æ›´å¹¿æ³›ç°åº¦èŒƒå›´å†…çš„åˆ†å¸ƒã€‚</p>\r\n<p>ç›´æ–¹å›¾å‡è¡¡åŒ–å°±æ˜¯å¯¹å›¾åƒè¿›è¡Œéçº¿æ€§æ‹‰ä¼¸ï¼Œé‡æ–°åˆ†é…å›¾åƒåƒç´ å€¼ï¼Œä½¿ä¸€å®šç°åº¦èŒƒå›´å†…çš„åƒç´ æ•°é‡å¤§è‡´ç›¸åŒã€‚</p>\r\n<p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œäº®åº¦å¯ä»¥æ›´å¥½åœ°åœ¨ç›´æ–¹å›¾ä¸Šåˆ†å¸ƒã€‚è¿™æ ·å¯ä»¥ç”¨äºå¢å¼ºå±€éƒ¨çš„å¯¹æ¯”åº¦è€Œä¸å½±å“æ•´ä½“çš„å¯¹æ¯”åº¦</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/300px-Histogrammeinebnung.png\"  style=\"zoom: 80%;\" /></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dst = cv.equalizeHist(img)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>img: ç°åº¦å›¾åƒ</li>\r\n</ul>\r\n<p>è¿”å›ï¼š</p>\r\n<ul>\r\n<li>dst : å‡è¡¡åŒ–åçš„ç»“æœ</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -2\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1. ç›´æ¥ä»¥ç°åº¦å›¾çš„æ–¹å¼è¯»å…¥</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/cat.jpeg&#x27;</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2. å‡è¡¡åŒ–å¤„ç†</span></span><br><span class=\"line\">dst = cv.equalizeHist(img)</span><br><span class=\"line\"><span class=\"comment\"># 3. ç»“æœå±•ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">2</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(img,cmap=plt.cm.gray)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(dst,cmap=plt.cm.gray)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;å‡è¡¡åŒ–åç»“æœ&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190928163431354-1684460359762-9.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"è‡ªé€‚åº”çš„ç›´æ–¹å›¾å‡è¡¡åŒ–\">è‡ªé€‚åº”çš„ç›´æ–¹å›¾å‡è¡¡åŒ–</h2>\r\n<p>ä¸Šè¿°çš„ç›´æ–¹å›¾å‡è¡¡ï¼Œæˆ‘ä»¬è€ƒè™‘çš„æ˜¯å›¾åƒçš„å…¨å±€å¯¹æ¯”åº¦ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™æ ·åšçš„æ•ˆæœå¹¶ä¸å¥½ï¼Œä½†ï¼Œä¼šä¸¢å¤±äº†å¾ˆå¤šä¿¡æ¯ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191024105039014-1684460404147-11.png\"  style=\"zoom:67%;\" /></p>\r\n<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ éœ€è¦ä½¿ç”¨è‡ªé€‚åº”çš„ç›´æ–¹å›¾å‡è¡¡åŒ–ã€‚</p>\r\n<ol type=\"1\">\r\n<li>æ•´å¹…å›¾åƒä¼šè¢«åˆ†æˆå¾ˆå¤šå°å—ï¼Œè¿™äº›å°å—è¢«ç§°ä¸º<code>tiles</code></li>\r\n<li>ç„¶åå†åˆ†åˆ«å¯¹æ¯ä¸ªå°å—è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–ã€‚ æ‰€ä»¥åœ¨æ¯ä¸ªåŒºåŸŸä¸­ï¼Œ ç›´æ–¹å›¾ä¼šé›†ä¸­åœ¨æŸä¸€ä¸ªå°çš„åŒºåŸŸä¸­ã€‚å¦‚æœæœ‰å™ªå£°çš„è¯ï¼Œå™ªå£°ä¼šè¢«æ”¾å¤§ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µçš„å‡ºç°è¦ä½¿ç”¨å¯¹æ¯”åº¦é™åˆ¶ã€‚å¯¹äºæ¯ä¸ªå°å—æ¥è¯´ï¼Œå¦‚æœç›´æ–¹å›¾ä¸­çš„ <span class=\"math inline\">\\(bin\\)</span>è¶…è¿‡å¯¹æ¯”åº¦çš„ä¸Šé™çš„è¯ï¼Œå°±æŠŠå…¶ä¸­çš„åƒç´ ç‚¹å‡åŒ€åˆ†æ•£åˆ°å…¶ä»–<span class=\"math inline\">\\(bins\\)</span>ä¸­ï¼Œç„¶ååœ¨è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–ã€‚</li>\r\n</ol>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/300px-Clahe-redist.svg.png\"  style=\"zoom:90%;\" /></p>\r\n<ol start=\"3\" type=\"1\">\r\n<li>æœ€åï¼Œä¸ºäº†å»é™¤æ¯ä¸€ä¸ªå°å—ä¹‹é—´çš„è¾¹ç•Œï¼Œå†ä½¿ç”¨åŒçº¿æ€§å·®å€¼ï¼Œå¯¹æ¯ä¸€å°å—è¿›è¡Œæ‹¼æ¥ã€‚</li>\r\n</ol>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.createCLAHE(clipLimit, tileGridSize)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>clipLimitï¼šå¯¹æ¯”åº¦é™åˆ¶ï¼Œé»˜è®¤æ˜¯40</li>\r\n<li>tileGridSizeï¼šåˆ†å—çš„å¤§å°ï¼Œé»˜è®¤ä¸º<span class=\"math inline\">\\(8\\times8\\)</span></li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -3\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"comment\"># 1. ä»¥ç°åº¦å›¾å½¢å¼è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/cat.jpeg&#x27;</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2. åˆ›å»ºä¸€ä¸ªè‡ªé€‚åº”å‡è¡¡åŒ–çš„å¯¹è±¡ï¼Œå¹¶åº”ç”¨äºå›¾åƒ</span></span><br><span class=\"line\">clahe = cv.createCLAHE(clipLimit=<span class=\"number\">2.0</span>, tileGridSize=(<span class=\"number\">8</span>,<span class=\"number\">8</span>))</span><br><span class=\"line\">cl1 = clahe.apply(img)</span><br><span class=\"line\"><span class=\"comment\"># 3. å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">1</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(img,cmap=plt.cm.gray)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(cl1,cmap=plt.cm.gray)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;è‡ªé€‚åº”å‡è¡¡åŒ–åçš„ç»“æœ&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190928165605432-1684460980293-17.png\"  style=\"zoom:67%;\" /></p>\r\n<p>ä¸å‡è¡¡åŒ–ç›¸æ¯”ï¼Œå¯ä»¥çœ‹åˆ°åœ¨çŒ«è…¿å¤„ä¸å†æ˜¾å¾—æš—é»‘ã€‚</p>\r\n<h1 id=\"è¾¹ç¼˜æ£€æµ‹\">è¾¹ç¼˜æ£€æµ‹</h1>\r\n<p><a href=\"https://baike.baidu.com/item/%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B/3221648\">è¾¹ç¼˜æ£€æµ‹</a>æ˜¯å›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰ä¸­çš„åŸºæœ¬é—®é¢˜ï¼Œè¾¹ç¼˜æ£€æµ‹çš„ç›®çš„æ˜¯æ ‡è¯†æ•°å­—å›¾åƒä¸­äº®åº¦å˜åŒ–æ˜æ˜¾çš„ç‚¹ã€‚</p>\r\n<p>è¾¹ç¼˜æ£€æµ‹çš„æ–¹æ³•ç»å¤§éƒ¨åˆ†å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç±»</p>\r\n<ul>\r\n<li><p><strong>åŸºäºæœç´¢ï¼š</strong>é€šè¿‡å¯»æ‰¾<strong>å›¾åƒä¸€é˜¶å¯¼æ•°ä¸­çš„æœ€å¤§å€¼</strong>æ¥æ£€æµ‹è¾¹ç•Œï¼Œç„¶ååˆ©ç”¨è®¡ç®—ç»“æœä¼°è®¡è¾¹ç¼˜çš„å±€éƒ¨æ–¹å‘ï¼Œé€šå¸¸é‡‡ç”¨æ¢¯åº¦çš„æ–¹å‘ï¼Œå¹¶åˆ©ç”¨æ­¤æ–¹å‘æ‰¾åˆ°å±€éƒ¨æ¢¯åº¦æ¨¡çš„æœ€å¤§å€¼ï¼Œä»£è¡¨ç®—æ³•æ˜¯<code>Sobelç®—å­</code>å’Œ<code>Scharrç®—å­</code>ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190929104240226-1684461871286-19.png\"  style=\"zoom:67%;\" /></p></li>\r\n<li><p><strong>åŸºäºé›¶ç©¿è¶Šï¼š</strong>é€šè¿‡å¯»æ‰¾<strong>å›¾åƒäºŒé˜¶å¯¼æ•°é›¶ç©¿è¶Š</strong>æ¥å¯»æ‰¾è¾¹ç•Œï¼Œä»£è¡¨ç®—æ³•æ˜¯<code>Laplacianç®—å­</code></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190929104430480-1684462287627-21.png\"  style=\"zoom:67%;\" /></p></li>\r\n</ul>\r\n<h2 id=\"sobelç®—å­-åŸºäºæœç´¢\"><a href=\"https://baike.baidu.com/item/%E7%B4%A2%E8%B4%9D%E5%B0%94%E7%AE%97%E5%AD%90/15805328\"><code>Sobelç®—å­</code></a>-åŸºäºæœç´¢</h2>\r\n<p>å¯¹äºä¸è¿ç»­çš„å‡½æ•°ï¼Œä¸€é˜¶å¯¼æ•°å¯ä»¥å†™ä½œ<span class=\"math inline\">\\(f&#39;(x)=f(x)-f(x-1)\\)</span>æˆ–è€…<span class=\"math inline\">\\(f&#39;(x)=f(x+1)-f(x)\\)</span>ï¼Œæ‰€ä»¥æœ‰ <span class=\"math display\">\\[\r\nf&#39;(x)=\\frac{f(x+1)-f(x-1)}{2}\r\n\\]</span> å‡è®¾è¦å¤„ç†çš„å›¾åƒä¸º<span class=\"math inline\">\\(I\\)</span>ï¼Œåœ¨ä¸¤ä¸ªæ–¹å‘æ±‚å¯¼</p>\r\n<ol type=\"1\">\r\n<li><strong>æ°´å¹³å˜åŒ–</strong>ï¼šå°†å›¾åƒ<span class=\"math inline\">\\(I\\)</span>ä¸å¥‡æ•°å¤§å°çš„æ¨¡ç‰ˆè¿›è¡Œå·ç§¯ï¼Œç»“æœä¸º<span class=\"math inline\">\\(G_x\\)</span>ã€‚</li>\r\n</ol>\r\n<ul>\r\n<li>æ¯”å¦‚ï¼Œå½“æ¨¡æ¿å¤§å°ä¸º<span class=\"math inline\">\\(3\\times3\\)</span>æ—¶, <span class=\"math display\">\\[\r\nG_x=\\left[\\begin{matrix}-1&amp;0&amp;+1\\\\-2&amp;0&amp;+2\\\\-1&amp;0&amp;+1\\end{matrix}\\right]*I\r\n\\]</span></li>\r\n</ul>\r\n<ol start=\"2\" type=\"1\">\r\n<li><p><strong>å‚ç›´å˜åŒ–</strong>ï¼šå°†å›¾åƒ<span class=\"math inline\">\\(I\\)</span>ä¸å¥‡æ•°å¤§å°çš„æ¨¡æ¿è¿›è¡Œå·ç§¯ï¼Œç»“æœä¸º<span class=\"math inline\">\\(G_y\\)</span>ã€‚</p>\r\n<ul>\r\n<li>æ¯”å¦‚ï¼Œå½“æ¨¡æ¿å¤§å°ä¸º<span class=\"math inline\">\\(3\\times3\\)</span>æ—¶, <span class=\"math display\">\\[\r\nG_y=\\left[\\begin{matrix}-1&amp;-2&amp;-1\\\\0&amp;0&amp;0\\\\+1&amp;+2&amp;+1\\end{matrix}\\right]*I\r\n\\]</span></li>\r\n</ul></li>\r\n</ol>\r\n<p>åœ¨å›¾åƒçš„æ¯ä¸€ç‚¹ï¼Œé€šè¿‡å…¬å¼æ±‚å‡ºï¼š <span class=\"math display\">\\[\r\nG=\\sqrt{G_x^2+G_y^2}\r\n\\]</span> ç»Ÿè®¡æå¤§å€¼æ‰€åœ¨çš„ä½ç½®ï¼Œå°±æ˜¯å›¾åƒçš„è¾¹ç¼˜ã€‚</p>\r\n<p><strong>æ³¨æ„ï¼š</strong></p>\r\n<ul>\r\n<li>å½“æ ¸å¤§å°ä¸º<span class=\"math inline\">\\(3\\times3\\)</span>æ—¶, ä»¥ä¸Š<code>Sobel</code>å·ç§¯æ ¸å¯èƒ½äº§ç”Ÿæ¯”è¾ƒæ˜æ˜¾çš„è¯¯å·®ï¼Œ</li>\r\n<li>ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>Scharr</code>å‡½æ•°ï¼Œä½†è¯¥å‡½æ•°ä»…ä½œç”¨äºå¤§å°ä¸º<span class=\"math inline\">\\(3\\times3\\)</span>çš„å·ç§¯æ ¸ã€‚è¯¥å‡½æ•°çš„è¿ç®—ä¸<code>Sobel</code>å‡½æ•°ä¸€æ ·å¿«ï¼Œä½†ç»“æœå´æ›´åŠ ç²¾ç¡®ï¼Œå…¶è®¡ç®—æ–¹æ³•ä¸º:</li>\r\n</ul>\r\n<p><span class=\"math display\">\\[\r\nG_x=\\left[\\begin{matrix}-3&amp;0&amp;+3\\\\-10&amp;0&amp;+10\\\\-3&amp;0&amp;+3\\end{matrix}\\right]*I\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nG_y=\\left[\\begin{matrix}-3&amp;-10&amp;-3\\\\0&amp;0&amp;0\\\\+3&amp;+10&amp;+3\\end{matrix}\\right]*I\r\n\\]</span></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sobel_x_or_y = cv2.Sobel(src, ddepth, dx, dy, dst, ksize, scale, delta, borderType)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>srcï¼šä¼ å…¥çš„å›¾åƒ</p></li>\r\n<li><p>ddepthï¼šå›¾åƒçš„æ·±åº¦</p></li>\r\n<li><p>dxå’Œdyï¼šæŒ‡æ±‚å¯¼çš„é˜¶æ•°ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œå–å€¼ä¸º0ã€1ã€‚</p></li>\r\n<li><p>ksizeï¼šæ˜¯<code>Sobelç®—å­</code>çš„å¤§å°ï¼Œå³å·ç§¯æ ¸çš„å¤§å°ï¼Œé»˜è®¤ä¸º3ã€‚</p>\r\n<p><strong>æ³¨æ„ï¼š</strong>å¦‚æœksize=-1ï¼Œå°±æ¼”å˜æˆä¸º<span class=\"math inline\">\\(3\\times3\\)</span>çš„<code>Scharrç®—å­</code>ã€‚</p></li>\r\n<li><p>scaleï¼šç¼©æ”¾å¯¼æ•°çš„æ¯”ä¾‹å¸¸æ•°ï¼Œé»˜è®¤æƒ…å†µä¸ºæ²¡æœ‰ä¼¸ç¼©ç³»æ•°ã€‚</p></li>\r\n<li><p>borderTypeï¼šå›¾åƒè¾¹ç•Œçš„æ¨¡å¼ï¼Œé»˜è®¤å€¼ä¸ºcv2.BORDER_DEFAULTã€‚</p></li>\r\n</ul>\r\n<p><code>Sobelå‡½æ•°</code>æ±‚å¯¼åä¼šæœ‰è´Ÿå€¼ï¼Œè¿˜æœ‰ä¼šå¤§äº255çš„å€¼ã€‚è€ŒåŸå›¾åƒæ˜¯uint8ï¼Œå³8ä½æ— ç¬¦å·æ•°ï¼Œæ‰€ä»¥å»ºç«‹çš„å›¾åƒä½æ•°ä¸å¤Ÿï¼Œä¼šæœ‰æˆªæ–­ã€‚</p>\r\n<p>å› æ­¤è¦ä½¿ç”¨16ä½æœ‰ç¬¦å·çš„æ•°æ®ç±»å‹ï¼Œå³<code>cv2.CV_16S</code>ã€‚å¤„ç†å®Œå›¾åƒåï¼Œå†ä½¿ç”¨<code>cv2.convertScaleAbs()</code>å‡½æ•°å°†å…¶è½¬å›åŸæ¥çš„uint8æ ¼å¼ï¼Œå¦åˆ™å›¾åƒæ— æ³•æ˜¾ç¤ºã€‚</p>\r\n<p>æœ€åè¿˜éœ€è¦ç”¨<code>cv2.addWeighted()</code>å‡½æ•°å°†ä¸¤ä¸ªæ–¹å‘çš„<code>Sobelç®—å­</code>è®¡ç®—ç»“æœç»„åˆèµ·æ¥</p>\r\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Scale_abs = cv2.convertScaleAbs(x)  # æ ¼å¼è½¬æ¢å‡½æ•°</span><br><span class=\"line\">result = cv2.addWeighted(src1, alpha, src2, beta) # å›¾åƒæ··åˆ</span><br></pre></td></tr></table></figure>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -4\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/horse.jpg&#x27;</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 è®¡ç®—Sobelå·ç§¯ç»“æœ</span></span><br><span class=\"line\">x = cv.Sobel(img, cv.CV_16S, <span class=\"number\">1</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">y = cv.Sobel(img, cv.CV_16S, <span class=\"number\">0</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\"># 3 å°†æ•°æ®è¿›è¡Œè½¬æ¢</span></span><br><span class=\"line\">Scale_absX = cv.convertScaleAbs(x)  <span class=\"comment\"># convert è½¬æ¢  scale ç¼©æ”¾</span></span><br><span class=\"line\">Scale_absY = cv.convertScaleAbs(y)</span><br><span class=\"line\"><span class=\"comment\"># 4 ç»“æœåˆæˆ</span></span><br><span class=\"line\">result = cv.addWeighted(Scale_absX, <span class=\"number\">0.5</span>, Scale_absY, <span class=\"number\">0.5</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># 5 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.subplot(<span class=\"number\">121</span>),plt.imshow(img,cmap=plt.cm.gray),plt.title(<span class=\"string\">&#x27;åŸå›¾&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.subplot(<span class=\"number\">122</span>),plt.imshow(result,cmap = plt.cm.gray),plt.title(<span class=\"string\">&#x27;Sobelæ»¤æ³¢åç»“æœ&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190929141752847-1684464763720-23.png\" style=\"zoom:67%;\" /></p>\r\n<p>å°†ä¸Šè¿°ä»£ç ä¸­è®¡ç®—<code>sobelç®—å­</code>çš„éƒ¨åˆ†ä¸­å°†ksizeè®¾ä¸º-1ï¼Œå°±æ˜¯åˆ©ç”¨<code>Scharrsç®—å­</code>è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = cv.Sobel(img, cv.CV_16S, <span class=\"number\">1</span>, <span class=\"number\">0</span>, ksize = -<span class=\"number\">1</span>)</span><br><span class=\"line\">y = cv.Sobel(img, cv.CV_16S, <span class=\"number\">0</span>, <span class=\"number\">1</span>, ksize = -<span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190929141636521-1684464782140-25.png\"  style=\"zoom:67%;\" /></p>\r\n<h1 id=\"laplacianç®—å­-åŸºäºé›¶ç©¿è¶Š\"><a href=\"https://baike.baidu.com/item/%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E7%AE%97%E5%AD%90/7261323\"><code>Laplacianç®—å­</code></a>-åŸºäºé›¶ç©¿è¶Š</h1>\r\n<p><code>Laplacian</code>æ˜¯åˆ©ç”¨äºŒé˜¶å¯¼æ•°æ¥æ£€æµ‹è¾¹ç¼˜ ã€‚ å› ä¸ºå›¾åƒæ˜¯2ç»´, æˆ‘ä»¬éœ€è¦åœ¨ä¸¤ä¸ªæ–¹å‘æ±‚å¯¼ï¼Œå¦‚ä¸‹å¼æ‰€ç¤ºï¼š <span class=\"math display\">\\[\r\n\\Delta src=\\frac{\\partial^2src}{\\partial x^2}+\\frac{\\partial^2src}{\\partial y^2}\r\n\\]</span></p>\r\n<p>ä¸è¿ç»­å‡½æ•°çš„äºŒé˜¶å¯¼æ•°æ˜¯ï¼š <span class=\"math display\">\\[\r\nf&#39;&#39;(x)=f&#39;(x+1)-f&#39;(x)=f(x+1)+f(x-1)-2f(x)\r\n\\]</span> ä½¿ç”¨çš„å·ç§¯æ ¸æ˜¯ï¼š <span class=\"math display\">\\[\r\nkernel=\\left[\\begin{matrix}0&amp;1&amp;0\\\\1&amp;-4&amp;1\\\\0&amp;1&amp;0\\\\\\end{matrix}\\right]\r\n\\]</span></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">laplacian = cv2.Laplacian(src, ddepth[, dst[, ksize[, scale[, delta[, borderType]]]]])</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>srcï¼šéœ€è¦å¤„ç†çš„å›¾åƒï¼Œ</li>\r\n<li>ddepthï¼šå›¾åƒçš„æ·±åº¦ï¼Œ-1è¡¨ç¤ºé‡‡ç”¨çš„æ˜¯åŸå›¾åƒç›¸åŒçš„æ·±åº¦ï¼Œç›®æ ‡å›¾åƒçš„æ·±åº¦å¿…é¡»å¤§äºç­‰äºåŸå›¾åƒçš„æ·±åº¦ï¼›</li>\r\n<li>ksizeï¼šç®—å­çš„å¤§å°ï¼Œå³å·ç§¯æ ¸çš„å¤§å°</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -5\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/horse.jpg&#x27;</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 laplacianè½¬æ¢</span></span><br><span class=\"line\">result = cv.Laplacian(img,cv.CV_16S)</span><br><span class=\"line\">Scale_abs = cv.convertScaleAbs(result)</span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.subplot(<span class=\"number\">121</span>),plt.imshow(img,cmap=plt.cm.gray),plt.title(<span class=\"string\">&#x27;åŸå›¾&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.subplot(<span class=\"number\">122</span>),plt.imshow(Scale_abs,cmap = plt.cm.gray),plt.title(<span class=\"string\">&#x27;Laplacianæ£€æµ‹åç»“æœ&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190929145507862.png\"  style=\"zoom:67%;\" /></p>\r\n<h1 id=\"cannyç®—å­\"><a href=\"https://baike.baidu.com/item/Canny%E7%AE%97%E5%AD%90/8821789\"><code>Cannyç®—å­</code></a></h1>\r\n<p>Canny è¾¹ç¼˜æ£€æµ‹ç®—æ³•æ˜¯ John F. Canny äº 1986å¹´æå‡ºçš„ï¼Œè¢«è®¤ä¸ºæ˜¯æœ€ä¼˜çš„è¾¹ç¼˜æ£€æµ‹ç®—æ³•ã€‚</p>\r\n<ol type=\"1\">\r\n<li><p>å»é™¤å™ªå£°</p>\r\n<ul>\r\n<li>ç”±äºè¾¹ç¼˜æ£€æµ‹å¾ˆå®¹æ˜“å—åˆ°å™ªå£°çš„å½±å“ï¼Œæ‰€ä»¥é¦–å…ˆä½¿ç”¨<span class=\"math inline\">\\(5\\times5\\)</span>é«˜æ–¯å¹³æ»‘æ»¤æ³¢å™¨å»é™¤å™ªå£°ï¼Œ</li>\r\n</ul></li>\r\n<li><p>è®¡ç®—å›¾åƒæ¢¯åº¦</p>\r\n<ul>\r\n<li><p>å¯¹å¹³æ»‘åçš„å›¾åƒä½¿ç”¨<code>Sobelç®—å­</code>è®¡ç®—æ°´å¹³æ–¹å‘å’Œç«–ç›´æ–¹å‘çš„ä¸€é˜¶å¯¼æ•°<span class=\"math inline\">\\(G_x,G_y\\)</span>ã€‚</p></li>\r\n<li><p>æ ¹æ®è¿™ä¸¤å¹…æ¢¯åº¦å›¾æ‰¾åˆ°è¾¹ç•Œçš„æ¢¯åº¦å’Œæ–¹å‘ï¼Œå…¬å¼å¦‚ä¸‹: <span class=\"math display\">\\[\r\nEdge_Gradient(G)=\\sqrt{G_x^2+G_y^2}\r\n\\]</span></p>\r\n<p><span class=\"math display\">\\[\r\nAngle(\\theta)=\\tan^{-1}(\\frac{G_y}{G_x})\r\n\\]</span></p></li>\r\n<li><p>å¦‚æœæŸä¸ªåƒç´ ç‚¹æ˜¯è¾¹ç¼˜ï¼Œåˆ™å…¶æ¢¯åº¦æ–¹å‘æ€»æ˜¯å‚ç›´äºè¾¹ç¼˜ã€‚æ¢¯åº¦æ–¹å‘è¢«å½’ä¸ºå››ç±»ï¼šå‚ç›´ï¼Œæ°´å¹³ï¼Œå’Œä¸¤ä¸ªå¯¹è§’çº¿æ–¹å‘ã€‚</p></li>\r\n</ul></li>\r\n<li><p>éæå¤§å€¼æŠ‘åˆ¶</p>\r\n<ul>\r\n<li>åœ¨è·å¾—æ¢¯åº¦çš„æ–¹å‘å’Œå¤§å°ä¹‹åï¼Œå¯¹æ•´å¹…å›¾åƒè¿›è¡Œæ‰«æï¼Œå»é™¤é‚£äº›éè¾¹ç•Œä¸Šçš„ç‚¹ã€‚å¯¹æ¯ä¸€ä¸ªåƒç´ è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹è¿™ä¸ªç‚¹çš„æ¢¯åº¦æ˜¯ä¸æ˜¯å‘¨å›´å…·æœ‰ç›¸åŒæ¢¯åº¦æ–¹å‘çš„ç‚¹ä¸­æœ€å¤§çš„ã€‚</li>\r\n<li>Aç‚¹ä½äºå›¾åƒçš„è¾¹ç¼˜ï¼Œåœ¨å…¶æ¢¯åº¦å˜åŒ–æ–¹å‘ï¼Œé€‰æ‹©åƒç´ ç‚¹Bå’ŒCï¼Œç”¨æ¥æ£€éªŒAç‚¹çš„æ¢¯åº¦æ˜¯å¦ä¸ºæå¤§å€¼ï¼Œè‹¥ä¸ºæå¤§å€¼ï¼Œåˆ™è¿›è¡Œä¿ç•™ï¼Œå¦åˆ™Aç‚¹è¢«æŠ‘åˆ¶ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯å…·æœ‰ç»†è¾¹çš„äºŒè¿›åˆ¶å›¾åƒã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</li>\r\n</ul>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190929153926063.png\"  style=\"zoom:67%;\" /></p></li>\r\n<li><p>æ»åé˜ˆå€¼</p>\r\n<ul>\r\n<li><p>ç°åœ¨è¦ç¡®å®šçœŸæ­£çš„è¾¹ç•Œã€‚ æˆ‘ä»¬è®¾ç½®ä¸¤ä¸ªé˜ˆå€¼ï¼š <code>minVal</code>å’Œ<code>maxVal</code>ã€‚ å½“å›¾åƒçš„ç°åº¦æ¢¯åº¦é«˜äº<code>maxVal</code>æ—¶è¢«è®¤ä¸ºæ˜¯çœŸçš„è¾¹ç•Œï¼Œ ä½äº<code>minVal</code>çš„è¾¹ç•Œä¼šè¢«æŠ›å¼ƒã€‚å¦‚æœä»‹äºä¸¤è€…ä¹‹é—´çš„è¯ï¼Œå°±è¦çœ‹è¿™ä¸ªç‚¹æ˜¯å¦ä¸æŸä¸ªè¢«ç¡®å®šä¸ºçœŸæ­£çš„è¾¹ç•Œç‚¹ç›¸è¿ï¼Œå¦‚æœæ˜¯å°±è®¤ä¸ºå®ƒä¹Ÿæ˜¯è¾¹ç•Œç‚¹ï¼Œå¦‚æœä¸æ˜¯å°±æŠ›å¼ƒã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190929155208751.png\"  style=\"zoom:67%;\" /></p></li>\r\n<li><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒAé«˜äºé˜ˆå€¼<code>maxVal</code>æ‰€ä»¥æ˜¯çœŸæ­£çš„è¾¹ç•Œç‚¹ï¼ŒCè™½ç„¶ä½äº<code>maxVal</code>ä½†é«˜äº<code>minVal</code>å¹¶ä¸”ä¸Aç›¸è¿ï¼Œæ‰€ä»¥ä¹Ÿè¢«è®¤ä¸ºæ˜¯çœŸæ­£çš„è¾¹ç•Œç‚¹ã€‚è€ŒBå°±ä¼šè¢«æŠ›å¼ƒï¼Œå› ä¸ºä½äº<code>maxVal</code>è€Œä¸”ä¸ä¸çœŸæ­£çš„è¾¹ç•Œç‚¹ç›¸è¿ã€‚</p></li>\r\n</ul></li>\r\n</ol>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">canny = cv2.Canny(image, threshold1, threshold2)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>imageï¼šç°åº¦å›¾ï¼Œ</li>\r\n<li>threshold1: minvalï¼Œè¾ƒå°çš„é˜ˆå€¼å°†é—´æ–­çš„è¾¹ç¼˜è¿æ¥èµ·æ¥</li>\r\n<li>threshold2: maxvalï¼Œè¾ƒå¤§çš„é˜ˆå€¼æ£€æµ‹å›¾åƒä¸­æ˜æ˜¾çš„è¾¹ç¼˜</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -6\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 å›¾åƒè¯»å–</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/horse.jpg&#x27;</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 Cannyè¾¹ç¼˜æ£€æµ‹</span></span><br><span class=\"line\">lowThreshold = <span class=\"number\">0</span></span><br><span class=\"line\">max_lowThreshold = <span class=\"number\">100</span></span><br><span class=\"line\">canny = cv.Canny(img, lowThreshold, max_lowThreshold) </span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.subplot(<span class=\"number\">121</span>),plt.imshow(img,cmap=plt.cm.gray),plt.title(<span class=\"string\">&#x27;åŸå›¾&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.subplot(<span class=\"number\">122</span>),plt.imshow(canny,cmap = plt.cm.gray),plt.title(<span class=\"string\">&#x27;Cannyæ£€æµ‹åç»“æœ&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190929160959357.png\" style=\"zoom:67%;\" /></p>\r\n<h1 id=\"æ¨¡ç‰ˆåŒ¹é…å’Œéœå¤«å˜æ¢\">æ¨¡ç‰ˆåŒ¹é…å’Œéœå¤«å˜æ¢</h1>\r\n<h2 id=\"æ¨¡æ¿åŒ¹é…\">æ¨¡æ¿åŒ¹é…</h2>\r\n<p>æ‰€è°“çš„æ¨¡æ¿åŒ¹é…ï¼Œå°±æ˜¯åœ¨ç»™å®šçš„å›¾ç‰‡ä¸­æŸ¥æ‰¾å’Œæ¨¡æ¿æœ€ç›¸ä¼¼çš„åŒºåŸŸï¼Œè¯¥ç®—æ³•çš„è¾“å…¥åŒ…æ‹¬æ¨¡æ¿å’Œå›¾ç‰‡ï¼Œç„¶åæŒ‰ç…§æ»‘çª—çš„æ€è·¯ä¸æ–­çš„ç§»åŠ¨æ¨¡æ¿å›¾ç‰‡ï¼Œè®¡ç®—å…¶ä¸å›¾åƒä¸­å¯¹åº”åŒºåŸŸçš„åŒ¹é…åº¦ï¼Œæœ€ç»ˆå°†åŒ¹é…åº¦æœ€é«˜çš„åŒºåŸŸé€‰æ‹©ä¸ºæœ€ç»ˆçš„ç»“æœã€‚</p>\r\n<ol type=\"1\">\r\n<li>å‡†å¤‡ä¸¤å¹…å›¾åƒ\r\n<ul>\r\n<li>åŸå›¾åƒ<span class=\"math inline\">\\(I\\)</span>ï¼šåœ¨è¿™å¹…å›¾ä¸­ï¼Œæ‰¾åˆ°ä¸æ¨¡æ¿ç›¸åŒ¹é…çš„åŒºåŸŸ</li>\r\n<li>æ¨¡æ¿<span class=\"math inline\">\\(T\\)</span>ï¼šä¸åŸå›¾åƒ<span class=\"math inline\">\\(I\\)</span>è¿›è¡Œæ¯”å¯¹çš„å›¾åƒå—</li>\r\n</ul></li>\r\n<li>æ»‘åŠ¨æ¨¡æ¿å›¾åƒå’ŒåŸå›¾åƒè¿›è¡Œæ¯”å¯¹\r\n<ul>\r\n<li>å°†æ¨¡æ¿å—æ¯æ¬¡ç§»åŠ¨ä¸€ä¸ªåƒç´  (ä»å·¦å¾€å³ï¼Œä»ä¸Šå¾€ä¸‹)ï¼Œåœ¨æ¯ä¸€ä¸ªä½ç½®ï¼Œéƒ½è®¡ç®—ä¸æ¨¡æ¿å›¾åƒçš„ç›¸ä¼¼ç¨‹åº¦ã€‚</li>\r\n</ul></li>\r\n<li>å¯¹äºæ¯ä¸€ä¸ªä½ç½®å°†è®¡ç®—çš„ç›¸ä¼¼ç»“æœä¿å­˜åœ¨ç»“æœçŸ©é˜µ<span class=\"math inline\">\\(R\\)</span>ä¸­ã€‚\r\n<ul>\r\n<li>å¦‚æœè¾“å…¥å›¾åƒçš„å¤§å°ä¸º<span class=\"math inline\">\\((W\\times H)\\)</span>ä¸”æ¨¡æ¿å›¾åƒçš„å¤§å°ä¸º<span class=\"math inline\">\\((w\\times h)\\)</span>ï¼Œåˆ™è¾“å‡ºçŸ©é˜µ<span class=\"math inline\">\\(R\\)</span>çš„å¤§å°ä¸º<span class=\"math inline\">\\((W-w+1,H-h+1)\\)</span>ï¼Œå°†<span class=\"math inline\">\\(R\\)</span>æ˜¾ç¤ºä¸ºå›¾åƒã€‚</li>\r\n</ul></li>\r\n<li>è·å¾—ä¸Šè¿°å›¾åƒåï¼ŒæŸ¥æ‰¾æœ€å¤§å€¼æ‰€åœ¨çš„ä½ç½®ï¼Œé‚£ä¹ˆè¯¥ä½ç½®å¯¹åº”çš„åŒºåŸŸå°±è¢«è®¤ä¸ºæ˜¯æœ€åŒ¹é…çš„ã€‚å¯¹åº”çš„åŒºåŸŸå°±æ˜¯ä»¥è¯¥ç‚¹ä¸ºé¡¶ç‚¹ï¼Œé•¿å®½å’Œæ¨¡æ¿å›¾åƒä¸€æ ·å¤§å°çš„çŸ©é˜µã€‚</li>\r\n</ol>\r\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res = cv.matchTemplate(img,template,method)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>imgï¼šè¦è¿›è¡Œæ¨¡æ¿åŒ¹é…çš„å›¾åƒ</li>\r\n<li>Templateï¼šæ¨¡æ¿</li>\r\n<li>methodï¼šå®ç°æ¨¡æ¿åŒ¹é…çš„ç®—æ³•ï¼Œä¸»è¦æœ‰ï¼š\r\n<ol type=\"1\">\r\n<li>å¹³æ–¹å·®åŒ¹é…(CV_TM_SQDIFF)ï¼šåˆ©ç”¨æ¨¡æ¿ä¸å›¾åƒä¹‹é—´çš„å¹³æ–¹å·®è¿›è¡ŒåŒ¹é…ï¼Œæœ€å¥½çš„åŒ¹é…æ˜¯0ï¼ŒåŒ¹é…è¶Šå·®ï¼ŒåŒ¹é…çš„å€¼è¶Šå¤§ã€‚</li>\r\n<li>ç›¸å…³åŒ¹é…(CV_TM_CCORR)ï¼šåˆ©ç”¨æ¨¡æ¿ä¸å›¾åƒé—´çš„ä¹˜æ³•è¿›è¡ŒåŒ¹é…ï¼Œæ•°å€¼è¶Šå¤§è¡¨ç¤ºåŒ¹é…ç¨‹åº¦è¾ƒé«˜ï¼Œè¶Šå°è¡¨ç¤ºåŒ¹é…æ•ˆæœå·®ã€‚</li>\r\n<li>åˆ©ç”¨ç›¸å…³ç³»æ•°åŒ¹é…(CV_TM_CCOEFF)ï¼šåˆ©ç”¨æ¨¡æ¿ä¸å›¾åƒé—´çš„ç›¸å…³ç³»æ•°åŒ¹é…ï¼Œ1è¡¨ç¤ºå®Œç¾çš„åŒ¹é…ï¼Œ-1è¡¨ç¤ºæœ€å·®çš„åŒ¹é…ã€‚</li>\r\n</ol></li>\r\n</ul>\r\n<p>å®ŒæˆåŒ¹é…åï¼Œä½¿ç”¨<code>cv.minMaxLoc()</code>æ–¹æ³•æŸ¥æ‰¾æœ€å¤§å€¼æ‰€åœ¨çš„ä½ç½®å³å¯ã€‚å¦‚æœä½¿ç”¨å¹³æ–¹å·®ä½œä¸ºæ¯”è¾ƒæ–¹æ³•ï¼Œåˆ™æœ€å°å€¼ä½ç½®æ˜¯æœ€ä½³åŒ¹é…ä½ç½®ã€‚</p>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -7\">ç¤ºä¾‹ä»£ç ï¼š</h3>\r\n<p>è½½å…¥è¦æœç´¢çš„å›¾åƒå’Œæ¨¡æ¿ï¼Œå›¾åƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/wulin2-1684485180064-5.jpeg\"  style=\"zoom:67%;\" /></p>\r\n<p>æ¨¡æ¿å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/wulin-0430810-1684485193472-7.jpeg\"  style=\"zoom:67%;\" /></p>\r\n<p>é€šè¿‡<code>matchTemplate</code>å®ç°æ¨¡æ¿åŒ¹é…ï¼Œä½¿ç”¨<code>minMaxLoc</code>å®šä½æœ€åŒ¹é…çš„åŒºåŸŸï¼Œå¹¶ç”¨çŸ©å½¢æ ‡æ³¨æœ€åŒ¹é…çš„åŒºåŸŸã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 å›¾åƒå’Œæ¨¡æ¿è¯»å–</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/wulin2.jpeg&#x27;</span>)</span><br><span class=\"line\">template = cv.imread(<span class=\"string\">&#x27;./image/wulin.jpeg&#x27;</span>)</span><br><span class=\"line\">h,w,l = template.shape</span><br><span class=\"line\"><span class=\"comment\"># 2 æ¨¡æ¿åŒ¹é…</span></span><br><span class=\"line\"><span class=\"comment\"># 2.1 æ¨¡æ¿åŒ¹é…</span></span><br><span class=\"line\">res = cv.matchTemplate(img, template, cv.TM_CCORR)</span><br><span class=\"line\"><span class=\"comment\"># 2.2 è¿”å›å›¾åƒä¸­æœ€åŒ¹é…çš„ä½ç½®ï¼Œç¡®å®šå·¦ä¸Šè§’çš„åæ ‡ï¼Œå¹¶å°†åŒ¹é…ä½ç½®ç»˜åˆ¶åœ¨å›¾åƒä¸Š</span></span><br><span class=\"line\">min_val, max_val, min_loc, max_loc = cv.minMaxLoc(res)</span><br><span class=\"line\"><span class=\"comment\"># ä½¿ç”¨å¹³æ–¹å·®æ—¶æœ€å°å€¼ä¸ºæœ€ä½³åŒ¹é…ä½ç½®</span></span><br><span class=\"line\"><span class=\"comment\"># top_left = min_loc</span></span><br><span class=\"line\">top_left = max_loc</span><br><span class=\"line\">bottom_right = (top_left[<span class=\"number\">0</span>] + w, top_left[<span class=\"number\">1</span>] + h)</span><br><span class=\"line\">cv.rectangle(img, top_left, bottom_right, (<span class=\"number\">0</span>,<span class=\"number\">255</span>,<span class=\"number\">0</span>), <span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">plt.imshow(img[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">plt.title(<span class=\"string\">&#x27;åŒ¹é…ç»“æœ&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007144614688-1684485615344-9.png\"  style=\"zoom:67%;\" /></p>\r\n<p><strong>æ‹“å±•ï¼š</strong>æ¨¡æ¿åŒ¹é…ä¸é€‚ç”¨äºå°ºåº¦å˜æ¢ï¼Œè§†è§’å˜æ¢åçš„å›¾åƒï¼Œè¿™æ—¶æˆ‘ä»¬å°±è¦ä½¿ç”¨å…³é”®ç‚¹åŒ¹é…ç®—æ³•ï¼Œæ¯”è¾ƒç»å…¸çš„å…³é”®ç‚¹æ£€æµ‹ç®—æ³•åŒ…æ‹¬SIFTå’ŒSURFç­‰ï¼Œä¸»è¦çš„æ€è·¯æ˜¯é¦–å…ˆé€šè¿‡å…³é”®ç‚¹æ£€æµ‹ç®—æ³•è·å–æ¨¡æ¿å’Œæµ‹è¯•å›¾ç‰‡ä¸­çš„å…³é”®ç‚¹ï¼›ç„¶åä½¿ç”¨å…³é”®ç‚¹åŒ¹é…ç®—æ³•å¤„ç†å³å¯ï¼Œè¿™äº›å…³é”®ç‚¹å¯ä»¥å¾ˆå¥½çš„å¤„ç†å°ºåº¦å˜åŒ–ã€è§†è§’å˜æ¢ã€æ—‹è½¬å˜åŒ–ã€å…‰ç…§å˜åŒ–ç­‰ï¼Œå…·æœ‰å¾ˆå¥½çš„ä¸å˜æ€§ã€‚</p>\r\n<h2 id=\"éœå¤«å˜æ¢\">éœå¤«å˜æ¢</h2>\r\n<p>éœå¤«å˜æ¢å¸¸ç”¨æ¥æå–å›¾åƒä¸­çš„ç›´çº¿å’Œåœ†ç­‰å‡ ä½•å½¢çŠ¶ã€‚åœ¨ç¬›å¡å°”åæ ‡ç³»ä¸­ï¼Œä¸€æ¡ç›´çº¿ç”±ä¸¤ä¸ªç‚¹<span class=\"math inline\">\\(A=(x_1,y_1)\\)</span>å’Œ<span class=\"math inline\">\\(B(x2ï¼Œy_2)\\)</span>ç¡®å®šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007153126537.png\"  style=\"zoom:67%;\" /></p>\r\n<p>å°†ç›´çº¿<span class=\"math inline\">\\(y=kx+q\\)</span>å¯å†™æˆå…³äº<span class=\"math inline\">\\((k,q)\\)</span>çš„å‡½æ•°è¡¨è¾¾å¼ï¼š <span class=\"math display\">\\[\r\n\\begin{cases}\r\nq=-kx_1+y_1\\\\\r\nq=-kx_2+y_2\r\n\\end{cases}\r\n\\]</span> å¯¹åº”çš„å˜æ¢é€šè¿‡å›¾å½¢ç›´è§‚çš„è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007154123721.png\"  style=\"zoom:67%;\" /></p>\r\n<p>å˜æ¢åçš„ç©ºé—´æˆ‘ä»¬å«åšéœå¤«ç©ºé—´ã€‚å³ï¼š<strong>ç¬›å¡å°”åæ ‡ç³»ä¸­çš„ä¸€æ¡ç›´çº¿ï¼Œå¯¹åº”äºéœå¤«ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹</strong>ã€‚åè¿‡æ¥ï¼ŒåŒæ ·æˆç«‹ï¼Œéœå¤«ç©ºé—´ä¸­çš„ä¸€æ¡çº¿ï¼Œå¯¹åº”äºç¬›å¡å°”åæ ‡ç³»ä¸­ä¸€ä¸ªç‚¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007154350195.png\"  style=\"zoom:67%;\" /></p>\r\n<p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹<span class=\"math inline\">\\(A\\)</span>ã€<span class=\"math inline\">\\(B\\)</span>ä¸¤ä¸ªç‚¹ï¼Œå¯¹åº”äºéœå¤«ç©ºé—´çš„æƒ…å½¢ï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007154546905.png\"  style=\"zoom:67%;\" /></p>\r\n<p>åœ¨çœ‹ä¸‹ä¸‰ç‚¹å…±çº¿çš„æƒ…å†µï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007160434136.png\"  style=\"zoom:67%;\" /></p>\r\n<p>å¯ä»¥çœ‹å‡ºå¦‚æœ<strong>åœ¨ç¬›å¡å°”åæ ‡ç³»çš„ç‚¹å…±çº¿ï¼Œé‚£ä¹ˆè¿™äº›ç‚¹åœ¨éœå¤«ç©ºé—´ä¸­å¯¹åº”çš„ç›´çº¿äº¤äºä¸€ç‚¹</strong>ã€‚</p>\r\n<p>å¦‚æœä¸æ­¢å­˜åœ¨ä¸€æ¡ç›´çº¿æ—¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007160932077.png\"  style=\"zoom:67%;\" /></p>\r\n<p>æˆ‘ä»¬é€‰æ‹©å°½å¯èƒ½å¤šçš„ç›´çº¿æ±‡æˆçš„ç‚¹ï¼Œä¸Šå›¾ä¸­ä¸‰æ¡ç›´çº¿æ±‡æˆçš„<span class=\"math inline\">\\(A\\)</span>ã€<span class=\"math inline\">\\(B\\)</span>ä¸¤ç‚¹ï¼Œå°†å…¶å¯¹åº”å›ç¬›å¡å°”åæ ‡ç³»ä¸­çš„ç›´çº¿ï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007161219204.png\"  style=\"zoom:67%;\" /></p>\r\n<p>åˆ°è¿™é‡Œæˆ‘ä»¬ä¼¼ä¹å·²ç»å®Œæˆäº†éœå¤«å˜æ¢çš„æ±‚è§£ã€‚ä½†å¦‚æœåƒä¸‹å›¾è¿™ç§æƒ…å†µæ—¶ï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007161417485.png\"  style=\"zoom:67%;\" /></p>\r\n<p>ä¸Šå›¾ä¸­çš„ç›´çº¿æ˜¯<span class=\"math inline\">\\(x=2\\)</span>ï¼Œé‚£<span class=\"math inline\">\\((k,q)\\)</span>æ€ä¹ˆç¡®å®šå‘¢ï¼Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€ƒè™‘å°†ç¬›å¡å°”åæ ‡ç³»è½¬æ¢ä¸ºæåæ ‡ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007165431682.png\"  style=\"zoom:67%;\" /></p>\r\n<p>åœ¨æåæ ‡ä¸‹æ˜¯ä¸€æ ·çš„ï¼Œæåæ ‡ä¸­çš„ç‚¹å¯¹åº”äºéœå¤«ç©ºé—´çš„çº¿ï¼Œè¿™æ—¶çš„éœå¤«ç©ºé—´ä¸åœ¨æ˜¯å‚æ•°<span class=\"math inline\">\\((k,q)\\)</span>çš„ç©ºé—´ï¼Œè€Œæ˜¯<span class=\"math inline\">\\((\\rho,\\theta)\\)</span>çš„ç©ºé—´ï¼Œ<span class=\"math inline\">\\(\\rho\\)</span>æ˜¯åŸç‚¹åˆ°ç›´çº¿çš„å‚ç›´è·ç¦»ï¼Œ<span class=\"math inline\">\\(\\theta\\)</span>è¡¨ç¤ºç›´çº¿çš„å‚çº¿ä¸æ¨ªè½´é¡ºæ—¶é’ˆæ–¹å‘çš„å¤¹è§’ï¼Œå‚ç›´çº¿çš„è§’åº¦ä¸º<span class=\"math inline\">\\(0^\\circ\\)</span>ï¼Œæ°´å¹³çº¿çš„è§’åº¦æ˜¯<span class=\"math inline\">\\(180^\\circ\\)</span>ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007163203594.png\"  style=\"zoom:67%;\" /></p>\r\n<p>åªè¦æ±‚å¾—éœå¤«ç©ºé—´ä¸­çš„äº¤ç‚¹çš„ä½ç½®ï¼Œå³å¯å¾—åˆ°åŸåæ ‡ç³»ä¸‹çš„ç›´çº¿ã€‚</p>\r\n<ol type=\"1\">\r\n<li>å‡è®¾æœ‰ä¸€ä¸ªå¤§å°ä¸º<span class=\"math inline\">\\(100\\times100\\)</span>çš„å›¾ç‰‡ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª<span class=\"math inline\">\\(2D\\)</span>æ•°ç»„(ç´¯åŠ å™¨)ï¼Œåˆå§‹åŒ–æ‰€æœ‰å€¼ä¸º0ï¼Œè¡Œè¡¨ç¤º<span class=\"math inline\">\\(\\rho\\)</span>ï¼Œåˆ—è¡¨ç¤º$$ã€‚è‹¥è§’åº¦çš„ç²¾åº¦ä¸º<span class=\"math inline\">\\(1^\\circ\\)</span>ï¼Œé‚£å°±éœ€è¦180åˆ—ã€‚å¯¹äº<span class=\"math inline\">\\(\\rho\\)</span>ï¼Œæœ€å¤§å€¼ä¸ºå›¾ç‰‡å¯¹è§’çº¿çš„è·ç¦»ï¼Œå¦‚æœç²¾åº¦è¦è¾¾åˆ°åƒç´ çº§åˆ«ï¼Œè¡Œæ•°åº”è¯¥ä¸å›¾åƒçš„å¯¹è§’çº¿çš„è·ç¦»ç›¸ç­‰ã€‚</li>\r\n<li>å–ç›´çº¿ä¸Šçš„ç¬¬ä¸€ä¸ªç‚¹<span class=\"math inline\">\\((x,y)\\)</span>ï¼Œå°†å…¶å¸¦å…¥ç›´çº¿åœ¨æåæ ‡ä¸­çš„å…¬å¼ä¸­ï¼Œç„¶åéå†<span class=\"math inline\">\\(\\theta\\)</span>çš„å–å€¼<span class=\"math inline\">\\((0,1,2,\\cdots,180)\\)</span>ï¼Œåˆ†åˆ«æ±‚å‡ºå¯¹åº”çš„<span class=\"math inline\">\\(\\rho\\)</span>å€¼ï¼Œå¦‚æœè¿™ä¸ªæ•°å€¼åœ¨<strong>ç´¯åŠ å™¨</strong>ä¸­å­˜åœ¨ç›¸åº”çš„ä½ç½®ï¼Œåˆ™åœ¨è¯¥ä½ç½®ä¸ŠåŠ 1ã€‚</li>\r\n<li>å–ç›´çº¿ä¸Šçš„ç¬¬äºŒä¸ªç‚¹ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œæ›´æ–°ç´¯åŠ å™¨ä¸­çš„å€¼ã€‚å¯¹å›¾åƒä¸­çš„ç›´çº¿ä¸Šçš„æ¯ä¸ªç‚¹éƒ½ç›´çº¿ä»¥ä¸Šæ­¥éª¤ï¼Œæ¯æ¬¡æ›´æ–°ç´¯åŠ å™¨ä¸­çš„å€¼ã€‚</li>\r\n<li>æœç´¢ç´¯åŠ å™¨ä¸­çš„æœ€å¤§å€¼ï¼Œå¹¶æ‰¾åˆ°å…¶å¯¹åº”çš„<span class=\"math inline\">\\((\\rho,\\theta)\\)</span>ï¼Œå°±å¯å°†å›¾åƒä¸­çš„ç›´çº¿è¡¨ç¤ºå‡ºæ¥ã€‚</li>\r\n</ol>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image70-0440438.gif\"  style=\"zoom: 80%;\" /></p>\r\n<h2 id=\"éœå¤«çº¿æ£€æµ‹\">éœå¤«çº¿æ£€æµ‹</h2>\r\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.HoughLines(img, rho, theta, threshold)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>imgï¼šæ£€æµ‹çš„å›¾åƒ<strong>è¦æ±‚æ˜¯äºŒå€¼åŒ–çš„å›¾åƒ</strong>ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨éœå¤«å˜æ¢ä¹‹å‰é¦–å…ˆè¦è¿›è¡ŒäºŒå€¼åŒ–ï¼Œæˆ–è€…è¿›è¡ŒCannyè¾¹ç¼˜æ£€æµ‹ã€‚</p></li>\r\n<li><p>rhoã€thetaï¼š<span class=\"math inline\">\\(\\rho\\)</span> å’Œ<span class=\"math inline\">\\(\\theta\\)</span>çš„ç²¾ç¡®åº¦ã€‚</p></li>\r\n<li><p>thresholdï¼šé˜ˆå€¼ï¼Œåªæœ‰ç´¯åŠ å™¨ä¸­çš„å€¼é«˜äºè¯¥é˜ˆå€¼æ—¶æ‰è¢«è®¤ä¸ºæ˜¯ç›´çº¿ã€‚</p></li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -8\">ç¤ºä¾‹ä»£ç </h3>\r\n<p>æ£€æµ‹ä¸‹è¿°å›¾åƒä¸­çš„ç›´çº¿ï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/rili.jpg\" style=\"zoom:67%;\" /></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1.åŠ è½½å›¾ç‰‡ï¼Œè½¬ä¸ºäºŒå€¼å›¾</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/rili.jpg&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class=\"line\">edges = cv.Canny(gray, <span class=\"number\">50</span>, <span class=\"number\">150</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.éœå¤«ç›´çº¿å˜æ¢</span></span><br><span class=\"line\">lines = cv.HoughLines(edges, <span class=\"number\">0.8</span>, np.pi / <span class=\"number\">180</span>, <span class=\"number\">150</span>)</span><br><span class=\"line\"><span class=\"comment\"># 3.å°†æ£€æµ‹çš„çº¿ç»˜åˆ¶åœ¨å›¾åƒä¸Šï¼ˆæ³¨æ„æ˜¯æåæ ‡å™¢ï¼‰</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> line <span class=\"keyword\">in</span> lines:</span><br><span class=\"line\">    rho, theta = line[<span class=\"number\">0</span>]</span><br><span class=\"line\">    a = np.cos(theta)</span><br><span class=\"line\">    b = np.sin(theta)</span><br><span class=\"line\">    x0 = a * rho</span><br><span class=\"line\">    y0 = b * rho</span><br><span class=\"line\">    x1 = <span class=\"built_in\">int</span>(x0 + <span class=\"number\">1000</span> * (-b))</span><br><span class=\"line\">    y1 = <span class=\"built_in\">int</span>(y0 + <span class=\"number\">1000</span> * (a))</span><br><span class=\"line\">    x2 = <span class=\"built_in\">int</span>(x0 - <span class=\"number\">1000</span> * (-b))</span><br><span class=\"line\">    y2 = <span class=\"built_in\">int</span>(y0 - <span class=\"number\">1000</span> * (a))</span><br><span class=\"line\">    cv.line(img, (x1, y1), (x2, y2), (<span class=\"number\">0</span>, <span class=\"number\">255</span>, <span class=\"number\">0</span>))</span><br><span class=\"line\"><span class=\"comment\"># 4. å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.imshow(img[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;éœå¤«å˜æ¢çº¿æ£€æµ‹&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191007184301611.png\"  style=\"zoom: 20%;\" /></p>\r\n<h2 id=\"éœå¤«åœ†æ£€æµ‹\">éœå¤«åœ†æ£€æµ‹</h2>\r\n<p>åœ†çš„è¡¨ç¤ºå¼æ˜¯ï¼š<span class=\"math inline\">\\((x-a)^2+(y-b)^2=r\\)</span>ï¼Œå…¶ä¸­åœ†å¿ƒåæ ‡ä¸º<span class=\"math inline\">\\((a,b)\\)</span>ï¼ŒåŠå¾„ä¸º<span class=\"math inline\">\\(r\\)</span>ï¼Œå› æ­¤æ ‡å‡†çš„éœå¤«åœ†æ£€æµ‹å°±æ˜¯åœ¨è¿™ä¸‰ä¸ªå‚æ•°ç»„æˆçš„ä¸‰ç»´ç©ºé—´ç´¯åŠ å™¨ä¸Šè¿›è¡Œåœ†å½¢æ£€æµ‹ï¼Œæ­¤æ—¶çš„æ•ˆç‡å¾ˆä½ã€‚</p>\r\n<p>æ‰€ä»¥<code>OpenCV</code>ä¸­ä½¿ç”¨<strong>éœå¤«æ¢¯åº¦æ³•</strong>è¿›è¡Œåœ†å½¢çš„æ£€æµ‹ï¼Œéœå¤«æ¢¯åº¦æ³•æ˜¯éœå¤«å˜æ¢çš„æ”¹è¿›ï¼Œå®ƒçš„ç›®çš„æ˜¯å‡å°éœå¤«ç©ºé—´çš„ç»´åº¦ï¼Œæé«˜æ•ˆç‡ã€‚</p>\r\n<p>éœå¤«æ¢¯åº¦æ³•å°†éœå¤«åœ†æ£€æµ‹èŒƒå›´ä¸¤ä¸ªé˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µæ£€æµ‹åœ†å¿ƒï¼Œç¬¬äºŒé˜¶æ®µåˆ©ç”¨åœ†å¿ƒæ¨å¯¼å‡ºåœ†åŠå¾„ã€‚</p>\r\n<ol type=\"1\">\r\n<li>åœ†å¿ƒæ£€æµ‹çš„åŸç†ï¼šåœ†å¿ƒæ˜¯åœ†å‘¨æ³•çº¿çš„äº¤æ±‡å¤„ï¼Œè®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œåœ¨æŸç‚¹çš„ç›¸äº¤çš„ç›´çº¿çš„æ¡æ•°å¤§äºè¿™ä¸ªé˜ˆå€¼å°±è®¤ä¸ºè¯¥äº¤æ±‡ç‚¹ä¸ºåœ†å¿ƒã€‚</li>\r\n<li>åœ†åŠå¾„ç¡®å®šåŸç†ï¼šåœ†å¿ƒåˆ°åœ†å‘¨ä¸Šçš„è·ç¦»ï¼ˆåŠå¾„ï¼‰æ˜¯ç›¸åŒçš„ï¼Œç¡®å®šä¸€ä¸ªé˜ˆå€¼ï¼Œåªè¦ç›¸åŒè·ç¦»çš„æ•°é‡å¤§äºè¯¥é˜ˆå€¼ï¼Œå°±è®¤ä¸ºè¯¥è·ç¦»æ˜¯è¯¥åœ†å¿ƒçš„åŠå¾„ã€‚</li>\r\n</ol>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">circles = cv.HoughCircles(image, method, dp, minDist, param1=<span class=\"number\">100</span>, param2=<span class=\"number\">100</span>, minRadius=<span class=\"number\">0</span>,maxRadius=<span class=\"number\">0</span> )</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>imageï¼šè¾“å…¥å›¾åƒï¼Œåº”è¾“å…¥ç°åº¦å›¾åƒ</li>\r\n<li>methodï¼šä½¿ç”¨éœå¤«å˜æ¢åœ†æ£€æµ‹çš„ç®—æ³•ï¼Œå®ƒçš„å‚æ•°æ˜¯CV_HOUGH_GRADIENT</li>\r\n<li>dpï¼šéœå¤«ç©ºé—´çš„åˆ†è¾¨ç‡ï¼Œdp=1æ—¶è¡¨ç¤ºéœå¤«ç©ºé—´ä¸è¾“å…¥å›¾åƒç©ºé—´çš„å¤§å°ä¸€è‡´ï¼Œdp=2æ—¶éœå¤«ç©ºé—´æ˜¯è¾“å…¥å›¾åƒç©ºé—´çš„ä¸€åŠï¼Œä»¥æ­¤ç±»æ¨ã€‚</li>\r\n<li>minDistï¼šä¸ºåœ†å¿ƒä¹‹é—´çš„æœ€å°è·ç¦»ï¼Œå¦‚æœæ£€æµ‹åˆ°çš„ä¸¤ä¸ªåœ†å¿ƒä¹‹é—´è·ç¦»å°äºè¯¥å€¼ï¼Œåˆ™è®¤ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªåœ†å¿ƒã€‚</li>\r\n<li>param1ï¼šè¾¹ç¼˜æ£€æµ‹æ—¶ä½¿ç”¨Cannyç®—å­çš„é«˜é˜ˆå€¼ï¼Œä½é˜ˆå€¼æ˜¯é«˜é˜ˆå€¼çš„ä¸€åŠã€‚</li>\r\n<li>param2ï¼šæ£€æµ‹åœ†å¿ƒå’Œç¡®å®šåŠå¾„æ—¶æ‰€å…±æœ‰çš„é˜ˆå€¼ã€‚</li>\r\n<li>minRadiusï¼šæ‰€æ£€æµ‹åˆ°çš„åœ†åŠå¾„çš„æœ€å°å€¼ã€‚</li>\r\n<li>maxRadiusï¼šæ‰€æ£€æµ‹åˆ°çš„åœ†åŠå¾„çš„æœ€å¤§å€¼ã€‚</li>\r\n</ul>\r\n<p>è¿”å›ï¼š</p>\r\n<ul>\r\n<li>circlesï¼šè¾“å‡ºåœ†å‘é‡ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªæµ®ç‚¹å‹çš„å…ƒç´ ï¼ˆåœ†å¿ƒæ¨ªåæ ‡ï¼Œåœ†å¿ƒçºµåæ ‡å’Œåœ†åŠå¾„ï¼‰</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -9\">ç¤ºä¾‹ä»£ç </h3>\r\n<p>ç”±äºéœå¤«åœ†æ£€æµ‹å¯¹å™ªå£°æ¯”è¾ƒæ•æ„Ÿï¼Œæ‰€ä»¥é¦–å…ˆå¯¹å›¾åƒè¿›è¡Œä¸­å€¼æ»¤æ³¢ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒï¼Œå¹¶è½¬æ¢ä¸ºç°åº¦å›¾</span></span><br><span class=\"line\">planets = cv.imread(<span class=\"string\">&quot;./image/star.jpeg&quot;</span>)</span><br><span class=\"line\">gay_img = cv.cvtColor(planets, cv.COLOR_BGRA2GRAY)</span><br><span class=\"line\"><span class=\"comment\"># 2 è¿›è¡Œä¸­å€¼æ¨¡ç³Šï¼Œå»å™ªç‚¹</span></span><br><span class=\"line\">img = cv.medianBlur(gay_img, <span class=\"number\">7</span>)  </span><br><span class=\"line\"><span class=\"comment\"># 3 éœå¤«åœ†æ£€æµ‹</span></span><br><span class=\"line\">circles = cv.HoughCircles(img, cv.HOUGH_GRADIENT, <span class=\"number\">1</span>, <span class=\"number\">200</span>, param1=<span class=\"number\">100</span>, param2=<span class=\"number\">30</span>, minRadius=<span class=\"number\">0</span>, maxRadius=<span class=\"number\">100</span>)</span><br><span class=\"line\"><span class=\"comment\"># 4 å°†æ£€æµ‹ç»“æœç»˜åˆ¶åœ¨å›¾åƒä¸Š</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> circles[<span class=\"number\">0</span>, :]:  <span class=\"comment\"># éå†çŸ©é˜µæ¯ä¸€è¡Œçš„æ•°æ®</span></span><br><span class=\"line\">    <span class=\"comment\"># ç»˜åˆ¶åœ†å½¢</span></span><br><span class=\"line\">    cv.circle(planets, (i[<span class=\"number\">0</span>], i[<span class=\"number\">1</span>]), i[<span class=\"number\">2</span>], (<span class=\"number\">0</span>, <span class=\"number\">255</span>, <span class=\"number\">0</span>), <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"comment\"># ç»˜åˆ¶åœ†å¿ƒ</span></span><br><span class=\"line\">    cv.circle(planets, (i[<span class=\"number\">0</span>], i[<span class=\"number\">1</span>]), <span class=\"number\">2</span>, (<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">255</span>), <span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"comment\"># 5 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.imshow(planets[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;éœå¤«å˜æ¢åœ†æ£€æµ‹&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191008105125382.png\" style=\"zoom: 33%;\" /></p>\r\n",
            "tags": [
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/OpenCV/OpenCV%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86-%E4%B8%8A/",
            "url": "https://liujk6525.github.io/OpenCV/OpenCV%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86-%E4%B8%8A/",
            "title": "OpenCVå›¾åƒå¤„ç†(ä¸Š)",
            "date_published": "2023-05-17T13:19:42.000Z",
            "content_html": "<h1 id=\"å‡ ä½•å˜æ¢\">å‡ ä½•å˜æ¢</h1>\r\n<h2 id=\"å›¾åƒç¼©æ”¾\">å›¾åƒç¼©æ”¾</h2>\r\n<p>ç¼©æ”¾æ˜¯å¯¹å›¾åƒçš„å¤§å°è¿›è¡Œè°ƒæ•´ï¼Œå³ä½¿å›¾åƒæ”¾å¤§æˆ–ç¼©å°ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv2.resize(src,dsize,fx=<span class=\"number\">0</span>,fy=<span class=\"number\">0</span>,interpolation=cv2.INTER_LINEAR)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>src : è¾“å…¥å›¾åƒ</li>\r\n<li>dsize: ç»å¯¹å°ºå¯¸ï¼Œç›´æ¥æŒ‡å®šè°ƒæ•´åå›¾åƒçš„å¤§å°</li>\r\n<li>fx,fy: ç›¸å¯¹å°ºå¯¸ï¼Œå°†dsizeè®¾ç½®ä¸ºNoneï¼Œç„¶åå°†fxå’Œfyè®¾ç½®ä¸ºæ¯”ä¾‹å› å­å³å¯</li>\r\n<li>interpolationï¼šæ’å€¼æ–¹æ³•ï¼Œ</li>\r\n</ul>\r\n<span id=\"more\"></span>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191016161502727-1684329818370-10.png\" style=\"zoom:67%;\" /></p>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç \">ç¤ºä¾‹ä»£ç </h3>\r\n<p>å°†å›¾åƒåˆ†åˆ«ä»¥ç»å¯¹å°ºåº¦çš„æ–¹å¼æ”¾å¤§ï¼Œä»¥ç›¸å¯¹å°ºå¯¸çš„æ–¹å¼ç¼©å°ã€‚</p>\r\n<p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"comment\"># 1. è¯»å–å›¾ç‰‡</span></span><br><span class=\"line\">img1 = cv.imread(<span class=\"string\">&quot;./image/dog.jpeg&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2.å›¾åƒç¼©æ”¾</span></span><br><span class=\"line\"><span class=\"comment\"># 2.1 ç»å¯¹å°ºå¯¸</span></span><br><span class=\"line\">rows,cols = img1.shape[:<span class=\"number\">2</span>]</span><br><span class=\"line\">res = cv.resize(img1,(<span class=\"number\">2</span>*cols,<span class=\"number\">2</span>*rows),interpolation=cv.INTER_CUBIC)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.2 ç›¸å¯¹å°ºå¯¸</span></span><br><span class=\"line\">res1 = cv.resize(img1,<span class=\"literal\">None</span>,fx=<span class=\"number\">0.5</span>,fy=<span class=\"number\">0.5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\"><span class=\"comment\"># 3.1 ä½¿ç”¨opencvæ˜¾ç¤ºå›¾åƒ(ä¸æ¨è)</span></span><br><span class=\"line\">cv.imshow(<span class=\"string\">&quot;orignal&quot;</span>,img1)</span><br><span class=\"line\">cv.imshow(<span class=\"string\">&quot;enlarge&quot;</span>,res)</span><br><span class=\"line\">cv.imshow(<span class=\"string\">&quot;shrinkï¼‰&quot;</span>,res1)</span><br><span class=\"line\">cv.waitKey(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.2 ä½¿ç”¨matplotlibæ˜¾ç¤ºå›¾åƒ</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">1</span>,ncols=<span class=\"number\">3</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(res[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;ç»å¯¹å°ºåº¦ï¼ˆæ”¾å¤§ï¼‰&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(img1[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">2</span>].imshow(res1[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">2</span>].set_title(<span class=\"string\">&quot;ç›¸å¯¹å°ºåº¦ï¼ˆç¼©å°ï¼‰&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure></p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190926143500645-1684329980666-12.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"å›¾åƒå¹³ç§»\">å›¾åƒå¹³ç§»</h2>\r\n<p>å›¾åƒå¹³ç§»å°†å›¾åƒæŒ‰ç…§æŒ‡å®šæ–¹å‘å’Œè·ç¦»ï¼Œç§»åŠ¨åˆ°ç›¸åº”çš„ä½ç½®ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.warpAffine(img,M,dsize)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>img: è¾“å…¥å›¾åƒ</p></li>\r\n<li><p>Mï¼š 2âˆ—3çš„ç§»åŠ¨çŸ©é˜µ</p>\r\n<p>å¯¹äº(x,y)å¤„çš„åƒç´ ç‚¹ï¼Œè¦æŠŠå®ƒç§»åŠ¨åˆ°<span class=\"math inline\">\\((x+t_x,y+t_y)\\)</span>å¤„æ—¶ï¼ŒMçŸ©é˜µåº”å¦‚ä¸‹è®¾ç½®ï¼š</p>\r\n<p><span class=\"math inline\">\\(M=\\left[\\begin{matrix}1&amp;0&amp;t_x\\\\0&amp;1&amp;t_y\\\\&amp;&amp;\\end{matrix}\\right]\\)</span></p>\r\n<p><strong>æ³¨æ„ï¼š</strong>å°†<span class=\"math inline\">\\(M\\)</span>è®¾ç½®ä¸º<code>np.float32</code>ç±»å‹çš„<code>Numpy</code>æ•°ç»„ã€‚</p></li>\r\n<li><p>dsize: è¾“å‡ºå›¾åƒçš„å¤§å°</p>\r\n<p><strong>æ³¨æ„ï¼š</strong>è¾“å‡ºå›¾åƒçš„å¤§å°ï¼Œå®ƒåº”è¯¥æ˜¯(å®½åº¦ï¼Œé«˜åº¦)çš„å½¢å¼ã€‚è¯·è®°ä½,width=åˆ—æ•°ï¼Œheight=è¡Œæ•°ã€‚</p></li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -1\">ç¤ºä¾‹ä»£ç </h3>\r\n<p>å°†å›¾åƒçš„åƒç´ ç‚¹ç§»åŠ¨(50,100)çš„è·ç¦»ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1. è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img1 = cv.imread(<span class=\"string\">&quot;./image/image2.jpg&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2. å›¾åƒå¹³ç§»</span></span><br><span class=\"line\">rows,cols = img1.shape[:<span class=\"number\">2</span>]</span><br><span class=\"line\">M = M = np.float32([[<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">100</span>],[<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">50</span>]])<span class=\"comment\"># å¹³ç§»çŸ©é˜µ</span></span><br><span class=\"line\">dst = cv.warpAffine(img1,M,(cols,rows))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3. å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">1</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(img1[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(dst[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;å¹³ç§»åç»“æœ&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190926151127550-1684330295827-14.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"å›¾åƒæ—‹è½¬\">å›¾åƒæ—‹è½¬</h2>\r\n<p>å›¾åƒæ—‹è½¬æ˜¯æŒ‡å›¾åƒæŒ‰ç…§æŸä¸ªä½ç½®è½¬åŠ¨ä¸€å®šè§’åº¦çš„è¿‡ç¨‹ï¼Œæ—‹è½¬ä¸­å›¾åƒä»ä¿æŒè¿™åŸå§‹å°ºå¯¸ã€‚</p>\r\n<p>å‡è®¾å›¾åƒé€†æ—¶é’ˆæ—‹è½¬<span class=\"math inline\">\\(\\theta\\)</span>ï¼Œåˆ™æ ¹æ®åæ ‡è½¬æ¢å¯å¾—:</p>\r\n<p><span class=\"math display\">\\[\r\n\\left[\\begin{matrix}x&#39;&amp;y&#39;&amp;1\\end{matrix}\\right]=\\left[\\begin{matrix}x&amp;y&amp;1\\end{matrix}\\right]\\left[\\begin{matrix}\\cos\\theta&amp;-\\sin\\theta&amp;0\\\\\\sin\\theta&amp;\\cos\\theta&amp;0\\\\0&amp;0&amp;1\\end{matrix}\\right]\r\n\\]</span> å‡è®¾åœ¨æ—‹è½¬çš„æ—¶å€™æ˜¯ä»¥æ—‹è½¬ä¸­å¿ƒä¸ºåæ ‡åŸç‚¹çš„ï¼Œæ—‹è½¬ç»“æŸåè¿˜éœ€è¦å°†åæ ‡åŸç‚¹ç§»åˆ°å›¾åƒå·¦ä¸Šè§’ï¼Œä¹Ÿå°±æ˜¯è¿˜è¦è¿›è¡Œä¸€æ¬¡å˜æ¢ã€‚ <span class=\"math display\">\\[\r\n\\left[\\begin{matrix}x&#39;&#39;&amp;y&#39;&#39;&amp;1\\end{matrix}\\right]=\\left[\\begin{matrix}x&#39;&amp;y&#39;&amp;1\\end{matrix}\\right]\\left[\\begin{matrix}1&amp;0&amp;0\\\\0&amp;-1&amp;0\\\\left&amp;top&amp;1\\end{matrix}\\right]\\\\\r\n=\\left[\\begin{matrix}x&#39;&amp;y&#39;&amp;1\\end{matrix}\\right]\\left[\\begin{matrix}\\cos\\theta&amp;-\\sin\\theta&amp;0\\\\\\sin\\theta&amp;\\cos\\theta&amp;0\\\\0&amp;0&amp;1\\end{matrix}\\right]\\left[\\begin{matrix}1&amp;0&amp;0\\\\0&amp;-1&amp;0\\\\left&amp;top&amp;1\\end{matrix}\\right]\r\n\\]</span> åœ¨<code>OpenCV</code>ä¸­å›¾åƒæ—‹è½¬é¦–å…ˆæ ¹æ®æ—‹è½¬è§’åº¦å’Œæ—‹è½¬ä¸­å¿ƒè·å–æ—‹è½¬çŸ©é˜µï¼Œç„¶åæ ¹æ®æ—‹è½¬çŸ©é˜µè¿›è¡Œå˜æ¢ï¼Œå³å¯å®ç°ä»»æ„è§’åº¦å’Œä»»æ„ä¸­å¿ƒçš„æ—‹è½¬æ•ˆæœã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv2.getRotationMatrix2D(center, angle, scale)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>centerï¼šæ—‹è½¬ä¸­å¿ƒ</li>\r\n<li>angleï¼šæ—‹è½¬è§’åº¦</li>\r\n<li>scaleï¼šç¼©æ”¾æ¯”ä¾‹</li>\r\n</ul>\r\n<p>è¿”å›ï¼š</p>\r\n<ul>\r\n<li>Mï¼šæ—‹è½¬çŸ©é˜µ</li>\r\n</ul>\r\n<p>è°ƒç”¨<code>cv.warpAffine</code>å®Œæˆå›¾åƒçš„æ—‹è½¬</p>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -2\">ç¤ºä¾‹ä»£ç </h3>\r\n<p>å°†å›¾åƒä»¥ä¸­å¿ƒç‚¹æ—‹è½¬<span class=\"math inline\">\\(90^\\circ\\)</span></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&quot;./image/image2.jpg&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2 å›¾åƒæ—‹è½¬</span></span><br><span class=\"line\">rows,cols = img.shape[:<span class=\"number\">2</span>]</span><br><span class=\"line\"><span class=\"comment\"># 2.1 ç”Ÿæˆæ—‹è½¬çŸ©é˜µ</span></span><br><span class=\"line\">M = cv.getRotationMatrix2D((cols/<span class=\"number\">2</span>,rows/<span class=\"number\">2</span>),<span class=\"number\">90</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2.2 è¿›è¡Œæ—‹è½¬å˜æ¢</span></span><br><span class=\"line\">dst = cv.warpAffine(img,M,(cols,rows))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">1</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(img1[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(dst[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;æ—‹è½¬åç»“æœ&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190926152854704.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"ä»¿å°„å˜æ¢\">ä»¿å°„å˜æ¢</h2>\r\n<p><a href=\"https://baike.baidu.com/item/%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2/4289056\"><code>ä»¿å°„å˜æ¢</code></a>æ˜¯æŒ‡åœ¨å‡ ä½•ä¸­ï¼Œä¸€ä¸ªå‘é‡ç©ºé—´è¿›è¡Œä¸€æ¬¡çº¿æ€§å˜æ¢å¹¶æ¥ä¸Šä¸€ä¸ªå¹³ç§»ï¼Œå˜æ¢ä¸ºå¦ä¸€ä¸ªå‘é‡ç©ºé—´ã€‚</p>\r\n<p>å›¾åƒçš„ä»¿å°„å˜æ¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒåŸå§‹å›¾åƒçš„ç‚¹Aï¼ŒBå’ŒCä¸ä»¿å°„å›¾åƒä¸‰ä¸ªç‚¹ä¸€ä¸€æ˜ å°„, ä»ç„¶å½¢æˆä¸‰è§’å½¢, ä½†å½¢çŠ¶å·²ç»å¤§å¤§æ”¹å˜ï¼Œé€šè¿‡è¿™æ ·ä¸¤ç»„ä¸‰ç‚¹ï¼ˆæ„Ÿå…´è¶£ç‚¹ï¼‰æ±‚å‡ºä»¿å°„å˜æ¢ï¼Œ æ¥ä¸‹æ¥æˆ‘ä»¬å°±èƒ½æŠŠä»¿å°„å˜æ¢åº”ç”¨åˆ°å›¾åƒä¸­æ‰€æœ‰çš„ç‚¹ä¸­ï¼Œå°±å®Œæˆäº†å›¾åƒçš„ä»¿å°„å˜æ¢ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/images.jpeg\"  style=\"zoom: 80%;\" /></p>\r\n<p>åœ¨<code>OpenCV</code>ä¸­ï¼Œä»¿å°„å˜æ¢çš„çŸ©é˜µæ˜¯ä¸€ä¸ª2Ã—3çš„çŸ©é˜µ <span class=\"math display\">\\[\r\nM=\r\n\\left[\\begin{matrix}A&amp;B\\end{matrix}\\right]=\r\n\\left[\\begin{matrix}a_{00}\\quad a_{01}\\quad b_0\\\\\\underbrace{a_{10}\\quad a_{11}}_A\\quad b_1\\end{matrix}\\right]\r\n\\]</span> å…¶ä¸­å­çŸ©é˜µ<span class=\"math inline\">\\(A\\)</span>æ˜¯çº¿æ€§å˜æ¢çŸ©é˜µï¼Œå­çŸ©é˜µ<span class=\"math inline\">\\(B\\)</span>æ˜¯å¹³ç§»é¡¹ï¼Œå¯¹äºå›¾åƒä¸Šçš„ä»»ä¸€ä½ç½®<span class=\"math inline\">\\((x,y)\\)</span>ï¼Œä»¿å°„å˜æ¢æ‰§è¡Œçš„æ˜¯å¦‚ä¸‹çš„æ“ä½œï¼š <span class=\"math display\">\\[\r\nT_{affine}=A\r\n\\left[\\begin{matrix}x\\\\y\\end{matrix}\\right]+B=M\r\n\\left[\\begin{matrix}x\\\\y\\\\1\\end{matrix}\\right]\r\n\\]</span> <strong>æ³¨æ„ï¼š</strong>å¯¹äºå›¾åƒè€Œè¨€ï¼Œå®½åº¦æ–¹å‘æ˜¯xï¼Œé«˜åº¦æ–¹å‘æ˜¯yï¼Œåæ ‡çš„é¡ºåºå’Œå›¾åƒåƒç´ å¯¹åº”ä¸‹æ ‡ä¸€è‡´ã€‚æ‰€ä»¥åŸç‚¹çš„ä½ç½®ä¸æ˜¯å·¦ä¸‹è§’è€Œæ˜¯å·¦ä¸Šè§’ï¼Œyçš„æ–¹å‘ä¹Ÿä¸æ˜¯å‘ä¸Šï¼Œè€Œæ˜¯å‘ä¸‹ã€‚</p>\r\n<p>åœ¨ä»¿å°„å˜æ¢ä¸­ï¼ŒåŸå›¾ä¸­æ‰€æœ‰çš„å¹³è¡Œçº¿åœ¨ç»“æœå›¾åƒä¸­åŒæ ·å¹³è¡Œã€‚ä¸ºäº†åˆ›å»ºè¿™ä¸ªçŸ©é˜µæˆ‘ä»¬éœ€è¦ä»åŸå›¾åƒä¸­æ‰¾åˆ°ä¸‰ä¸ªç‚¹ä»¥åŠä»–ä»¬åœ¨è¾“å‡ºå›¾åƒä¸­çš„ä½ç½®ã€‚ç„¶å<code>cv2.getAffineTransform</code> ä¼šåˆ›å»ºä¸€ä¸ª$ 2$ çš„çŸ©é˜µï¼Œæœ€åè¿™ä¸ªçŸ©é˜µä¼šè¢«ä¼ ç»™å‡½æ•°<code>cv2.warpAffine</code>ã€‚</p>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -3\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 å›¾åƒè¯»å–</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&quot;./image/image2.jpg&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2 ä»¿å°„å˜æ¢</span></span><br><span class=\"line\">rows,cols = img.shape[:<span class=\"number\">2</span>]</span><br><span class=\"line\"><span class=\"comment\"># 2.1 åˆ›å»ºå˜æ¢çŸ©é˜µ</span></span><br><span class=\"line\">pts1 = np.float32([[<span class=\"number\">50</span>,<span class=\"number\">50</span>],[<span class=\"number\">200</span>,<span class=\"number\">50</span>],[<span class=\"number\">50</span>,<span class=\"number\">200</span>]])</span><br><span class=\"line\">pts2 = np.float32([[<span class=\"number\">100</span>,<span class=\"number\">100</span>],[<span class=\"number\">200</span>,<span class=\"number\">50</span>],[<span class=\"number\">100</span>,<span class=\"number\">250</span>]])</span><br><span class=\"line\">M = cv.getAffineTransform(pts1,pts2)</span><br><span class=\"line\"><span class=\"comment\"># 2.2 å®Œæˆä»¿å°„å˜æ¢</span></span><br><span class=\"line\">dst = cv.warpAffine(img,M,(cols,rows))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">1</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(img[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(dst[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;ä»¿å°„åç»“æœ&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190926161027173.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"é€å°„å˜æ¢\">é€å°„å˜æ¢</h2>\r\n<p><a href=\"https://baike.baidu.com/item/%E9%80%8F%E8%A7%86%E5%8F%98%E6%8D%A2/8746342\"><code>é€å°„å˜æ¢</code></a>æ˜¯è§†è§’å˜åŒ–çš„ç»“æœï¼Œæ˜¯æŒ‡åˆ©ç”¨é€è§†ä¸­å¿ƒã€åƒç‚¹ã€ç›®æ ‡ç‚¹ä¸‰ç‚¹å…±çº¿çš„æ¡ä»¶ï¼ŒæŒ‰é€è§†æ—‹è½¬å®šå¾‹ä½¿æ‰¿å½±é¢ï¼ˆé€è§†é¢ï¼‰ç»•è¿¹çº¿ï¼ˆé€è§†è½´ï¼‰æ—‹è½¬æŸä¸€è§’åº¦ï¼Œç ´ååŸæœ‰çš„æŠ•å½±å…‰çº¿æŸï¼Œä»èƒ½ä¿æŒæ‰¿å½±é¢ä¸ŠæŠ•å½±å‡ ä½•å›¾å½¢ä¸å˜çš„å˜æ¢ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191023130051717.png\" style=\"zoom:67%;\" /></p>\r\n<p>å®ƒçš„æœ¬è´¨æ˜¯å°†å›¾åƒæŠ•å½±åˆ°ä¸€ä¸ªæ–°çš„è§†å¹³é¢ï¼Œå…¶é€šç”¨å˜æ¢å…¬å¼ä¸ºï¼š</p>\r\n<p><span class=\"math display\">\\[\r\n\\left[\\begin{matrix}x&#39;&amp;y&#39;&amp;z&#39;\\end{matrix}\\right]=\\left[\\begin{matrix}u&amp;v&amp;w\\end{matrix}\\right]\\left[\\begin{matrix}a_{00}\\quad a_{01}\\quad a_{02}\\\\a_{10}\\quad a_{11}\\quad a_{12}\\\\\\underbrace{a_{20}\\quad a_{21}\\quad a_{22}}_T\\end{matrix}\\right]\r\n\\]</span> å…¶ä¸­<span class=\"math inline\">\\((u,v)\\)</span>æ˜¯åŸå§‹å›¾åƒçš„åƒç´ åæ ‡ï¼Œ<span class=\"math inline\">\\(w\\)</span>å–å€¼ä¸º1ï¼Œ<span class=\"math inline\">\\((x=x&#39;/z&#39;,y=y&#39;/z&#39;)\\)</span>æ˜¯é€å°„å˜æ¢åçš„ç»“æœã€‚<span class=\"math inline\">\\(T\\)</span>çŸ©é˜µç§°ä¸ºé€è§†å˜æ¢çŸ©é˜µï¼Œ <span class=\"math display\">\\[\r\nT=\r\n\\left[\\begin{matrix}a_{00}&amp;a_{01}&amp;a_{02}\\\\a_{10}&amp;a_{11}&amp;a_{12}\\\\a_{20}&amp; a_{21}&amp; a_{22}\\end{matrix}\\right]=\r\n\\left[\\begin{matrix}T_{1}&amp;T_{2}\\\\T_{3}&amp;a_{22}\\end{matrix}\\right]\r\n\\]</span> å…¶ä¸­ï¼š<span class=\"math inline\">\\(T1\\)</span>æ˜¯å›¾åƒè¿›è¡Œçº¿æ€§å˜æ¢ï¼Œ<span class=\"math inline\">\\(T2\\)</span>å¯¹å›¾åƒè¿›è¡Œå¹³ç§»ï¼Œ<span class=\"math inline\">\\(T3\\)</span>è¡¨ç¤ºå¯¹å›¾åƒè¿›è¡ŒæŠ•å°„å˜æ¢ï¼Œä¸€èˆ¬<span class=\"math inline\">\\(a_{22}\\)</span>å–ä¸º1ã€‚</p>\r\n<p>åœ¨<code>opencv</code>ä¸­ï¼Œå…ˆæ‰¾åˆ°å››ä¸ªç‚¹(å…¶ä¸­ä»»æ„ä¸‰ä¸ªç‚¹ä¸å…±çº¿)ï¼Œç„¶åè·å–é€å°„å˜æ¢çŸ©é˜µ<span class=\"math inline\">\\(T\\)</span>ï¼Œå†è¿›è¡Œé€å°„å˜æ¢ã€‚é€šè¿‡å‡½æ•°<code>cv.getPerspectiveTransform</code>æ‰¾åˆ°é€å°„å˜æ¢çŸ©é˜µï¼Œå°†<code>cv.warpPerspective</code>åº”ç”¨äºæ­¤<code>3x3</code>å˜æ¢çŸ©é˜µã€‚</p>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -4\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&quot;./image/image2.jpg&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 é€å°„å˜æ¢</span></span><br><span class=\"line\">rows,cols = img.shape[:<span class=\"number\">2</span>]</span><br><span class=\"line\"><span class=\"comment\"># 2.1 åˆ›å»ºå˜æ¢çŸ©é˜µ</span></span><br><span class=\"line\">pts1 = np.float32([[<span class=\"number\">56</span>,<span class=\"number\">65</span>],[<span class=\"number\">368</span>,<span class=\"number\">52</span>],[<span class=\"number\">28</span>,<span class=\"number\">387</span>],[<span class=\"number\">389</span>,<span class=\"number\">390</span>]])</span><br><span class=\"line\">pts2 = np.float32([[<span class=\"number\">100</span>,<span class=\"number\">145</span>],[<span class=\"number\">300</span>,<span class=\"number\">100</span>],[<span class=\"number\">80</span>,<span class=\"number\">290</span>],[<span class=\"number\">310</span>,<span class=\"number\">300</span>]])</span><br><span class=\"line\"></span><br><span class=\"line\">T = cv.getPerspectiveTransform(pts1,pts2)</span><br><span class=\"line\"><span class=\"comment\"># 2.2 è¿›è¡Œå˜æ¢</span></span><br><span class=\"line\">dst = cv.warpPerspective(img,T,(cols,rows))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">1</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(img[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(dst[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;é€å°„åç»“æœ&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190926162913916.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"å›¾åƒé‡‘å­—å¡”\">å›¾åƒé‡‘å­—å¡”</h2>\r\n<p><a href=\"https://baike.baidu.com/item/%E5%9B%BE%E5%83%8F%E9%87%91%E5%AD%97%E5%A1%94/306277\">å›¾åƒé‡‘å­—å¡”</a>æ˜¯å›¾åƒå¤šå°ºåº¦è¡¨è¾¾çš„ä¸€ç§ï¼Œæ˜¯ä¸€ç§ä»¥å¤šåˆ†è¾¨ç‡æ¥è§£é‡Šå›¾åƒçš„æœ‰æ•ˆä½†æ¦‚å¿µç®€å•çš„ç»“æ„ã€‚ä¸€å¹…å›¾åƒçš„å›¾åƒé‡‘å­—å¡”æ˜¯ä¸€ç³»åˆ—ä»¥é‡‘å­—å¡”å½¢çŠ¶ï¼ˆè‡ªä¸‹è€Œä¸Šï¼‰é€æ­¥é™ä½ï¼Œä¸”æ¥æºäºåŒä¸€å¼ åŸå§‹å›¾çš„å›¾åƒåˆ†è¾¨ç‡é›†åˆã€‚å…¶é€šè¿‡æ¢¯æ¬¡å‘ä¸‹é‡‡æ ·è·å¾—ï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªç»ˆæ­¢æ¡ä»¶æ‰åœæ­¢é‡‡æ ·ã€‚æˆ‘ä»¬å°†ä¸€å±‚ä¸€å±‚çš„å›¾åƒæ¯”å–»æˆé‡‘å­—å¡”ï¼Œå±‚çº§è¶Šé«˜ï¼Œåˆ™å›¾åƒè¶Šå°ï¼Œåˆ†è¾¨ç‡è¶Šä½ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.pyrUp(img)       <span class=\"comment\">#å¯¹å›¾åƒè¿›è¡Œä¸Šé‡‡æ ·</span></span><br><span class=\"line\">cv.pyrDown(img)        <span class=\"comment\">#å¯¹å›¾åƒè¿›è¡Œä¸‹é‡‡æ ·</span></span><br></pre></td></tr></table></figure>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -5\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 å›¾åƒè¯»å–</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&quot;./image/image2.jpg&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 è¿›è¡Œå›¾åƒé‡‡æ ·</span></span><br><span class=\"line\">up_img = cv.pyrUp(img)  <span class=\"comment\"># ä¸Šé‡‡æ ·æ“ä½œ</span></span><br><span class=\"line\">img_1 = cv.pyrDown(img)  <span class=\"comment\"># ä¸‹é‡‡æ ·æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">cv.imshow(<span class=\"string\">&#x27;enlarge&#x27;</span>, up_img)</span><br><span class=\"line\">cv.imshow(<span class=\"string\">&#x27;original&#x27;</span>, img)</span><br><span class=\"line\">cv.imshow(<span class=\"string\">&#x27;shrink&#x27;</span>, img_1)</span><br><span class=\"line\">cv.waitKey(<span class=\"number\">0</span>)</span><br><span class=\"line\">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190926114816933.png\"  style=\"zoom: 50%;\" /></p>\r\n<h1 id=\"å½¢æ€å­¦æ“ä½œ\">å½¢æ€å­¦æ“ä½œ</h1>\r\n<p>å½¢æ€å­¦è½¬æ¢æ˜¯åŸºäºå›¾åƒå½¢çŠ¶çš„ä¸€äº›ç®€å•æ“ä½œã€‚å®ƒé€šå¸¸åœ¨äºŒè¿›åˆ¶å›¾åƒä¸Šæ‰§è¡Œã€‚è…èš€å’Œè†¨èƒ€æ˜¯ä¸¤ä¸ªåŸºæœ¬çš„å½¢æ€å­¦è¿ç®—ç¬¦ã€‚ç„¶åå®ƒçš„å˜ä½“å½¢å¼å¦‚å¼€è¿ç®—ï¼Œé—­è¿ç®—ï¼Œç¤¼å¸½é»‘å¸½ç­‰ã€‚</p>\r\n<h2 id=\"è¿é€šæ€§\">è¿é€šæ€§</h2>\r\n<p>åœ¨å›¾åƒä¸­ï¼Œæœ€å°çš„å•ä½æ˜¯åƒç´ ï¼Œæ¯ä¸ªåƒç´ å‘¨å›´æœ‰8ä¸ªé‚»æ¥åƒç´ ï¼Œå¸¸è§çš„é‚»æ¥å…³ç³»æœ‰3ç§ï¼š4é‚»æ¥ã€8é‚»æ¥å’ŒDé‚»æ¥ã€‚åˆ†åˆ«å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190926185646667-1684373842950-11.png\"  style=\"zoom: 50%;\" /></p>\r\n<ul>\r\n<li>4é‚»æ¥ï¼šåƒç´ <span class=\"math inline\">\\(p(x,y)\\)</span>çš„4é‚»åŸŸæ˜¯<code>(x+1,y);(x-1,y);(x,y+1);(x,y-1)</code>ï¼Œç”¨<span class=\"math inline\">\\(N_4(p)\\)</span>è¡¨ç¤ºåƒç´ pçš„4é‚»æ¥</li>\r\n<li>Dé‚»æ¥ï¼šåƒç´ <span class=\"math inline\">\\(p(x,y)\\)</span>çš„Dé‚»åŸŸæ˜¯<code>(x+1,y+1);(x+1,y-1);(x-1,y+1);(x-1,y-1)</code>ï¼Œç”¨<span class=\"math inline\">\\(N_D(p)\\)</span>è¡¨ç¤ºåƒç´ pçš„Dé‚»åŸŸ</li>\r\n<li>8é‚»æ¥ï¼šåƒç´ <span class=\"math inline\">\\(p(x,y)\\)</span>çš„8é‚»åŸŸæ˜¯4é‚»åŸŸçš„ç‚¹+Dé‚»åŸŸçš„ç‚¹ï¼Œç”¨<span class=\"math inline\">\\(N_8(p)\\)</span>è¡¨ç¤ºåƒç´ pçš„8é‚»åŸŸ</li>\r\n</ul>\r\n<p><strong>è¿é€šæ€§</strong>æ˜¯æè¿°åŒºåŸŸå’Œè¾¹ç•Œçš„é‡è¦æ¦‚å¿µï¼Œä¸¤ä¸ªåƒç´ è¿é€šçš„ä¸¤ä¸ªå¿…è¦æ¡ä»¶æ˜¯ï¼š</p>\r\n<ol type=\"1\">\r\n<li>ä¸¤ä¸ªåƒç´ çš„ä½ç½®æ˜¯å¦ç›¸é‚»</li>\r\n<li>ä¸¤ä¸ªåƒç´ çš„ç°åº¦å€¼æ˜¯å¦æ»¡è¶³ç‰¹å®šçš„ç›¸ä¼¼æ€§å‡†åˆ™(æˆ–è€…æ˜¯å¦ç›¸ç­‰)</li>\r\n</ol>\r\n<p>æ ¹æ®è¿é€šæ€§çš„å®šä¹‰ï¼Œæœ‰4è¿é€šã€8è¿é€šå’Œmè¿é€šä¸‰ç§ã€‚</p>\r\n<ul>\r\n<li><p>4è¿é€šï¼šå¯¹äºå…·æœ‰å€¼Vçš„åƒç´ på’Œqï¼Œå¦‚æœqåœ¨é›†åˆ<span class=\"math inline\">\\(N_4(p)\\)</span>ä¸­ï¼Œåˆ™ç§°è¿™ä¸¤ä¸ªåƒç´ æ˜¯4è¿é€šã€‚</p></li>\r\n<li><p>8è¿é€šï¼šå¯¹äºå…·æœ‰å€¼Vçš„åƒç´ på’Œqï¼Œå¦‚æœqåœ¨é›†åˆ<span class=\"math inline\">\\(N_8(p)\\)</span>ä¸­ï¼Œåˆ™ç§°è¿™ä¸¤ä¸ªåƒç´ æ˜¯8è¿é€šã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190926185504256-1684374493446-13.png\"  style=\"zoom:50%;\" /></p></li>\r\n<li><p>mè¿é€šï¼šå¯¹äºå…·æœ‰å€¼Vçš„åƒç´ på’Œqï¼Œå¦‚æœqåœ¨é›†åˆ<span class=\"math inline\">\\(N_4(p)\\)</span>ä¸­æˆ–qåœ¨é›†åˆ<span class=\"math inline\">\\(N_D(p)\\)</span>ä¸­ï¼Œå¹¶ä¸”<span class=\"math inline\">\\(N_4(p)\\)</span>ä¸<span class=\"math inline\">\\(N_4(q)\\)</span>çš„äº¤é›†ä¸ºç©º(æ²¡æœ‰å€¼Vçš„åƒç´ )ï¼Œåˆ™ç§°è¿™ä¸¤ä¸ªåƒç´ æ˜¯mè¿é€šã€‚</p></li>\r\n</ul>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190927101630929-1684374613256-15.png\"  style=\"zoom: 90%;\" /></p>\r\n<h2 id=\"è…èš€å’Œè†¨èƒ€\">è…èš€å’Œè†¨èƒ€</h2>\r\n<p>è…èš€å’Œè†¨èƒ€éƒ½æ˜¯é’ˆå¯¹ç™½è‰²éƒ¨åˆ†ï¼ˆé«˜äº®éƒ¨åˆ†ï¼‰è€Œè¨€çš„ã€‚</p>\r\n<ol type=\"1\">\r\n<li>è…èš€æ˜¯åŸå›¾ä¸­çš„é«˜äº®åŒºåŸŸè¢«èš•é£Ÿï¼Œæ•ˆæœå›¾æ‹¥æœ‰æ¯”åŸå›¾æ›´å°çš„é«˜äº®åŒºåŸŸï¼›è…èš€æ˜¯æ±‚å±€éƒ¨æœ€å°å€¼çš„æ“ä½œï¼Œä½œç”¨æ˜¯æ¶ˆé™¤ç‰©ä½“è¾¹ç•Œç‚¹ï¼Œä½¿ç›®æ ‡ç¼©å°ï¼Œå¯ä»¥æ¶ˆé™¤å°äºç»“æ„å…ƒç´ çš„å™ªå£°ç‚¹ã€‚</li>\r\n<li>è†¨èƒ€æ˜¯ä½¿å›¾åƒä¸­é«˜äº®éƒ¨åˆ†æ‰©å¼ ï¼Œæ•ˆæœå›¾æ‹¥æœ‰æ¯”åŸå›¾æ›´å¤§çš„é«˜äº®åŒºåŸŸï¼›è†¨èƒ€æ˜¯æ±‚å±€éƒ¨æœ€å¤§å€¼çš„æ“ä½œï¼Œä½œç”¨æ˜¯å°†ä¸ç‰©ä½“æ¥è§¦çš„æ‰€æœ‰èƒŒæ™¯ç‚¹åˆå¹¶åˆ°ç‰©ä½“ä¸­ï¼Œä½¿ç›®æ ‡å¢å¤§ï¼Œå¯æ·»è¡¥ç›®æ ‡ä¸­çš„å­”æ´ã€‚</li>\r\n</ol>\r\n<p><strong>è…èš€çš„å…·ä½“æ“ä½œæ˜¯ï¼š</strong>ç”¨ç»“æ„å…ƒç´ ä¸­çš„æ¯ä¸€ä¸ªåƒç´ ä¸å…¶è¦†ç›–çš„åƒç´ åšâ€œä¸â€æ“ä½œï¼Œå¦‚æœéƒ½ä¸º1ï¼Œåˆ™è¯¥åƒç´ ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç»“æ„Aè¢«ç»“æ„Bè…èš€å</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190927105316401-1684375461882-17.png\"  style=\"zoom: 67%;\" /></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.erode(img,kernel,iterations)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>imgï¼šè¦å¤„ç†çš„å›¾åƒ</li>\r\n<li>kernelï¼šæ ¸ç»“æ„</li>\r\n<li>iterationsï¼šè…èš€çš„æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯1</li>\r\n</ul>\r\n<p><strong>è†¨èƒ€çš„å…·ä½“æ“ä½œæ˜¯ï¼š</strong>ç”¨ç»“æ„å…ƒç´ ä¸­çš„æ¯ä¸€ä¸ªåƒç´ ä¸å…¶è¦†ç›–çš„åƒç´ åšâ€œä¸â€æ“ä½œï¼Œå¦‚æœéƒ½ä¸º0ï¼Œåˆ™è¯¥åƒç´ ä¸º0ï¼Œå¦åˆ™ä¸º1ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç»“æ„Aè¢«ç»“æ„Bè…èš€å</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190927110711458-1684375683181-19.png\"  style=\"zoom:67%;\" /></p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.dilate(img,kernel,iterations)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>imgï¼šè¦å¤„ç†çš„å›¾åƒ</p></li>\r\n<li><p>kernelï¼šæ ¸ç»“æ„</p></li>\r\n<li><p>iterationsï¼šè…èš€çš„æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯1</p></li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -6\">ç¤ºä¾‹ä»£ç </h3>\r\n<p>ä½¿ç”¨ä¸€ä¸ª<span class=\"math inline\">\\(5\\times5\\)</span>çš„å·ç§¯æ ¸å®ç°è…èš€å’Œè†¨èƒ€çš„è¿ç®—</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&quot;./image/image3.png&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 åˆ›å»ºæ ¸ç»“æ„</span></span><br><span class=\"line\">kernel = np.ones((<span class=\"number\">5</span>, <span class=\"number\">5</span>), np.uint8)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒè…èš€å’Œè†¨èƒ€</span></span><br><span class=\"line\">erosion = cv.erode(img, kernel) <span class=\"comment\"># è…èš€</span></span><br><span class=\"line\">dilate = cv.dilate(img,kernel) <span class=\"comment\"># è†¨èƒ€</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4 å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">1</span>,ncols=<span class=\"number\">3</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(img)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(erosion)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;è…èš€åç»“æœ&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">2</span>].imshow(dilate)</span><br><span class=\"line\">axes[<span class=\"number\">2</span>].set_title(<span class=\"string\">&quot;è†¨èƒ€åç»“æœ&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190927151844574-1684375808449-21.png\" style=\"zoom:67%;\" /></p>\r\n<h2 id=\"å¼€é—­è¿ç®—\">å¼€ã€é—­è¿ç®—</h2>\r\n<p>å¼€è¿ç®—å’Œé—­è¿ç®—æ˜¯å°†è…èš€å’Œè†¨èƒ€æŒ‰ç…§ä¸€å®šçš„æ¬¡åºè¿›è¡Œå¤„ç†ã€‚ ä½†è¿™ä¸¤è€…å¹¶ä¸æ˜¯å¯é€†çš„ï¼Œå³å…ˆå¼€åé—­å¹¶ä¸èƒ½å¾—åˆ°åŸæ¥çš„å›¾åƒã€‚</p>\r\n<ol type=\"1\">\r\n<li><p>å¼€è¿ç®—æ˜¯å…ˆè…èš€åè†¨èƒ€ï¼Œä½œç”¨æ˜¯æ¶ˆé™¤å™ªç‚¹ï¼Œå»é™¤å°çš„å¹²æ‰°å—ï¼Œè€Œä¸å½±å“åŸæ¥çš„å›¾åƒã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190927142206425-1684376263939-23.png\" style=\"zoom: 67%;\" /></p></li>\r\n<li><p>é—­è¿ç®—æ˜¯å…ˆè†¨èƒ€åè…èš€ï¼Œä½œç”¨æ˜¯æ¶ˆé™¤é—­åˆç‰©ä½“é‡Œé¢çš„å­”æ´ï¼Œå¡«å……é—­åˆåŒºåŸŸã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190927142923777-1684376306646-25.png\"  style=\"zoom:67%;\" /></p></li>\r\n</ol>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.morphologyEx(img, op, kernel)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>imgï¼šè¦å¤„ç†çš„å›¾åƒ</li>\r\n<li>op: å¤„ç†æ–¹å¼ï¼šè‹¥è¿›è¡Œå¼€è¿ç®—ï¼Œåˆ™è®¾ä¸ºcv.MORPH_OPENï¼Œè‹¥è¿›è¡Œé—­è¿ç®—ï¼Œåˆ™è®¾ä¸ºcv.MORPH_CLOSE</li>\r\n<li>Kernelï¼šæ ¸ç»“æ„</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -7\">ç¤ºä¾‹ä»£ç </h3>\r\n<p>ä½¿ç”¨<span class=\"math inline\">\\(10\\times10\\)</span>çš„å·ç§¯æ ¸å®ç°å¼€ã€é—­è¿ç®—ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img1 = cv.imread(<span class=\"string\">&quot;./image/image5.png&quot;</span>)</span><br><span class=\"line\">img2 = cv.imread(<span class=\"string\">&quot;./image/image6.png&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 åˆ›å»ºæ ¸ç»“æ„</span></span><br><span class=\"line\">kernel = np.ones((<span class=\"number\">10</span>, <span class=\"number\">10</span>), np.uint8)</span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒçš„å¼€é—­è¿ç®—</span></span><br><span class=\"line\">cvOpen = cv.morphologyEx(img1,cv.MORPH_OPEN,kernel) <span class=\"comment\"># å¼€è¿ç®—</span></span><br><span class=\"line\">cvClose = cv.morphologyEx(img2,cv.MORPH_CLOSE,kernel)<span class=\"comment\"># é—­è¿ç®—</span></span><br><span class=\"line\"><span class=\"comment\"># 4 å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">2</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>))</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">0</span>].imshow(img1)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">1</span>].imshow(cvOpen)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;å¼€è¿ç®—ç»“æœ&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">0</span>].imshow(img2)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">1</span>].imshow(cvClose)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;é—­è¿ç®—ç»“æœ&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190927153400823-1684376402734-27.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"ç¤¼å¸½å’Œé»‘å¸½\">ç¤¼å¸½å’Œé»‘å¸½</h2>\r\n<ol type=\"1\">\r\n<li>ç¤¼å¸½è¿ç®—æ˜¯åŸå›¾åƒä¸å¼€è¿ç®—çš„ç»“æœå›¾ä¹‹å·®<span class=\"math inline\">\\(dst=tophat(src,element)=src-open(src,element)\\)</span>ï¼Œ\r\n<ul>\r\n<li>å› ä¸ºå¼€è¿ç®—å¸¦æ¥çš„ç»“æœæ˜¯æ”¾å¤§äº†è£‚ç¼æˆ–è€…å±€éƒ¨ä½äº®åº¦çš„åŒºåŸŸã€‚</li>\r\n<li>ç¤¼å¸½è¿ç®—åçš„æ•ˆæœå›¾çªå‡ºäº†æ¯”åŸå›¾è½®å»“å‘¨å›´çš„åŒºåŸŸæ›´æ˜äº®çš„åŒºåŸŸï¼Œè¿™ä¸€æ“ä½œå’Œé€‰æ‹©çš„æ ¸çš„å¤§å°ç›¸å…³ã€‚</li>\r\n<li>ä½œç”¨ï¼šç”¨æ¥åˆ†ç¦»æ¯”é‚»è¿‘ç‚¹äº®ä¸€äº›çš„æ–‘å—ã€‚å½“ä¸€å¹…å›¾åƒå…·æœ‰å¤§å¹…çš„èƒŒæ™¯çš„æ—¶å€™ï¼Œè€Œå¾®å°ç‰©å“æ¯”è¾ƒæœ‰è§„å¾‹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ç¤¼å¸½è¿ç®—è¿›è¡ŒèƒŒæ™¯æå–ã€‚</li>\r\n</ul></li>\r\n<li>é»‘å¸½è¿ç®—æ˜¯é—­è¿ç®—çš„ç»“æœå›¾ä¸åŸå›¾åƒä¹‹å·®<span class=\"math inline\">\\(dst=blackhat(src,element)=close(src,element)-src\\)</span>ï¼Œ\r\n<ul>\r\n<li>é»‘å¸½è¿ç®—åçš„æ•ˆæœå›¾çªå‡ºäº†æ¯”åŸå›¾è½®å»“å‘¨å›´çš„åŒºåŸŸæ›´æš—çš„åŒºåŸŸï¼Œ</li>\r\n<li>ä½œç”¨ï¼šç”¨æ¥åˆ†ç¦»æ¯”é‚»è¿‘ç‚¹æš—ä¸€äº›çš„æ–‘å—ã€‚</li>\r\n</ul></li>\r\n</ol>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.morphologyEx(img, op, kernel)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>imgï¼šè¦å¤„ç†çš„å›¾åƒ</p></li>\r\n<li><p>opï¼šå¤„ç†æ–¹å¼ï¼š</p></li>\r\n<li><p>Kernelï¼šæ ¸ç»“æ„</p></li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -8\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img1 = cv.imread(<span class=\"string\">&quot;./image/image5.png&quot;</span>)</span><br><span class=\"line\">img2 = cv.imread(<span class=\"string\">&quot;./image/image6.png&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 åˆ›å»ºæ ¸ç»“æ„</span></span><br><span class=\"line\">kernel = np.ones((<span class=\"number\">10</span>, <span class=\"number\">10</span>), np.uint8)</span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒçš„ç¤¼å¸½å’Œé»‘å¸½è¿ç®—</span></span><br><span class=\"line\">cvOpen = cv.morphologyEx(img1,cv.MORPH_TOPHAT,kernel) <span class=\"comment\"># ç¤¼å¸½è¿ç®—</span></span><br><span class=\"line\">cvClose = cv.morphologyEx(img2,cv.MORPH_BLACKHAT,kernel)<span class=\"comment\"># é»‘å¸½è¿ç®—</span></span><br><span class=\"line\"><span class=\"comment\"># 4 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">2</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>))</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">0</span>].imshow(img1)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">1</span>].imshow(cvOpen)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>,<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;ç¤¼å¸½è¿ç®—ç»“æœ&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">0</span>].imshow(img2)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;åŸå›¾&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">1</span>].imshow(cvClose)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>,<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;é»‘å¸½è¿ç®—ç»“æœ&quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190927154018177-1684377075287-29.png\"  style=\"zoom:67%;\" /></p>\r\n<h1 id=\"å›¾åƒå¹³æ»‘\">å›¾åƒå¹³æ»‘</h1>\r\n<p><a href=\"https://baike.baidu.com/item/%E5%9B%BE%E5%83%8F%E5%B9%B3%E6%BB%91/8827890\"><code>å›¾åƒå¹³æ»‘</code></a>ä»ä¿¡å·å¤„ç†çš„è§’åº¦çœ‹å°±æ˜¯å»é™¤å…¶ä¸­çš„é«˜é¢‘ä¿¡æ¯ï¼Œä¿ç•™ä½é¢‘ä¿¡æ¯ã€‚å› æ­¤å¯ä»¥å¯¹å›¾åƒå®æ–½ä½é€šæ»¤æ³¢ã€‚ä½é€šæ»¤æ³¢å¯ä»¥å»é™¤å›¾åƒä¸­çš„å™ªå£°ï¼Œå¯¹å›¾åƒè¿›è¡Œå¹³æ»‘ã€‚æ ¹æ®æ»¤æ³¢å™¨çš„ä¸åŒå¯åˆ†ä¸ºå‡å€¼æ»¤æ³¢ï¼Œé«˜æ–¯æ»¤æ³¢ï¼Œä¸­å€¼æ»¤æ³¢ï¼Œ åŒè¾¹æ»¤æ³¢ã€‚</p>\r\n<h2 id=\"å›¾åƒå™ªå£°\">å›¾åƒå™ªå£°</h2>\r\n<p>ç”±äºå›¾åƒé‡‡é›†ã€å¤„ç†ã€ä¼ è¾“ç­‰è¿‡ç¨‹ä¸å¯é¿å…çš„ä¼šå—åˆ°å™ªå£°çš„æ±¡æŸ“ï¼Œå¦¨ç¢äººä»¬å¯¹å›¾åƒç†è§£åŠåˆ†æå¤„ç†ã€‚å¸¸è§çš„å›¾åƒå™ªå£°æœ‰é«˜æ–¯å™ªå£°ã€æ¤’ç›å™ªå£°ç­‰ã€‚</p>\r\n<h3 id=\"æ¤’ç›å™ªå£°\">æ¤’ç›å™ªå£°</h3>\r\n<p><a href=\"https://baike.baidu.com/item/%E6%A4%92%E7%9B%90%E5%99%AA%E5%A3%B0/3455958\"><code>æ¤’ç›å™ªå£°</code></a>ä¹Ÿç§°ä¸ºè„‰å†²å™ªå£°ï¼Œæ˜¯å›¾åƒä¸­ç»å¸¸è§åˆ°çš„ä¸€ç§å™ªå£°ï¼Œå®ƒæ˜¯ä¸€ç§éšæœºå‡ºç°çš„ç™½ç‚¹æˆ–è€…é»‘ç‚¹ï¼Œå¯èƒ½æ˜¯äº®çš„åŒºåŸŸæœ‰é»‘è‰²åƒç´ æˆ–æ˜¯åœ¨æš—çš„åŒºåŸŸæœ‰ç™½è‰²åƒç´ ã€‚</p>\r\n<p>æ¤’ç›å™ªå£°çš„æˆå› å¯èƒ½æ˜¯å½±åƒè®¯å·å—åˆ°çªå¦‚å…¶æ¥çš„å¼ºçƒˆå¹²æ‰°è€Œäº§ç”Ÿã€ç±»æ¯”æ•°ä½è½¬æ¢å™¨æˆ–ä½å…ƒä¼ è¾“é”™è¯¯ç­‰ã€‚ä¾‹å¦‚å¤±æ•ˆçš„æ„Ÿåº”å™¨å¯¼è‡´åƒç´ å€¼ä¸ºæœ€å°å€¼ï¼Œé¥±å’Œçš„æ„Ÿåº”å™¨å¯¼è‡´åƒç´ å€¼ä¸ºæœ€å¤§å€¼ã€‚</p>\r\n<h3 id=\"é«˜æ–¯å™ªå£°\">é«˜æ–¯å™ªå£°</h3>\r\n<p><a href=\"https://baike.baidu.com/item/%E9%AB%98%E6%96%AF%E5%99%AA%E5%A3%B0/8587563\">é«˜æ–¯å™ªå£°</a>æ˜¯æŒ‡å™ªå£°å¯†åº¦å‡½æ•°æœä»é«˜æ–¯åˆ†å¸ƒçš„ä¸€ç±»å™ªå£°ã€‚åœ¨æ•°å­—å›¾åƒä¸­çš„é«˜æ–¯å™ªå£°çš„ä¸»è¦æ¥æºå‡ºç°åœ¨é‡‡é›†æœŸé—´ï¼Œ ç”±äºä¸è‰¯ç…§æ˜å’Œ/æˆ–é«˜æ¸©å¼•èµ·çš„ä¼ æ„Ÿå™¨å™ªå£°ã€‚</p>\r\n<p>é«˜æ–¯éšæœºå˜é‡<span class=\"math inline\">\\(x\\)</span>çš„æ¦‚ç‡å¯†åº¦å‡½æ•° <span class=\"math display\">\\[\r\np(x) = \\frac{1}{\\sigma\\sqrt{2\\pi}}e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}}\r\n\\]</span> å…¶ä¸­<span class=\"math inline\">\\(z\\)</span>è¡¨ç¤ºç°åº¦å€¼ï¼Œ<span class=\"math inline\">\\(\\mu\\)</span>è¡¨ç¤º<span class=\"math inline\">\\(x\\)</span>çš„å¹³å‡å€¼æˆ–æœŸæœ›å€¼ï¼Œ<span class=\"math inline\">\\(\\sigma\\)</span>è¡¨ç¤º<span class=\"math inline\">\\(x\\)</span>çš„æ ‡å‡†å·®ã€‚æ ‡å‡†å·®çš„å¹³æ–¹<span class=\"math inline\">\\(\\sigma^2\\)</span>ç§°ä¸º<span class=\"math inline\">\\(x\\)</span>çš„æ–¹å·®ã€‚é«˜æ–¯å‡½æ•°çš„æ›²çº¿å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/441dc1bf121e7b13c6376b5839a3cd7c_b.png\" style=\"zoom:67%;\" /></p>\r\n<h2 id=\"å‡å€¼æ»¤æ³¢\">å‡å€¼æ»¤æ³¢</h2>\r\n<p>é‡‡ç”¨<strong>å‡å€¼æ»¤æ³¢æ¨¡æ¿</strong>å¯¹å›¾åƒå™ªå£°è¿›è¡Œæ»¤é™¤ã€‚ä»¤<span class=\"math inline\">\\(S_{xy}\\)</span>è¡¨ç¤ºä¸­å¿ƒåœ¨<span class=\"math inline\">\\((x, y)\\)</span>ç‚¹ï¼Œå°ºå¯¸ä¸º<span class=\"math inline\">\\(m\\times n\\)</span> çš„çŸ©å½¢å­å›¾åƒçª—å£çš„åæ ‡ç»„ã€‚ å‡å€¼æ»¤æ³¢å™¨å¯è¡¨ç¤ºä¸º <span class=\"math display\">\\[\r\n\\hat{f}=\\frac{1}{mn}\\sum_{(s,t)\\in S_{xy}}g(s,t)\r\n\\]</span> ç”±ä¸€ä¸ªå½’ä¸€åŒ–å·ç§¯æ¡†å®Œæˆçš„ã€‚å®ƒåªæ˜¯ç”¨å·ç§¯æ¡†è¦†ç›–åŒºåŸŸæ‰€æœ‰åƒç´ çš„å¹³å‡å€¼æ¥ä»£æ›¿ä¸­å¿ƒå…ƒç´ ã€‚</p>\r\n<p>ä¾‹å¦‚ï¼Œ<span class=\"math inline\">\\(3\\times3\\)</span>æ ‡å‡†åŒ–çš„å‡å€¼æ»¤æ³¢å¦‚ä¸‹æ‰€ç¤ºï¼š <span class=\"math display\">\\[\r\nK=\\frac{1}{9}\\left[\\begin{matrix}1&amp;1&amp;1\\\\1&amp;1&amp;1\\\\1&amp;1&amp;1\\end{matrix}\\right]\r\n\\]</span> å‡å€¼æ»¤æ³¢çš„ä¼˜ç‚¹æ˜¯ç®—æ³•ç®€å•ï¼Œè®¡ç®—é€Ÿåº¦è¾ƒå¿«ï¼Œç¼ºç‚¹æ˜¯åœ¨å»å™ªçš„åŒæ—¶å»é™¤äº†å¾ˆå¤šç»†èŠ‚éƒ¨åˆ†ï¼Œå°†å›¾åƒå˜å¾—æ¨¡ç³Šã€‚</p>\r\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.blur(src, ksize, anchor, borderType)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°:</p>\r\n<ul>\r\n<li>srcï¼šè¾“å…¥å›¾åƒ</li>\r\n<li>ksizeï¼šå·ç§¯æ ¸çš„å¤§å°</li>\r\n<li>anchorï¼šé»˜è®¤å€¼ (-1,-1) ï¼Œè¡¨ç¤ºæ ¸ä¸­å¿ƒ</li>\r\n<li>borderTypeï¼šè¾¹ç•Œç±»å‹</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -9\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 å›¾åƒè¯»å–</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/dogsp.jpeg&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 å‡å€¼æ»¤æ³¢</span></span><br><span class=\"line\">blur = cv.blur(img,(<span class=\"number\">5</span>,<span class=\"number\">5</span>))</span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.subplot(<span class=\"number\">121</span>),plt.imshow(img[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;åŸå›¾&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.subplot(<span class=\"number\">122</span>),plt.imshow(blur[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;å‡å€¼æ»¤æ³¢åç»“æœ&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190928102258185-1684384223434-35.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"é«˜æ–¯æ»¤æ³¢\">é«˜æ–¯æ»¤æ³¢</h2>\r\n<p>äºŒç»´é«˜æ–¯æ˜¯æ„å»ºé«˜æ–¯æ»¤æ³¢å™¨çš„åŸºç¡€ï¼Œå…¶æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ä¸º <span class=\"math display\">\\[\r\nG(x,y) = \r\n\\frac{1}{\\sigma_x\\sqrt{2\\pi}}e^{-\\frac{(x-\\mu)^2}{2\\sigma_y^2}}\\frac{1}{\\sigma_y\\sqrt{2\\pi}}e^{-\\frac{(y-\\mu)^2}{2\\sigma_y^2}}=\r\n\\frac{1}{2\\pi\\sigma^2}e^{-\\frac{(x^2+y^2)}{2\\sigma^2}}\r\n\\]</span> ä¸Šè¿°å…¬å¼åšäº†ä¸€äº›å–å€¼çš„å¤„ç†ï¼šæˆ‘ä»¬ä»¤<span class=\"math inline\">\\(\\sigma_x=\\sigma_y\\)</span>ï¼Œè¶Šæ¥è¿‘ä¸­å¿ƒï¼Œå–å€¼è¶Šå¤§ï¼Œè¶Šè¿œç¦»ä¸­å¿ƒï¼Œå–å€¼è¶Šå°ã€‚è®¡ç®—å¹³æ»‘ç»“æœæ—¶ï¼Œå°†â€œä¸­å¿ƒç‚¹â€ä½œä¸ºåŸç‚¹ï¼ˆ<span class=\"math inline\">\\(\\mu=0\\)</span>ï¼‰ï¼Œå…¶ä»–ç‚¹æŒ‰ç…§å…¶åœ¨æ­£æ€æ›²çº¿ä¸Šçš„ä½ç½®ï¼Œåˆ†é…æƒé‡ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŠ æƒå¹³å‡å€¼ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190928104118332-1684385364117-37.png\"  style=\"zoom:67%;\" /></p>\r\n<p><strong>é«˜æ–¯å¹³æ»‘çš„æµç¨‹ï¼š</strong></p>\r\n<ul>\r\n<li>ç¡®å®šæƒé‡çŸ©é˜µ\r\n<ul>\r\n<li>å‡å®šä¸­å¿ƒç‚¹çš„åæ ‡æ˜¯ï¼ˆ0,0ï¼‰ï¼Œè·ç¦»å®ƒæœ€è¿‘çš„8ä¸ªç‚¹çš„åæ ‡ï¼ˆ<span class=\"math inline\">\\(3\\times3\\)</span>çš„å·ç§¯æ ¸ï¼‰</li>\r\n</ul></li>\r\n<li>è®¡ç®—æƒé‡çŸ©é˜µï¼Œ\r\n<ul>\r\n<li>è®¾å®š<span class=\"math inline\">\\(\\sigma\\)</span>çš„å€¼ï¼Œæ ¹æ®é«˜æ–¯æ¦‚ç‡åˆ†å¸ƒå‡½æ•°<span class=\"math inline\">\\(G(x,y)\\)</span>è®¡ç®—è¿™9ä¸ªç‚¹ï¼Œ</li>\r\n<li>è®¡ç®—è¿™9ä¸ªç‚¹çš„æ€»å’Œï¼Œ</li>\r\n<li>å°†9ä¸ªå€¼åˆ†åˆ«é™¤ä»¥æƒé‡æ€»å’Œï¼Œå¾—åˆ°æœ€ç»ˆçš„æƒé‡çŸ©é˜µã€‚</li>\r\n</ul></li>\r\n<li>è®¡ç®—é«˜æ–¯æ¨¡ç³Š\r\n<ul>\r\n<li>å‡è®¾ç°æœ‰9ä¸ªåƒç´ ç‚¹ï¼Œç°åº¦å€¼ï¼ˆ0-255ï¼‰</li>\r\n<li>æ¯ä¸ªç‚¹ä¹˜ä»¥å¯¹åº”çš„æƒé‡å€¼</li>\r\n<li>å°†è¿™9ä¸ªå€¼åŠ èµ·æ¥ï¼Œå°±æ˜¯ä¸­å¿ƒç‚¹çš„é«˜æ–¯æ¨¡ç³Šçš„å€¼ã€‚</li>\r\n</ul></li>\r\n<li>å¯¹æ‰€æœ‰ç‚¹é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±å¾—åˆ°äº†é«˜æ–¯æ¨¡ç³Šåçš„å›¾åƒã€‚</li>\r\n</ul>\r\n<p>å¦‚æœåŸå›¾æ˜¯å½©è‰²å›¾ç‰‡ï¼Œå¯¹<code>RGB</code>ä¸‰ä¸ªé€šé“åˆ†åˆ«åšé«˜æ–¯å¹³æ»‘ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv2.GaussianBlur(src,ksize,sigmaX,sigmay,borderType)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>srcï¼šè¾“å…¥å›¾åƒ</li>\r\n<li>ksizeï¼šé«˜æ–¯å·ç§¯æ ¸çš„å¤§å°</li>\r\n<li>sigmaXï¼šæ°´å¹³æ–¹å‘çš„æ ‡å‡†å·®</li>\r\n<li>sigmaYï¼šå‚ç›´æ–¹å‘çš„æ ‡å‡†å·®ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸sigmaXç›¸åŒ</li>\r\n<li>borderTypeï¼šå¡«å……è¾¹ç•Œç±»å‹</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -10\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 å›¾åƒè¯»å–</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/dogGasuss.jpeg&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 é«˜æ–¯æ»¤æ³¢</span></span><br><span class=\"line\">blur = cv.GaussianBlur(img,(<span class=\"number\">3</span>,<span class=\"number\">3</span>),<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.subplot(<span class=\"number\">121</span>),plt.imshow(img[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;åŸå›¾&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.subplot(<span class=\"number\">122</span>),plt.imshow(blur[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;é«˜æ–¯æ»¤æ³¢åç»“æœ&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190928111903926-1684386634283-39.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"ä¸­å€¼æ»¤æ³¢\">ä¸­å€¼æ»¤æ³¢</h2>\r\n<p>ä¸­å€¼æ»¤æ³¢æ˜¯ä¸€ç§å…¸å‹çš„éçº¿æ€§æ»¤æ³¢æŠ€æœ¯ï¼ŒåŸºæœ¬æ€æƒ³æ˜¯ç”¨åƒç´ ç‚¹é‚»åŸŸç°åº¦å€¼çš„ä¸­å€¼æ¥ä»£æ›¿è¯¥åƒç´ ç‚¹çš„ç°åº¦å€¼ã€‚å®ƒå¯¹æ¤’ç›å™ªå£°ï¼ˆsalt-and-pepper noiseï¼‰æ¥è¯´å°¤å…¶æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¾èµ–äºé‚»åŸŸå†…é‚£äº›ä¸å…¸å‹å€¼å·®åˆ«å¾ˆå¤§çš„å€¼ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.medianBlur(src, ksize )</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>srcï¼šè¾“å…¥å›¾åƒ</li>\r\n<li>ksizeï¼šå·ç§¯æ ¸çš„å¤§å°</li>\r\n</ul>\r\n<h3 id=\"ç¤ºä¾‹ä»£ç -11\">ç¤ºä¾‹ä»£ç </h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 å›¾åƒè¯»å–</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./image/dogsp.jpeg&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 2 ä¸­å€¼æ»¤æ³¢</span></span><br><span class=\"line\">blur = cv.medianBlur(img,<span class=\"number\">5</span>)</span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">plt.subplot(<span class=\"number\">121</span>),plt.imshow(img[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;åŸå›¾&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.subplot(<span class=\"number\">122</span>),plt.imshow(blur[:,:,::-<span class=\"number\">1</span>]),plt.title(<span class=\"string\">&#x27;ä¸­å€¼æ»¤æ³¢åç»“æœ&#x27;</span>)</span><br><span class=\"line\">plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190928102319410-1684386742771-41.png\" style=\"zoom:67%;\" /></p>\r\n",
            "tags": [
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/OpenCV/OpenCV%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/",
            "url": "https://liujk6525.github.io/OpenCV/OpenCV%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/",
            "title": "OpenCVåŸºæœ¬æ“ä½œ",
            "date_published": "2023-05-17T12:09:11.000Z",
            "content_html": "<p><strong>Imgprocï¼ˆå›¾åƒå¤„ç†æ¨¡å—ï¼‰</strong></p>\r\n<p>å›¾åƒå¤„ç†æ¨¡å—åŒ…æ‹¬ï¼šå›¾åƒçš„è¯»å–ã€æ˜¾ç¤ºã€ä¿å­˜ã€å‡ ä½•è¿ç®—ç­‰ã€‚</p>\r\n<span id=\"more\"></span>\r\n<h1 id=\"å›¾åƒçš„åŸºç¡€æ“ä½œ\">å›¾åƒçš„åŸºç¡€æ“ä½œ</h1>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br></pre></td></tr></table></figure>\r\n<h2 id=\"å›¾åƒè¯»å–æ˜¾ç¤ºä¿å­˜\">å›¾åƒè¯»å–ã€æ˜¾ç¤ºã€ä¿å­˜</h2>\r\n<h3 id=\"è¯»å–å›¾åƒ\">è¯»å–å›¾åƒ</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä»¥ç°åº¦å›¾çš„å½¢å¼è¯»å–å›¾åƒï¼Œå¯ä»¥ä½¿ç”¨1ã€0æˆ–è€…-1æ¥æ›¿ä»£ä¸‹é¢ä¸‰ä¸ªæ ‡å¿—</span></span><br><span class=\"line\">img = cv.imread(<span class=\"string\">&#x27;./messi5.jpg&#x27;</span>,<span class=\"number\">0</span>) </span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li><p>è¦è¯»å–çš„å›¾åƒï¼Œ./è¡¨ç¤ºå½“å‰æ–‡ä»¶å¤¹</p></li>\r\n<li><p>è¯»å–æ–¹å¼çš„æ ‡å¿—</p>\r\n<ul>\r\n<li><p>cv.IMREAD*COLORï¼šä»¥å½©è‰²æ¨¡å¼åŠ è½½å›¾åƒï¼Œä»»ä½•å›¾åƒçš„é€æ˜åº¦éƒ½å°†è¢«å¿½ç•¥ã€‚è¿™æ˜¯é»˜è®¤å‚æ•°ã€‚</p></li>\r\n<li><p>cv.IMREAD*GRAYSCALEï¼šä»¥ç°åº¦æ¨¡å¼åŠ è½½å›¾åƒ</p></li>\r\n<li><p>cv.IMREAD_UNCHANGEDï¼šåŒ…æ‹¬alphaé€šé“çš„åŠ è½½å›¾åƒæ¨¡å¼ã€‚</p></li>\r\n</ul></li>\r\n</ul>\r\n<h3 id=\"æ˜¾ç¤ºå›¾åƒ\">æ˜¾ç¤ºå›¾åƒ</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># opencvä¸­æ˜¾ç¤º</span></span><br><span class=\"line\">cv.imshow(<span class=\"string\">&#x27;./image&#x27;</span>,img)</span><br><span class=\"line\">cv.waitKey(<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"comment\"># matplotlibä¸­å±•ç¤º</span></span><br><span class=\"line\">plt.imshow(img[:,:,::-<span class=\"number\">1</span>]) <span class=\"comment\"># matplotlibä¸­rgbå’Œopencvæ˜¯æ­£å¥½åç€çš„</span></span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>æ˜¾ç¤ºå›¾åƒçš„çª—å£åç§°ï¼Œä»¥å­—ç¬¦ä¸²ç±»å‹è¡¨ç¤º</li>\r\n<li>è¦åŠ è½½çš„å›¾åƒ</li>\r\n</ul>\r\n<p><strong>æ³¨æ„ï¼šåœ¨è°ƒç”¨æ˜¾ç¤ºå›¾åƒçš„APIåï¼Œè¦è°ƒç”¨cv.waitKey()ç»™å›¾åƒç»˜åˆ¶ç•™ä¸‹æ—¶é—´ï¼Œå¦åˆ™çª—å£ä¼šå‡ºç°æ— å“åº”æƒ…å†µï¼Œå¹¶ä¸”å›¾åƒæ— æ³•æ˜¾ç¤ºå‡ºæ¥</strong>ã€‚</p>\r\n<h3 id=\"ä¿å­˜å›¾åƒ\">ä¿å­˜å›¾åƒ</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.imwrite(<span class=\"string\">&#x27;./messigray.png&#x27;</span>,img)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>æ–‡ä»¶åï¼Œä¿å­˜ä½ç½®ï¼Œ./è¡¨ç¤ºå½“å‰æ–‡ä»¶å¤¹</li>\r\n<li>è¦ä¿å­˜çš„å›¾åƒ</li>\r\n</ul>\r\n<h2 id=\"ç»˜åˆ¶å‡ ä½•å›¾å½¢\">ç»˜åˆ¶å‡ ä½•å›¾å½¢</h2>\r\n<h3 id=\"ç»˜åˆ¶ç›´çº¿\">ç»˜åˆ¶ç›´çº¿</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.line(img,start,end,color,thickness)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>img:è¦ç»˜åˆ¶ç›´çº¿çš„å›¾åƒ</li>\r\n<li>start,end: ç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹</li>\r\n<li>color: çº¿æ¡çš„é¢œè‰²</li>\r\n<li>thickness: çº¿æ¡å®½åº¦</li>\r\n</ul>\r\n<h3 id=\"ç»˜åˆ¶åœ†å½¢\">ç»˜åˆ¶åœ†å½¢</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.circle(img,centerpoint, r, color, thickness)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>img:è¦ç»˜åˆ¶åœ†å½¢çš„å›¾åƒ</li>\r\n<li>centerpoint, r: åœ†å¿ƒå’ŒåŠå¾„</li>\r\n<li>color: çº¿æ¡çš„é¢œè‰²</li>\r\n<li>thickness: çº¿æ¡å®½åº¦ï¼Œä¸º-1æ—¶ç”Ÿæˆé—­åˆå›¾æ¡ˆå¹¶å¡«å……é¢œè‰²</li>\r\n</ul>\r\n<h3 id=\"ç»˜åˆ¶çŸ©å½¢\">ç»˜åˆ¶çŸ©å½¢</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.rectangle(img,leftupper,rightdown,color,thickness)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>img:è¦ç»˜åˆ¶çŸ©å½¢çš„å›¾åƒ</li>\r\n<li>leftupper, rightdown: çŸ©å½¢çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡</li>\r\n<li>color: çº¿æ¡çš„é¢œè‰²</li>\r\n<li>thickness: çº¿æ¡å®½åº¦</li>\r\n</ul>\r\n<h3 id=\"æ·»åŠ æ–‡å­—\">æ·»åŠ æ–‡å­—</h3>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.putText(img,text,station, font, fontsize,color,thickness,cv.LINE_AA)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>img: å›¾åƒ</li>\r\n<li>textï¼šè¦å†™å…¥çš„æ–‡æœ¬æ•°æ®</li>\r\n<li>stationï¼šæ–‡æœ¬çš„æ”¾ç½®ä½ç½®</li>\r\n<li>fontï¼šå­—ä½“</li>\r\n<li>fontsize :å­—ä½“å¤§å°</li>\r\n</ul>\r\n<h3 id=\"æ•ˆæœå±•ç¤º\">æ•ˆæœå±•ç¤º</h3>\r\n<p>ç”Ÿæˆä¸€ä¸ªå…¨é»‘çš„å›¾åƒï¼Œç„¶ååœ¨é‡Œé¢ç»˜åˆ¶å›¾åƒå¹¶æ·»åŠ æ–‡å­—</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"comment\"># 1 åˆ›å»ºä¸€ä¸ªç©ºç™½çš„å›¾åƒ</span></span><br><span class=\"line\">img = np.zeros((<span class=\"number\">512</span>,<span class=\"number\">512</span>,<span class=\"number\">3</span>), np.uint8)</span><br><span class=\"line\"><span class=\"comment\"># 2 ç»˜åˆ¶å›¾å½¢</span></span><br><span class=\"line\">cv.line(img,(<span class=\"number\">0</span>,<span class=\"number\">0</span>),(<span class=\"number\">511</span>,<span class=\"number\">511</span>),(<span class=\"number\">255</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>),<span class=\"number\">5</span>)</span><br><span class=\"line\">cv.rectangle(img,(<span class=\"number\">384</span>,<span class=\"number\">0</span>),(<span class=\"number\">510</span>,<span class=\"number\">128</span>),(<span class=\"number\">0</span>,<span class=\"number\">255</span>,<span class=\"number\">0</span>),<span class=\"number\">3</span>)</span><br><span class=\"line\">cv.circle(img,(<span class=\"number\">447</span>,<span class=\"number\">63</span>), <span class=\"number\">63</span>, (<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">255</span>), -<span class=\"number\">1</span>)</span><br><span class=\"line\">font = cv.FONT_HERSHEY_SIMPLEX</span><br><span class=\"line\">cv.putText(img,<span class=\"string\">&#x27;OpenCV&#x27;</span>,(<span class=\"number\">10</span>,<span class=\"number\">500</span>), font, <span class=\"number\">4</span>,(<span class=\"number\">255</span>,<span class=\"number\">255</span>,<span class=\"number\">255</span>),<span class=\"number\">2</span>,cv.LINE_AA)</span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒå±•ç¤º</span></span><br><span class=\"line\">plt.imshow(img[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">plt.title(<span class=\"string\">&#x27;åŒ¹é…ç»“æœ&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20190925154009533.png\" style=\"zoom: 50%;\" /></p>\r\n<h2 id=\"è·å–å¹¶ä¿®æ”¹åƒç´ ç‚¹\">è·å–å¹¶ä¿®æ”¹åƒç´ ç‚¹</h2>\r\n<p>å¯ä»¥é€šè¿‡è¡Œå’Œåˆ—çš„åæ ‡å€¼è·å–è¯¥åƒç´ ç‚¹çš„åƒç´ å€¼ã€‚å¯¹äºBGRå›¾åƒï¼Œå®ƒè¿”å›ä¸€ä¸ªè“ï¼Œç»¿ï¼Œçº¢å€¼çš„æ•°ç»„ã€‚å¯¹äºç°åº¦å›¾åƒï¼Œä»…è¿”å›ç›¸åº”çš„å¼ºåº¦å€¼ã€‚ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•å¯¹åƒç´ å€¼è¿›è¡Œä¿®æ”¹ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># è·å–æŸä¸ªåƒç´ ç‚¹çš„å€¼</span></span><br><span class=\"line\">px = img[<span class=\"number\">100</span>,<span class=\"number\">100</span>]</span><br><span class=\"line\"><span class=\"comment\"># ä»…è·å–è“è‰²é€šé“çš„å¼ºåº¦å€¼</span></span><br><span class=\"line\">blue = img[<span class=\"number\">100</span>,<span class=\"number\">100</span>,<span class=\"number\">0</span>]</span><br><span class=\"line\"><span class=\"comment\"># ä¿®æ”¹æŸä¸ªä½ç½®çš„åƒç´ å€¼</span></span><br><span class=\"line\">img[<span class=\"number\">100</span>,<span class=\"number\">100</span>] = [<span class=\"number\">255</span>,<span class=\"number\">255</span>,<span class=\"number\">255</span>]</span><br></pre></td></tr></table></figure>\r\n<h2 id=\"å›¾åƒçš„å±æ€§\">å›¾åƒçš„å±æ€§</h2>\r\n<p>å›¾åƒå±æ€§åŒ…æ‹¬è¡Œæ•°ï¼Œåˆ—æ•°å’Œé€šé“æ•°ï¼Œå›¾åƒæ•°æ®ç±»å‹ï¼Œåƒç´ æ•°ç­‰ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191016151042764-1684327382077-6.png\"  style=\"zoom:50%;\" /></p>\r\n<h2 id=\"å›¾åƒé€šé“çš„æ‹†åˆ†ä¸åˆå¹¶\">å›¾åƒé€šé“çš„æ‹†åˆ†ä¸åˆå¹¶</h2>\r\n<p>æœ‰æ—¶éœ€è¦åœ¨Bï¼ŒGï¼ŒRé€šé“å›¾åƒä¸Šå•ç‹¬å·¥ä½œ,æ­¤æ—¶éœ€è¦å°†<code>BGR</code>å›¾åƒåˆ†å‰²ä¸ºå•ä¸ªé€šé“ã€‚æˆ–è€…å¯èƒ½éœ€è¦å°†è¿™äº›å•ç‹¬çš„é€šé“åˆå¹¶åˆ°BGRå›¾åƒã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®Œæˆã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># é€šé“æ‹†åˆ†</span></span><br><span class=\"line\">b,g,r = cv.split(img)</span><br><span class=\"line\"><span class=\"comment\"># é€šé“åˆå¹¶</span></span><br><span class=\"line\">img = cv.merge((b,g,r))</span><br></pre></td></tr></table></figure>\r\n<h2 id=\"è‰²å½©ç©ºé—´çš„æ”¹å˜\">è‰²å½©ç©ºé—´çš„æ”¹å˜</h2>\r\n<p><code>OpenCV</code>ä¸­æœ‰150å¤šç§é¢œè‰²ç©ºé—´è½¬æ¢æ–¹æ³•ã€‚æœ€å¹¿æ³›ä½¿ç”¨çš„è½¬æ¢æ–¹æ³•æœ‰ä¸¤ç§ï¼Œ<span class=\"math inline\">\\(BGR \\leftrightarrow Gray\\)</span>å’Œ<span class=\"math inline\">\\(BGR \\leftrightarrow HSV\\)</span>ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cv.cvtColor(input_imageï¼Œflag)</span><br></pre></td></tr></table></figure>\r\n<p>å‚æ•°ï¼š</p>\r\n<ul>\r\n<li>input_image: è¿›è¡Œé¢œè‰²ç©ºé—´è½¬æ¢çš„å›¾åƒ</li>\r\n<li>flag: è½¬æ¢ç±»å‹\r\n<ul>\r\n<li>cv.COLOR_BGR2GRAY : <span class=\"math inline\">\\(BGR \\leftrightarrow Gray\\)</span></li>\r\n<li>cv.COLOR_BGR2HSV: <span class=\"math inline\">\\(BGR \\leftrightarrow HSV\\)</span></li>\r\n</ul></li>\r\n</ul>\r\n<h1 id=\"ç®—æ•°æ“ä½œ\">ç®—æ•°æ“ä½œ</h1>\r\n<h2 id=\"å›¾åƒåŠ æ³•\">å›¾åƒåŠ æ³•</h2>\r\n<p>ä½¿ç”¨<code>OpenCV</code>çš„<code>cv.add()</code>å‡½æ•°æŠŠä¸¤å¹…å›¾åƒç›¸åŠ ï¼Œæˆ–è€…å¯ä»¥ç®€å•åœ°é€šè¿‡numpyæ“ä½œæ·»åŠ ä¸¤ä¸ªå›¾åƒï¼Œå¦‚<span class=\"math inline\">\\(res = img_1 + img_2\\)</span>ã€‚ä¸¤ä¸ªå›¾åƒåº”è¯¥å…·æœ‰ç›¸åŒçš„å¤§å°å’Œç±»å‹ï¼Œæˆ–è€…ç¬¬äºŒä¸ªå›¾åƒå¯ä»¥æ˜¯æ ‡é‡å€¼ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = np.uint8([<span class=\"number\">250</span>])</span><br><span class=\"line\">y = np.uint8([<span class=\"number\">10</span>])</span><br><span class=\"line\"><span class=\"built_in\">print</span>( cv.add(x,y) ) <span class=\"comment\"># 250+10 = 260 =&gt; 255</span></span><br><span class=\"line\">[[<span class=\"number\">255</span>]]</span><br><span class=\"line\"><span class=\"built_in\">print</span>( x+y )          <span class=\"comment\"># 250+10 = 260 % 256 = 4</span></span><br><span class=\"line\">[<span class=\"number\">4</span>]</span><br></pre></td></tr></table></figure>\r\n<p>**æ³¨æ„ï¼š<code>OpenCV</code>çš„åŠ æ³•æ˜¯é¥±å’Œæ“ä½œï¼Œè€Œ<code>Numpy</code>æ·»åŠ æ˜¯æ¨¡è¿ç®—ã€‚è¿™ç§åŒºåˆ«åœ¨å¯¹ä¸¤å¹…å›¾åƒè¿›è¡ŒåŠ æ³•æ—¶ä¼šå¾ˆæ˜æ˜¾ã€‚<code>OpenCV</code> çš„ç»“æœä¼šæ›´å¥½ä¸€ç‚¹ã€‚æ‰€ä»¥æˆ‘ä»¬å°½é‡ä½¿ç”¨ <code>OpenCV</code>ä¸­çš„å‡½æ•°ã€‚</p>\r\n<p>å°†ä¸¤å¹…å›¾åƒè¿›è¡ŒåŠ æ³•æ“ä½œæ¥æ¯”è¾ƒå…¶ä¸­çš„åŒºåˆ«ï¼š</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img1 = cv.imread(<span class=\"string\">&quot;./view.jpg&quot;</span>)</span><br><span class=\"line\">img2 = cv.imread(<span class=\"string\">&quot;./rain.jpg&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2 åŠ æ³•æ“ä½œ</span></span><br><span class=\"line\">img3 = cv.add(img1,img2) <span class=\"comment\"># cvä¸­çš„åŠ æ³•</span></span><br><span class=\"line\">img4 = img1+img2 <span class=\"comment\"># ç›´æ¥ç›¸åŠ </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">fig,axes=plt.subplots(nrows=<span class=\"number\">1</span>,ncols=<span class=\"number\">2</span>,figsize=(<span class=\"number\">10</span>,<span class=\"number\">8</span>),dpi=<span class=\"number\">100</span>)</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].imshow(img3[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">0</span>].set_title(<span class=\"string\">&quot;cvä¸­çš„åŠ æ³•&quot;</span>)</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].imshow(img4[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">axes[<span class=\"number\">1</span>].set_title(<span class=\"string\">&quot;ç›´æ¥ç›¸åŠ &quot;</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p>ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191016154714377.png\" style=\"zoom:67%;\" /></p>\r\n<h2 id=\"å›¾åƒèåˆ\">å›¾åƒèåˆ</h2>\r\n<p>è¿™å…¶å®ä¹Ÿæ˜¯åŠ æ³•ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ä¸¤å¹…å›¾åƒçš„æƒé‡ä¸åŒï¼Œè¿™å°±ä¼šç»™äººä¸€ç§æ··åˆæˆ–è€…é€æ˜çš„æ„Ÿè§‰ã€‚å›¾åƒæ··åˆçš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>\r\n<p><span class=\"math display\">\\[\r\ng(x)=(1âˆ’\\alpha)f_0(x)+\\alpha f_1(x)+\\gamma\r\n\\]</span> é€šè¿‡ä¿®æ”¹<span class=\"math inline\">\\(\\alpha\\)</span>çš„å€¼<span class=\"math inline\">\\((0\\rightarrow1)\\)</span>ï¼Œå¯ä»¥å®ç°éå¸¸ç‚«é…·çš„æ··åˆã€‚</p>\r\n<p>ç°åœ¨æˆ‘ä»¬æŠŠä¸¤å¹…å›¾æ··åˆåœ¨ä¸€èµ·ã€‚ç¬¬ä¸€å¹…å›¾çš„æƒé‡æ˜¯0.7ï¼Œç¬¬äºŒå¹…å›¾çš„æƒé‡æ˜¯0.3ã€‚å‡½æ•°<code>cv2.addWeighted()</code>å¯ä»¥æŒ‰ä¸‹é¢çš„å…¬å¼å¯¹å›¾ç‰‡è¿›è¡Œæ··åˆæ“ä½œã€‚</p>\r\n<p><span class=\"math display\">\\[\r\ndst = (1-\\alpha)\\cdot img_1 + \\alpha\\cdot img_2 + \\gamma\r\n\\]</span> è¿™é‡Œ<span class=\"math inline\">\\(\\gamma\\)</span>å–ä¸º0ã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2 <span class=\"keyword\">as</span> cv</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 1 è¯»å–å›¾åƒ</span></span><br><span class=\"line\">img1 = cv.imread(<span class=\"string\">&quot;view.jpg&quot;</span>)</span><br><span class=\"line\">img2 = cv.imread(<span class=\"string\">&quot;rain.jpg&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2 å›¾åƒæ··åˆ</span></span><br><span class=\"line\">img3 = cv.addWeighted(img1,<span class=\"number\">0.7</span>,img2,<span class=\"number\">0.3</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 å›¾åƒæ˜¾ç¤º</span></span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">8</span>,<span class=\"number\">8</span>))</span><br><span class=\"line\">plt.imshow(img3[:,:,::-<span class=\"number\">1</span>])</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/image-20191016161128720.png\" style=\"zoom:%67%;\" /></p>\r\n<p><strong>æ³¨æ„ï¼š</strong>è¿™é‡Œéƒ½è¦æ±‚ä¸¤å¹…å›¾åƒæ˜¯ç›¸åŒå¤§å°çš„ã€‚</p>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Fo4y1d7JL?p=11&amp;vd_source=fe8e916be2bd597efffd8dfd95249141\"><code>é»‘é©¬ç¨‹åºå‘˜äººå·¥æ™ºèƒ½æ•™ç¨‹_10å°æ—¶å­¦ä¼šå›¾åƒå¤„ç†OpenCVå…¥é—¨æ•™ç¨‹</code></a></p>\r\n",
            "tags": [
                "Jupyter Notebook"
            ]
        },
        {
            "id": "https://liujk6525.github.io/OpenCV/OpenCV%E7%AE%80%E4%BB%8B/",
            "url": "https://liujk6525.github.io/OpenCV/OpenCV%E7%AE%80%E4%BB%8B/",
            "title": "OpenCVç®€ä»‹",
            "date_published": "2023-05-17T10:59:27.000Z",
            "content_html": "<h1 id=\"å›¾åƒå¤„ç†ç®€ä»‹\">å›¾åƒå¤„ç†ç®€ä»‹</h1>\r\n<h2 id=\"å›¾åƒ\">å›¾åƒ</h2>\r\n<p><a href=\"https://baike.baidu.com/item/%E5%9B%BE%E5%83%8F/773234\"><code>å›¾åƒ</code></a>æ˜¯äººç±»è§†è§‰çš„åŸºç¡€ï¼Œæ˜¯è‡ªç„¶æ™¯ç‰©çš„å®¢è§‚åæ˜ ï¼Œæ˜¯äººç±»è®¤è¯†ä¸–ç•Œå’Œäººç±»æœ¬èº«çš„é‡è¦æºæ³‰ã€‚â€œå›¾â€æ˜¯ç‰©ä½“åå°„æˆ–é€å°„å…‰çš„åˆ†å¸ƒï¼Œâ€œåƒâ€œæ˜¯äººçš„è§†è§‰ç³»ç»Ÿæ‰€æ¥å—çš„å›¾åœ¨äººè„‘ä¸­æ‰€å½¢ç‰ˆçš„å°è±¡æˆ–è®¤è¯†ï¼Œç…§ç‰‡ã€ç»˜ç”»ã€å‰ªè´´ç”»ã€åœ°å›¾ã€ä¹¦æ³•ä½œå“ã€æ‰‹å†™æ±‰å­¦ã€ä¼ çœŸã€å«æ˜Ÿäº‘å›¾ã€å½±è§†ç”»é¢ã€Xå…‰ç‰‡ã€è„‘ç”µå›¾ã€å¿ƒç”µå›¾ç­‰éƒ½æ˜¯å›¾åƒ</p>\r\n<span id=\"more\"></span>\r\n<h2 id=\"æ¨¡æ‹Ÿå›¾åƒå’Œæ•°å­—å›¾åƒ\">æ¨¡æ‹Ÿå›¾åƒå’Œæ•°å­—å›¾åƒ</h2>\r\n<p>å›¾åƒèµ·æºäº1826å¹´å‰åæ³•å›½ç§‘å­¦å®¶<code>Joseph NicÃ©phore NiÃ©pce</code>å‘æ˜çš„ç¬¬ä¸€å¼ å¯æ°¸ä¹…ä¿å­˜çš„ç…§ç‰‡ï¼Œå±äºæ¨¡æ‹Ÿå›¾åƒã€‚æ¨¡æ‹Ÿå›¾åƒåˆç§°è¿ç»­å›¾åƒï¼Œå®ƒé€šè¿‡æŸç§ç‰©ç†é‡ï¼ˆå¦‚å…‰ã€ç”µç­‰ï¼‰çš„å¼ºå¼±å˜åŒ–æ¥è®°å½•å›¾åƒäº®åº¦ä¿¡æ¯ï¼Œæ‰€ä»¥æ˜¯<strong>è¿ç»­å˜æ¢çš„</strong>ã€‚æ¨¡æ‹Ÿä¿¡å·çš„ç‰¹ç‚¹æ˜¯å®¹æ˜“å—å¹²æ‰°ï¼Œå¦‚ä»Šå·²ç»åŸºæœ¬å…¨é¢è¢«æ•°å­—å›¾åƒæ›¿ä»£ã€‚</p>\r\n<p>åœ¨ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ˜åï¼Œ1921å¹´ç¾å›½ç§‘å­¦å®¶å‘æ˜äº†<code>Bartlane System</code>ï¼Œå¹¶ä»ä¼¦æ•¦ä¼ åˆ°çº½çº¦ä¼ è¾“äº†ç¬¬ä¸€å¹…æ•°å­—å›¾åƒï¼Œå…¶äº®åº¦ç”¨<strong>ç¦»æ•£æ•°å€¼è¡¨ç¤º</strong>ï¼Œå°†å›¾ç‰‡ç¼–ç æˆ5ä¸ªç°åº¦çº§ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé€šè¿‡æµ·åº•ç”µç¼†è¿›è¡Œä¼ è¾“ã€‚åœ¨å‘é€ç«¯å›¾ç‰‡è¢«ç¼–ç å¹¶ä½¿ç”¨æ‰“å­”å¸¦è®°å½•ï¼Œé€šè¿‡ç³»ç»Ÿä¼ è¾“ååœ¨æ¥æ”¶æ–¹ä½¿ç”¨ç‰¹æ®Šçš„æ‰“å°æœºæ¢å¤æˆå›¾åƒã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/Snipaste_2019-09-24_11-19-33.png\"  style=\"zoom: 67%;\" /></p>\r\n<p>1950å¹´å·¦å³ï¼Œè®¡ç®—æœºè¢«å‘æ˜ï¼Œæ•°å­—å›¾åƒå¤„ç†å­¦ç§‘æ­£å¼è¯ç”Ÿã€‚</p>\r\n<p>è®¡ç®—æœºé‡‡ç”¨0/1ç¼–ç çš„ç³»ç»Ÿï¼Œæ•°å­—å›¾åƒæ˜¯åˆ©ç”¨0/1æ¥è®°å½•ä¿¡æ¯ï¼Œæˆ‘ä»¬å¹³å¸¸æ¥è§¦çš„å›¾åƒéƒ½æ˜¯8ä½æ•°å›¾åƒï¼ŒåŒ…å«0ï½255ç°åº¦ï¼Œå…¶ä¸­0ä»£è¡¨æœ€é»‘ï¼Œ1ä»£è¡¨æœ€ç™½ã€‚å¦‚ä¸‹å±•ç°çš„æ˜¯ä¸€ä¸ªç°åº¦å›¾ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/Snipaste_2019-09-24_11-46-55.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"å›¾åƒçš„åˆ†ç±»\">å›¾åƒçš„åˆ†ç±»</h2>\r\n<h3 id=\"äºŒå€¼å›¾åƒ\">äºŒå€¼å›¾åƒï¼š</h3>\r\n<p>ä¸€å¹…äºŒå€¼å›¾åƒçš„äºŒç»´çŸ©é˜µä»…ç”±0ã€1ä¸¤ä¸ªå€¼æ„æˆï¼Œ0ä»£è¡¨é»‘è‰²ï¼Œ1ä»£ç™½è‰²ã€‚ç”±äºæ¯ä¸€åƒç´ ï¼ˆçŸ©é˜µä¸­æ¯ä¸€å…ƒç´ ï¼‰å–å€¼ä»…æœ‰0ã€1ä¸¤ç§å¯èƒ½ï¼Œæ‰€ä»¥è®¡ç®—æœºä¸­äºŒå€¼å›¾åƒçš„æ•°æ®ç±»å‹é€šå¸¸ä¸º1ä¸ªäºŒè¿›åˆ¶ä½ã€‚äºŒå€¼å›¾åƒé€šå¸¸ç”¨äºæ–‡å­—ã€çº¿æ¡å›¾çš„æ‰«æè¯†åˆ«ï¼ˆOCRï¼‰å’Œæ©è†œå›¾åƒçš„å­˜å‚¨ã€‚</p>\r\n<h3 id=\"ç°åº¦å›¾\">ç°åº¦å›¾ï¼š</h3>\r\n<p>æ¯ä¸ªåƒç´ åªæœ‰ä¸€ä¸ªé‡‡æ ·é¢œè‰²çš„å›¾åƒï¼Œè¿™ç±»å›¾åƒé€šå¸¸æ˜¾ç¤ºä¸ºä»æœ€æš—é»‘è‰²åˆ°æœ€äº®çš„ç™½è‰²çš„ç°åº¦ï¼Œå°½ç®¡ç†è®ºä¸Šè¿™ä¸ªé‡‡æ ·å¯ä»¥ä»»ä½•é¢œè‰²çš„ä¸åŒæ·±æµ…ï¼Œç”šè‡³å¯ä»¥æ˜¯ä¸åŒäº®åº¦ä¸Šçš„ä¸åŒé¢œè‰²ã€‚ç°åº¦å›¾åƒä¸é»‘ç™½å›¾åƒä¸åŒï¼Œåœ¨è®¡ç®—æœºå›¾åƒé¢†åŸŸä¸­é»‘ç™½å›¾åƒåªæœ‰é»‘è‰²ä¸ç™½è‰²ä¸¤ç§é¢œè‰²ï¼›ä½†æ˜¯ï¼Œç°åº¦å›¾åƒåœ¨é»‘è‰²ä¸ç™½è‰²ä¹‹é—´è¿˜æœ‰è®¸å¤šçº§çš„é¢œè‰²æ·±åº¦ã€‚ç°åº¦å›¾åƒç»å¸¸æ˜¯åœ¨å•ä¸ªç”µç£æ³¢é¢‘è°±å¦‚å¯è§å…‰å†…æµ‹é‡æ¯ä¸ªåƒç´ çš„äº®åº¦å¾—åˆ°çš„ï¼Œç”¨äºæ˜¾ç¤ºçš„ç°åº¦å›¾åƒé€šå¸¸ç”¨æ¯ä¸ªé‡‡æ ·åƒç´ 8ä½çš„éçº¿æ€§å°ºåº¦æ¥ä¿å­˜ï¼Œè¿™æ ·å¯ä»¥æœ‰<span class=\"math inline\">\\(2^8=256\\)</span>çº§ç°åº¦ï¼ˆå¦‚æœç”¨<span class=\"math inline\">\\(16\\)</span>ä½ï¼Œåˆ™æœ‰<span class=\"math inline\">\\(2^16=65536\\)</span>çº§ï¼‰ã€‚</p>\r\n<h3 id=\"å½©è‰²å›¾\"><strong>å½©è‰²å›¾</strong>ï¼š</h3>\r\n<p>æ¯ä¸ªåƒç´ é€šå¸¸æ˜¯ç”±çº¢ï¼ˆRï¼‰ã€ç»¿ï¼ˆGï¼‰ã€è“ï¼ˆBï¼‰ä¸‰ä¸ªåˆ†é‡æ¥è¡¨ç¤ºçš„ï¼Œåˆ†é‡ä»‹äºï¼ˆ0~255ï¼‰ã€‚<code>RGB</code>å›¾åƒä¸ç´¢å¼•å›¾åƒä¸€æ ·éƒ½å¯ä»¥ç”¨æ¥è¡¨ç¤ºå½©è‰²å›¾åƒã€‚ä¸ç´¢å¼•å›¾åƒä¸€æ ·ï¼Œå®ƒåˆ†åˆ«ç”¨çº¢ï¼ˆRï¼‰ã€ç»¿ï¼ˆGï¼‰ã€è“ï¼ˆBï¼‰ä¸‰åŸè‰²çš„ç»„åˆæ¥è¡¨ç¤ºæ¯ä¸ªåƒç´ çš„é¢œè‰²ã€‚ä½†ä¸ç´¢å¼•å›¾åƒä¸åŒçš„æ˜¯ï¼Œ<code>RGB</code>å›¾åƒæ¯ä¸€ä¸ªåƒç´ çš„é¢œè‰²å€¼ï¼ˆç”±<code>RGB</code>ä¸‰åŸè‰²è¡¨ç¤ºï¼‰ç›´æ¥å­˜æ”¾åœ¨å›¾åƒçŸ©é˜µä¸­ï¼Œç”±äºæ¯ä¸€åƒç´ çš„é¢œè‰²éœ€ç”±Rã€Gã€Bä¸‰ä¸ªåˆ†é‡æ¥è¡¨ç¤ºï¼ŒMã€Nåˆ†åˆ«è¡¨ç¤ºå›¾åƒçš„è¡Œåˆ—æ•°ï¼Œä¸‰ä¸ªM x Nçš„äºŒç»´çŸ©é˜µåˆ†åˆ«è¡¨ç¤ºå„ä¸ªåƒç´ çš„Rã€Gã€Bä¸‰ä¸ªé¢œè‰²åˆ†é‡ã€‚<code>RGB</code>å›¾åƒçš„æ•°æ®ç±»å‹ä¸€èˆ¬ä¸º8ä½æ— ç¬¦å·æ•´å½¢ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºå’Œå­˜æ”¾çœŸå½©è‰²å›¾åƒã€‚</p>\r\n<h1 id=\"opencvç®€ä»‹\"><code>OpenCV</code>ç®€ä»‹</h1>\r\n<p><code>OpenCV</code>æ˜¯ä¸€æ¬¾ç”±Intelå…¬å¸ä¿„ç½—æ–¯å›¢é˜Ÿå‘èµ·å¹¶å‚ä¸å’Œç»´æŠ¤çš„ä¸€ä¸ªè®¡ç®—æœºè§†è§‰å¤„ç†å¼€æºè½¯ä»¶åº“ï¼Œæ”¯æŒä¸è®¡ç®—æœºè§†è§‰å’Œæœºå™¨å­¦ä¹ ç›¸å…³çš„ä¼—å¤šç®—æ³•ï¼Œå¹¶ä¸”æ­£åœ¨æ—¥ç›Šæ‰©å±•ã€‚</p>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/Snipaste_2019-09-23_16-41-04.png\"  style=\"zoom:67%;\" /></p>\r\n<h2 id=\"opencv-python\"><code>OpenCV-Python</code></h2>\r\n<p><code>OpenCV-Python</code>æ˜¯åŸå§‹<code>OpenCV</code> C++å®ç°çš„PythonåŒ…è£…å™¨ã€‚åŒæ—¶å®ƒä½¿ç”¨<code>Numpy</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªé«˜åº¦ä¼˜åŒ–çš„æ•°æ®åº“æ“ä½œåº“ï¼Œå…·æœ‰<code>MATLAB</code>é£æ ¼çš„è¯­æ³•ã€‚æ‰€æœ‰<code>OpenCV</code>æ•°ç»„ç»“æ„éƒ½è½¬æ¢ä¸º<code>Numpy</code>æ•°ç»„ã€‚è¿™ä¹Ÿä½¿å¾—ä¸ä½¿ç”¨<code>Numpy</code>çš„å…¶ä»–åº“ï¼ˆå¦‚<code>SciPy</code>å’Œ<code>Matplotlib</code>ï¼‰é›†æˆæ›´å®¹æ˜“ã€‚</p>\r\n<h2 id=\"opencvéƒ¨ç½²\"><code>OpenCV</code>éƒ¨ç½²</h2>\r\n<ol type=\"1\">\r\n<li>å®‰è£…<code>OpenCV</code>ä¹‹å‰éœ€è¦å…ˆå®‰è£…<a href=\"https://pypi.org/project/numpy/\"><code>numpy</code></a>, <a href=\"https://pypi.org/project/matplotlib/\"><code>matplotlib</code></a>ã€‚</li>\r\n<li>åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ</li>\r\n<li>å®‰è£…<a href=\"https://pypi.org/project/opencv-python/\"><code>OpenCV-Python</code></a>, ç”±äºä¸€äº›ç»å…¸çš„ç®—æ³•è¢«ç”³è¯·äº†ç‰ˆæƒï¼Œæ–°ç‰ˆæœ¬æœ‰å¾ˆå¤§çš„é™åˆ¶ï¼Œæ‰€ä»¥é€‰ç”¨3.4.3ä»¥ä¸‹çš„ç‰ˆæœ¬</li>\r\n</ol>\r\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install opencv-python==3.4.2.17</span><br></pre></td></tr></table></figure>\r\n<p>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼Œè¿è¡Œä»¥ä¸‹ä»£ç æ— æŠ¥é”™ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> cv2</span><br><span class=\"line\"><span class=\"comment\"># è¯»ä¸€ä¸ªå›¾ç‰‡å¹¶è¿›è¡Œæ˜¾ç¤º(å›¾ç‰‡è·¯å¾„éœ€è‡ªå·±æŒ‡å®š)</span></span><br><span class=\"line\">lena=cv2.imread(<span class=\"string\">&quot;1.jpg&quot;</span>)</span><br><span class=\"line\">cv2.imshow(<span class=\"string\">&quot;image&quot;</span>,lena)</span><br><span class=\"line\">cv2.waitKey(<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\r\n<p>éœ€è¦åˆ©ç”¨SIFTå’ŒSURFç­‰è¿›è¡Œç‰¹å¾æå–æ—¶ï¼Œè¿˜éœ€è¦å®‰è£…ï¼š</p>\r\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install opencv-contrib-python==<span class=\"number\">3.4</span><span class=\"number\">.2</span><span class=\"number\">.17</span></span><br></pre></td></tr></table></figure>\r\n<h1 id=\"opencvçš„æ¨¡å—\"><code>OpenCV</code>çš„æ¨¡å—</h1>\r\n<p><img src=\"/imgs/$%7Bfiilename%7D/Snipaste_2019-09-23_16-42-18.png\"  style=\"zoom: 50%;\" /></p>\r\n<table>\r\n<colgroup>\r\n<col style=\"width: 14%\" />\r\n<col style=\"width: 26%\" />\r\n<col style=\"width: 60%\" />\r\n</colgroup>\r\n<thead>\r\n<tr class=\"header\">\r\n<th style=\"text-align: center;\">æ¨¡å—</th>\r\n<th style=\"text-align: left;\">åŠŸèƒ½</th>\r\n<th style=\"text-align: left;\">æè¿°</th>\r\n</tr>\r\n</thead>\r\n<tbody>\r\n<tr class=\"odd\">\r\n<td style=\"text-align: center;\"><strong>Core</strong></td>\r\n<td style=\"text-align: left;\">æ ¸å¿ƒæ¨¡å—ï¼ŒåŒ…å«æœ€åŸºç¡€çš„æ“ä½œ</td>\r\n<td style=\"text-align: left;\">ç»˜å›¾å‡½æ•°ã€æ•°ç»„æ“ä½œç›¸å…³å‡½æ•°</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td style=\"text-align: center;\"><strong>HighGUI</strong></td>\r\n<td style=\"text-align: left;\">é«˜å±‚å›¾åƒç”¨æˆ·ç•Œé¢</td>\r\n<td style=\"text-align: left;\">è§†é¢‘ä¸å›¾åƒçš„è¯»å–ã€æ˜¾ç¤ºã€å­˜å‚¨ç­‰æ¥å£</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td style=\"text-align: center;\"><strong>Imgproc</strong></td>\r\n<td style=\"text-align: left;\">å›¾åƒå¤„ç†æ¨¡å—</td>\r\n<td style=\"text-align: left;\">å›¾åƒå¤„ç†çš„åŸºç¡€æ–¹æ³•ï¼šåŒ…æ‹¬å›¾åƒæ»¤æ³¢ã€å›¾åƒçš„å‡ ä½•å˜æ¢ã€å¹³æ»‘ã€é˜ˆå€¼åˆ†å‰²ã€å½¢æ€å­¦å¤„ç†ã€è¾¹ç¼˜æ£€æµ‹ã€ç›®æ ‡æ£€æµ‹ã€è¿åŠ¨åˆ†æå’Œå¯¹è±¡è·Ÿè¸ªç­‰</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td style=\"text-align: center;\"><strong>Featured2d</strong></td>\r\n<td style=\"text-align: left;\">2Dç‰¹å¾æ£€æµ‹æ¨¡å—</td>\r\n<td style=\"text-align: left;\">ç”¨äºæå–å›¾åƒç‰¹å¾ä»¥åŠç‰¹å¾åŒ¹é…ï¼Œnonfreeæ¨¡å—å®ç°äº†ä¸€äº›ä¸“åˆ©ç®—æ³•ï¼Œå¦‚siftç‰¹å¾ã€‚</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td style=\"text-align: center;\">Objdectect</td>\r\n<td style=\"text-align: left;\">ç›®æ ‡æ£€æµ‹æ¨¡å—</td>\r\n<td style=\"text-align: left;\">åŸºäºHaarã€LBPç‰¹å¾çš„äººè„¸æ£€æµ‹ï¼ŒåŸºäºHOGçš„è¡Œäººã€æ±½è½¦ç­‰ç›®æ ‡æ£€æµ‹ï¼Œåˆ†ç±»å™¨ä½¿ç”¨Cascade Classificationï¼ˆçº§è”åˆ†ç±»ï¼‰å’ŒLatent SVMç­‰</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td style=\"text-align: center;\">Video</td>\r\n<td style=\"text-align: left;\">è§†é¢‘å¤„ç†æ¨¡å—</td>\r\n<td style=\"text-align: left;\">é’ˆå¯¹è§†é¢‘å¤„ç†ï¼Œå¦‚èƒŒæ™¯åˆ†ç¦»ï¼Œå‰æ™¯æ£€æµ‹ã€å¯¹è±¡è·Ÿè¸ªç­‰</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td style=\"text-align: center;\">Calib3d</td>\r\n<td style=\"text-align: left;\">3Dé‡å»ºæ¨¡å—</td>\r\n<td style=\"text-align: left;\">ä¸»è¦æ˜¯ç›¸æœºæ ¡å‡†å’Œä¸‰ç»´é‡å»ºç›¸å…³çš„å†…å®¹ã€‚åŒ…å«äº†åŸºæœ¬çš„å¤šè§†è§’å‡ ä½•ç®—æ³•ï¼Œå•ä¸ªç«‹ä½“æ‘„åƒå¤´æ ‡å®šï¼Œç‰©ä½“å§¿æ€ä¼°è®¡ï¼Œç«‹ä½“ç›¸ä¼¼æ€§ç®—æ³•ï¼Œ3Dä¿¡æ¯çš„é‡å»ºç­‰ã€‚</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td style=\"text-align: center;\">ML</td>\r\n<td style=\"text-align: left;\">æœºå™¨å­¦ä¹ æ¨¡å—</td>\r\n<td style=\"text-align: left;\">SVMï¼Œå†³ç­–æ ‘ï¼ŒBoostingç­‰</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td style=\"text-align: center;\">FLANN</td>\r\n<td style=\"text-align: left;\">æœ€è¿‘é‚»æœç´¢æ¨¡å—</td>\r\n<td style=\"text-align: left;\">åŒ…å«å¿«é€Ÿè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢FLANN å’Œèšç±»Clusteringç®—æ³•</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td style=\"text-align: center;\">Stitching</td>\r\n<td style=\"text-align: left;\">å›¾åƒæ‹¼æ¥æ¨¡å—</td>\r\n<td style=\"text-align: left;\">å®ç°äº†å›¾åƒæ‹¼æ¥åŠŸèƒ½</td>\r\n</tr>\r\n<tr class=\"odd\">\r\n<td style=\"text-align: center;\">Photo</td>\r\n<td style=\"text-align: left;\">è®¡ç®—å›¾åƒå­¦</td>\r\n<td style=\"text-align: left;\">åŒ…å«å›¾åƒä¿®å¤å’Œå›¾åƒå»å™ªä¸¤éƒ¨åˆ†</td>\r\n</tr>\r\n<tr class=\"even\">\r\n<td style=\"text-align: center;\">G-API</td>\r\n<td style=\"text-align: left;\">G-APIæ¨¡å—</td>\r\n<td style=\"text-align: left;\">åŒ…å«è¶…é«˜æ•ˆçš„å›¾åƒå¤„ç†pipelineå¼•æ“</td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n<h1 id=\"å‚è€ƒ\">å‚è€ƒ</h1>\r\n<p><a href=\"https://www.bilibili.com/video/BV1Fo4y1d7JL?p=4&amp;vd_source=fe8e916be2bd597efffd8dfd95249141\"><code>é»‘é©¬ç¨‹åºå‘˜äººå·¥æ™ºèƒ½æ•™ç¨‹_10å°æ—¶å­¦ä¼šå›¾åƒå¤„ç†OpenCVå…¥é—¨æ•™ç¨‹</code></a></p>\r\n",
            "tags": [
                "Jupyter Notebook"
            ]
        }
    ]
}